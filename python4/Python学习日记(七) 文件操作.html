<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Python学习日记(七) 文件操作' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Python学习日记(七) 文件操作</center></div><div class='banquan'>原文出处:本文由博客园博主Fantac提供。<br/>
原文连接:https://www.cnblogs.com/Fantac/p/11280188.html</div><br>
    <p><span style="font-family: 宋体; font-size: 18px;">文件操作:</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">首先要有一个文件作为对象,例&lsquo;文件名&rsquo;.txt</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">1.<strong>文件路径</strong>:例 d:\文件名.txt</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">&lt;1&gt;:绝对路径:从根目录往后的路径</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">&lt;2&gt;:相对路径:当前目录下的路径有什么算什么</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">2.<strong>编码方式</strong>:UTF-8、GBK2312等</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">3.<strong>操作模式</strong>:只读、只写、追加、写读、读写等</span></p>
<p>&nbsp;</p>
<p><strong><span style="font-family: 宋体; font-size: 18px;">文件是以什么变法方式储存就要以什么编码方式打开</span></strong></p>
<div class="cnblogs_code">
<pre><code>f = open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">r</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">)　　#以UTF-8编码的文件为例
content </span>=<span style="color: #000000;"> f.read()
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(content)
f.close()</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>读:</strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>1.mode = 'r'<strong>文件的默认读取方式</strong> </strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>f.read() 文件打开后将bytes类型转化为str类型,返回值是str，Python3下的编码方式是unicode，</strong></span></p>
<div class="cnblogs_code">
<pre><code>f2 = open(<span style="color: #800000;">'</span><span style="color: #800000;">f:\目标文件.txt</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">r</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">gbk</span><span style="color: #800000;">'</span>)　　<span style="color: #008000;">#</span><span style="color: #008000;">打开的文件编码是gbk</span>
content2 =<span style="color: #000000;"> f2.read()
</span><span style="color: #0000ff;">print</span>(content2) <span style="color: #008000;">#</span><span style="color: #008000;">asd123文件</span>
f2.close()</pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">2.<strong>mode = 'rb'主要用于非文字类型文件操作,不用写编码方式</strong></span></p>
<p><strong><span style="font-family: 宋体;"><span style="font-size: 18px;">3.先读后写</span></span></strong></p>
<div class="cnblogs_code">
<pre><code>f = open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">r+</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(f.read())                 <span style="color: #008000;">#</span><span style="color: #008000;">123456789</span>
f.write(<span style="color: #800000;">'</span><span style="color: #800000;">abcd123</span><span style="color: #800000;">'</span><span style="color: #000000;">)
f.close()                       </span><span style="color: #008000;">#</span><span style="color: #008000;">123456789abcd123</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">在</span><span style="font-family: arial, helvetica, sans-serif; font-size: 18px;">f.write()</span><span style="font-family: 宋体; font-size: 18px;">后添加一个</span><span style="font-size: 18px; font-family: arial, helvetica, sans-serif;">print(f.read())</span> <span style="font-family: 宋体; font-size: 18px;">,这段代码并不会执行</span></p>
<p><strong><span style="font-family: 宋体;"><span style="font-size: 18px;">在r+模式下进行写读,写了多少就会覆盖多少</span></span></strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">原文件内容:123456789</span>
f = open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">r+</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">)
f.write(</span><span style="color: #800000;">'</span><span style="color: #800000;">abcdefg</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(f.read())     <span style="color: #008000;">#</span><span style="color: #008000;">89</span>
f.close()</pre>
</div>
<p><strong><span style="font-family: 宋体; font-size: 18px;">4.mode = 'r+b'　以bytes类型打开</span></strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">原文件内容:123456789</span>
f = open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">r+b</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(f.read()) <span style="color: #008000;">#</span><span style="color: #008000;">b'123456789'</span>
f.write(<span style="color: #800000;">'</span><span style="color: #800000;">abc</span><span style="color: #800000;">'</span>.encode(<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">))
f.close()   </span><span style="color: #008000;">#</span><span style="color: #008000;">文件更新后:123456789abc 以utf-8编码</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>写:</strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">在写入一个文件时若没有就会创建一个新的文件,有则将原文件删除再添加新的文件</span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>1.只读 mode = 'w'</strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">原文件内容:123456789</span>
f = open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">w</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">)
f.write(</span><span style="color: #800000;">'</span><span style="color: #800000;">abcdefg</span><span style="color: #800000;">'</span><span style="color: #000000;">)
f.close()   </span><span style="color: #008000;">#</span><span style="color: #008000;">文件更新后:abcdefg</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>2.mode = 'wb'</strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">原文件内容:123abc中国</span>
f = open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">wb</span><span style="color: #800000;">'</span><span style="color: #000000;">)
f.write(</span><span style="color: #800000;">'</span><span style="color: #800000;">gbka123</span><span style="color: #800000;">'</span>.encode(<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">))
f.close()   </span><span style="color: #008000;">#</span><span style="color: #008000;">文件更新后:gbka123  编码方式:utf-8</span></pre>
</div>
<p>如果再以gbk编码方式去读取这个文件那么将报错</p>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>3.mode = 'w+' 先写后读</strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">原文件内容:123abc中国</span>
f = open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">w+</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">)
f.write(</span><span style="color: #800000;">'</span><span style="color: #800000;">gbk2312</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(f.read())
f.close()   </span><span style="color: #008000;">#</span><span style="color: #008000;">文件更新后:gbk2312  编码方式:utf-8</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>4.mode = 'w+b'&nbsp;</strong></span></p>
<div class="cnblogs_code">
<pre><code>f1 = open(<span style="color: #800000;">'</span><span style="color: #800000;">logo-grey.png</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">rb</span><span style="color: #800000;">'</span><span style="color: #000000;">)
content </span>=<span style="color: #000000;"> f1.read()
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(content)
f1.close()
f2 </span>= open(<span style="color: #800000;">'</span><span style="color: #800000;">logo-grey2.png</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">wb</span><span style="color: #800000;">'</span><span style="color: #000000;">)
f2.write(content)
f2.close()</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">将原文件以rb形式读出来再写入到一个新的文件中去</span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>追加:</strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>1.mode = 'a'</strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">原文件内容:123abc中国</span>
f = open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">a</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">)
f.write(</span><span style="color: #800000;">'</span><span style="color: #800000;">%%%%</span><span style="color: #800000;">'</span><span style="color: #000000;">)
f.close()   </span><span style="color: #008000;">#</span><span style="color: #008000;">文件更新后:123abc中国%%%%  编码方式:utf-8</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>2.mdoe = 'a+'</strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">原文件内容:123abc中国</span>
f = open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">a+</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">)
f.write(</span><span style="color: #800000;">'</span><span style="color: #800000;">%%%%</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(f.read())
f.close()   </span><span style="color: #008000;">#</span><span style="color: #008000;">文件更新后:123abc中国%%%%  编码方式:utf-8</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>其他功能:</strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>1.f.read(n)</strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>　　</strong>当文件打开的方式为文本模式时,代表读取n个字符</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">原文件内容:123abc中国</span>
f = open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">r</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">)
content </span>= f.read(6<span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(content)
f.close()   </span><span style="color: #008000;">#</span><span style="color: #008000;">123abc </span></pre>
</div>
<p>　　<span style="font-family: 宋体; font-size: 18px;">当文件打开为b模式时,代表读取n个字节</span></p>
<div class="cnblogs_code">
<pre><code>f = open(<span style="color: #800000;">'</span><span style="color: #800000;">logo-grey.png</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">rb</span><span style="color: #800000;">'</span><span style="color: #000000;">)
content </span>= f.read(10<span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(content)
f.close()   </span><span style="color: #008000;">#</span><span style="color: #008000;">b'\x89PNG\r\n\x1a\n\x00\x00'</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>2.f.seek(光标位置)</strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">seek(n)光标移动到n位置,移动的单位为byte,所有utf-8编码的中文部分必须是3的倍数</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">移动到开头:seek(0)</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">移动到结尾:seek(0,2) seek最后一个参数表示从哪个位置进行偏移,1表示前位置,2表示结尾</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">原文件内容:123abc中国</span>
f = open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">r+</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">)
f.seek(0)       </span><span style="color: #008000;">#</span><span style="color: #008000;">将光标置于开头</span>
<span style="color: #0000ff;">print</span><span style="color: #000000;">(f.read())
f.seek(0)       </span><span style="color: #008000;">#</span><span style="color: #008000;">将光标置于开头</span>
f.seek(0,2)     <span style="color: #008000;">#</span><span style="color: #008000;">将光标置于结尾</span>
<span style="color: #0000ff;">print</span>(f.read()) <span style="color: #008000;">#</span><span style="color: #008000;">读到空白</span>
<span style="color: #000000;">f.seek(0)
f.write(</span><span style="color: #800000;">'</span><span style="color: #800000;">随便</span><span style="color: #800000;">'</span><span style="color: #000000;">)   
f.flush()       </span><span style="color: #008000;">#</span><span style="color: #008000;">文件更新后:随便中国 3*2 = 6 byte</span>
f.close()</pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>3.f.tell()</strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">告诉我们光标在什么位置</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">原文件内容:123abc中国</span>
f = open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">r+</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">)
f.seek(0)       </span><span style="color: #008000;">#</span><span style="color: #008000;">将光标置于开头</span>
<span style="color: #0000ff;">print</span>(f.tell()) <span style="color: #008000;">#</span><span style="color: #008000;">0</span>
<span style="color: #0000ff;">print</span><span style="color: #000000;">(f.read())
f.seek(0)       </span><span style="color: #008000;">#</span><span style="color: #008000;">将光标置于开头</span>
<span style="color: #0000ff;">print</span>(f.tell()) <span style="color: #008000;">#</span><span style="color: #008000;">0</span>
f.seek(0,2)     <span style="color: #008000;">#</span><span style="color: #008000;">将光标置于结尾</span>
<span style="color: #0000ff;">print</span>(f.tell()) <span style="color: #008000;">#</span><span style="color: #008000;">12</span>
<span style="color: #0000ff;">print</span>(f.read()) <span style="color: #008000;">#</span><span style="color: #008000;">读到空白</span>
<span style="color: #000000;">f.seek(0)
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(f.tell())
f.write(</span><span style="color: #800000;">'</span><span style="color: #800000;">随便</span><span style="color: #800000;">'</span><span style="color: #000000;">)
f.flush()       </span><span style="color: #008000;">#</span><span style="color: #008000;">文件更新后:随便中国 3*2 = 6 byte</span>
<span style="color: #0000ff;">print</span>(f.tell()) <span style="color: #008000;">#</span><span style="color: #008000;">6</span>
f.close()</pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>4.f.readable()&amp;f.writeable()　判断是否可读</strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">原文件内容:123abc中国</span>
f = open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">r+</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(f.readable())
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(f.writable())
f.close()</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>5.f.readline()</strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">每次只读一行,读取后的数据都有一个'\n',原文件内容不会发生改变</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">原文件内容:　　</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 123</span><span style="color: #008000;">
#</span><span style="color: #008000;"> abc</span><span style="color: #008000;">
#</span><span style="color: #008000;"> gb2</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 456</span><span style="color: #008000;">
#</span><span style="color: #008000;"> asd</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> os
li </span>=<span style="color: #000000;"> []
f </span>= open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">r+</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">while</span> f.tell() != os.path.getsize(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span><span style="color: #000000;">):
    li.append(f.readline().strip())
f.close()
</span><span style="color: #0000ff;">print</span>(li)   <span style="color: #008000;">#</span><span style="color: #008000;">['123', 'abc', 'gb2', '456', 'asd']</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>6.f.readlines()</strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">返回一个列表,列表中的元素是原文件的每一行,文件如果过大,占内存且容易崩盘</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">原文件内容:</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 123</span><span style="color: #008000;">
#</span><span style="color: #008000;"> abc</span><span style="color: #008000;">
#</span><span style="color: #008000;"> gb2</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 456</span><span style="color: #008000;">
#</span><span style="color: #008000;"> asd</span>
f = open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">r+</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(f.readlines())    <span style="color: #008000;">#</span><span style="color: #008000;">['123\n', 'abc\n', 'gb2\n', '456\n', 'asd']</span>
f.close()</pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>7.f.truncate()</strong></span></p>
<p><span style="font-size: 18px; font-family: 宋体;">对原文件进行截取数据,0则全删 以byte为单位截取</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">原文件内容:123456abcd</span>
f = open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">r+</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">)
f.truncate(</span>4<span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(f.read()) <span style="color: #008000;">#</span><span style="color: #008000;">1234</span>
f.close()</pre>
</div>
<p><strong><span style="font-family: 宋体; font-size: 18px;">8.for循环</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px;">文件句柄是一个迭代器,每一次的循环只在内存中占一行数据,非常节省内存</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">原文件内容:</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 123</span><span style="color: #008000;">
#</span><span style="color: #008000;"> abc</span><span style="color: #008000;">
#</span><span style="color: #008000;"> gb2</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 456</span><span style="color: #008000;">
#</span><span style="color: #008000;"> asd</span>
f = open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">r+</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> f:
    </span><span style="color: #0000ff;">print</span>(i,end = <span style="color: #800000;">''</span><span style="color: #000000;">)
f.close()
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 打印内容</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 123</span><span style="color: #008000;">
#</span><span style="color: #008000;"> abc</span><span style="color: #008000;">
#</span><span style="color: #008000;"> gb2</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 456</span><span style="color: #008000;">
#</span><span style="color: #008000;"> asd</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>9.修改文件</strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> 原文件内容:</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 123</span><span style="color: #008000;">
#</span><span style="color: #008000;"> abc</span><span style="color: #008000;">
#</span><span style="color: #008000;"> gb2</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 456</span><span style="color: #008000;">
#</span><span style="color: #008000;"> asd</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 123</span>
with open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span>) as f1,open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件.bak</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">w</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f2:
    </span><span style="color: #0000ff;">for</span> line <span style="color: #0000ff;">in</span><span style="color: #000000;"> f1:
        </span><span style="color: #0000ff;">if</span> <span style="color: #800000;">'</span><span style="color: #800000;">123</span><span style="color: #800000;">'</span> <span style="color: #0000ff;">in</span><span style="color: #000000;"> line:
            line </span>= line.replace(<span style="color: #800000;">'</span><span style="color: #800000;">123</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">hello world!</span><span style="color: #800000;">'</span><span style="color: #000000;">)
        f2.write(line)
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 文件修改后内容:</span><span style="color: #008000;">
#</span><span style="color: #008000;"> hello world!</span><span style="color: #008000;">
#</span><span style="color: #008000;"> abc</span><span style="color: #008000;">
#</span><span style="color: #008000;"> gb2</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 456</span><span style="color: #008000;">
#</span><span style="color: #008000;"> asd</span><span style="color: #008000;">
#</span><span style="color: #008000;"> hello world!</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> os
os.remove(</span><span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>)                  <span style="color: #008000;">#</span><span style="color: #008000;">删除文件</span>
os.replace(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件.bak</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>)   <span style="color: #008000;">#</span><span style="color: #008000;">重命名</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>10.文件打开的另一种办法</strong></span></p>
<div class="cnblogs_code">
<pre><code>with open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">r</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f:
    </span><span style="color: #0000ff;">print</span>(f.read())</pre>
</div>
<p>多个文件操作:</p>
<div class="cnblogs_code">
<pre><code>with open(<span style="color: #800000;">'</span><span style="color: #800000;">目标文件</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">r</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f1,\
        open(</span><span style="color: #800000;">'</span><span style="color: #800000;">目标文件2</span><span style="color: #800000;">'</span>,mode=<span style="color: #800000;">'</span><span style="color: #800000;">w</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f2:
    </span><span style="color: #0000ff;">print</span><span style="color: #000000;">(f1.read())
    f2.write(</span><span style="color: #800000;">'</span><span style="color: #800000;">something</span><span style="color: #800000;">'</span>)</pre>
</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>