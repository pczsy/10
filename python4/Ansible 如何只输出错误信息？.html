<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Ansible 如何只输出错误信息？' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Ansible 如何只输出错误信息？</center></div><div class='banquan'>原文出处:本文由博客园博主hoxis提供。<br/>
原文连接:https://www.cnblogs.com/hoxis/p/11691334.html</div><br>
    <p>有时主机较多时，我们只想关注有问题的主机。</p>
<p>Ansible callback 插件中有一个 <code>actionable</code>，官方描述为：</p>
<blockquote>
<p>actionable - shows only items that need attention</p>
</blockquote>
<p>即只输出需要关注的部分。</p>
<p>但是 callback 插件只对 playbook 生效，如何对 Ad-hoc 起作用呢？</p>
<p>参考文档：<a href="https://docs.ansible.com/ansible/2.6/plugins/callback.html#managing-adhoc" class="uri">https://docs.ansible.com/ansible/2.6/plugins/callback.html#managing-adhoc</a></p>
<p>可以通过修改配置文件</p>
<pre><code><code>[defaults]
bin_ansible_callbacks=True</code></pre>
<p>或者修改环境变量来实现</p>
<pre><code><code>export ANSIBLE_LOAD_CALLBACK_PLUGINS=1</code></pre>
<p>这里我们通过环境变量的方式来进行，这样比较轻量，无需修改文件</p>
<p>在运行 Ad-hoc 命令时，前面加上两个参数即可：</p>
<p><code>ANSIBLE_LOAD_CALLBACK_PLUGINS=1 ANSIBLE_STDOUT_CALLBACK=actionable</code></p>
<p>完整命令如下：</p>
<pre class="bash"><code>ANSIBLE_LOAD_CALLBACK_PLUGINS=1 ANSIBLE_STDOUT_CALLBACK=actionable ansible all -m ping</code></pre>
<p>另外，ansible 环境变量汇总见页面：<a href="https://docs.ansible.com/ansible/2.6/reference_appendices/config.html#ansible-configuration-settings" class="uri">https://docs.ansible.com/ansible/2.6/reference_appendices/config.html#ansible-configuration-settings</a></p>
<p>参考：</p>
<ul>
<li><a href="https://stackoverflow.com/questions/40239150/how-can-i-make-ansible-show-only-errors-in-execution" class="uri">https://stackoverflow.com/questions/40239150/how-can-i-make-ansible-show-only-errors-in-execution</a></li>
<li><p><a href="https://docs.ansible.com/ansible/2.6/plugins/callback.html#callback-plugins" class="uri">https://docs.ansible.com/ansible/2.6/plugins/callback.html#callback-plugins</a></p>
<blockquote>
<p>本文由博客一文多发平台 <a href="https://openwrite.cn?from=article_bottom">OpenWrite</a> 发布！</p>
</blockquote></li>
</ul>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>