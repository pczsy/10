<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='ç”µè„‘,ç”µè„‘è®²è§£,ç”µè„‘æŠ€æœ¯,ç¼–ç¨‹,ç”µè„‘æ•…éšœç»´ä¿®UWP è·å–åšå®¢å›­ç§¯åˆ†ï¼Œå¹¶ä»¥å›¾è¡¨å½¢å¼å‘ˆç°å˜åŒ–è¶‹åŠ¿' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>é¦–é¡µ</a></li>
</div><div onclick='hidden1()' >åˆ†äº«</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>UWP è·å–åšå®¢å›­ç§¯åˆ†ï¼Œå¹¶ä»¥å›¾è¡¨å½¢å¼å‘ˆç°å˜åŒ–è¶‹åŠ¿</center></div><div class='banquan'>åŸæ–‡å‡ºå¤„:æœ¬æ–‡ç”±åšå®¢å›­åšä¸»æ˜ŸæœŸå…«å†å¨¶ä½ æä¾›ã€‚<br/>
åŸæ–‡è¿æ¥:https://www.cnblogs.com/hupo376787/p/12094009.html</div><br>
    <p>å…ˆçœ‹ä¸€ä¸‹æ•ˆæœå§</p>
<p><img src="./images/UWP è·å–åšå®¢å›­ç§¯åˆ†ï¼Œå¹¶ä»¥å›¾è¡¨å½¢å¼å‘ˆç°å˜åŒ–è¶‹åŠ¿0.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-size: 18pt;"><strong><span style="color: #ff00ff;">1. åˆ†æ</span></strong></span></p>
<p>è¯´å®è¯ï¼Œä¹‹å‰è¿˜çœŸæ²¡åœ¨ä¹è¿‡åšå®¢å›­çš„æ’åå’Œç§¯åˆ†ï¼Œåšå®¢å›­é»˜è®¤ä¹Ÿä¸ç»™æ˜¾ç¤ºã€‚éœ€è¦è‡ªå·±åˆ°é€‰é¡¹é‡Œé¢å‹¾é€‰æ‰å¯ä»¥ã€‚</p>
<p><img src="./images/UWP è·å–åšå®¢å›­ç§¯åˆ†ï¼Œå¹¶ä»¥å›¾è¡¨å½¢å¼å‘ˆç°å˜åŒ–è¶‹åŠ¿1.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;ä¹‹å‰ä¹Ÿæœ‰å‡ ä¸ªå¤§ä½¬å†™è¿‡ç±»ä¼¼çš„æ–‡ç« ï¼Œä¸è¿‡æ˜¯å¾ˆæ—©äº†ã€‚åšå®¢å›­å…³äºè·å–ç§¯åˆ†çš„apiå·²ç»å˜äº†ã€‚</p>
<p>ä¹Ÿä¸ç®—æ˜¯apiå§ï¼Œæ¯•ç«Ÿä¸æ˜¯å®˜æ–¹å…¬å¼€çš„ã€‚ä¸è¿‡è‡ªå·±å¯ä»¥é€šè¿‡æŸ¥çœ‹é¡µé¢å…ƒç´ ï¼Œæ‰¾åˆ°åšå®¢å›­çš„ç§¯åˆ†urlã€‚</p>
<p>&nbsp;</p>
<p>åœ¨ä½ å‹¾é€‰âœ”äº†ä¸Šé¢çš„é€‰é¡¹ä¹‹åï¼Œæ‰“å¼€ä½ çš„åšå®¢ä¸»é¡µï¼Œæ¯”å¦‚æˆ‘çš„å°±æ˜¯<a href="https://www.cnblogs.com/hupo376787/">https://www.cnblogs.com/hupo376787/</a></p>
<p>æŒ‰F12ï¼Œè°ƒå‡ºå¼€å‘è€…å·¥å…·ï¼Œè¿›å…¥Networké€‰é¡¹å¡ã€‚</p>
<p>å¦‚æœåœ¨ä¸‹é¢çš„åˆ—è¡¨é‡Œé¢æ²¡æœ‰æ•°æ®ï¼ŒF5åˆ·æ–°ä¸€ä¸‹é¡µé¢å³å¯ã€‚</p>
<p><img src="./images/UWP è·å–åšå®¢å›­ç§¯åˆ†ï¼Œå¹¶ä»¥å›¾è¡¨å½¢å¼å‘ˆç°å˜åŒ–è¶‹åŠ¿2.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>ç„¶åï¼Œç‚¹å‡»ã€sidecolumn.aspxã€‘ï¼Œå³ä¾§å°±ä¼šå‡ºç°ç›¸ä¿¡çš„ä¿¡æ¯ã€‚</p>
<p>å³å‡»ã€sidecolumn.aspxã€‘ï¼Œã€copy link addressã€‘ï¼Œè¿™ä¸ªurlå°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ã€‚</p>
<p>ç„¶åæ ¹æ®è¿™ä¸ªurlè¿”å›çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼æˆ–è€…å…¶ä»–æ‰‹æ®µæ‰¾åˆ°ç§¯åˆ†å’Œæ’åçš„æ•°æ®å³å¯ã€‚</p>
<p>&nbsp;</p>
<p><span style="font-size: 18pt;"><strong><span style="color: #ff00ff;">2. å†™Xamlç•Œé¢</span></strong></span></p>
<p>æ—¢ç„¶æ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œå¯ä»¥æ‹¿åˆ°ç§¯åˆ†å’Œæ’åçš„æ•°æ®ï¼Œé‚£ä¹ˆå†™ä»£ç å°±ç®€å•å¤šäº†ã€‚</p>
<p>æˆ‘è¿™é‡Œä½¿ç”¨C#æ¥å†™çš„ï¼Œè¯­è¨€åªæ˜¯ä¸€ç§å·¥å…·ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨Javaã€Swiftã€JavaScriptã€Flutterç­‰ï¼Œè¿˜å¯ä»¥ç”¨Pythonå†™ã€‚</p>
<p>æ— è®ºå“ªä¸€ç§ï¼Œåªè¦èƒ½æ‹¿åˆ°æ•°æ®ï¼Œç”¨å›¾è¡¨å±•ç¤ºå‡ºæ¥å³å¯ã€‚</p>
<p>åœ¨xamlä¸­ï¼Œå®šä¹‰ä¸€ä¸‹ç”¨æˆ·åè¾“å…¥æ¡†ï¼Œè¿˜æœ‰ä¸€ä¸ªå›¾è¡¨æ§ä»¶ã€‚</p>
<p>å›¾è¡¨ä½¿ç”¨çš„Microchartsã€‚è¿™æ˜¯ä¸€ä¸ªå¼€æºçš„å›¾è¡¨æ§ä»¶ï¼ŒGithubä¸Šå·²ç»æ–©è·1000å¤šä¸ªâœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨</p>
<div class="cnblogs_code">
<pre><code>&lt;StackPanel&gt;
            &lt;<span style="color: #000000;">TextBox 
                x:Name</span>=<span style="color: #800000;">"</span><span style="color: #800000;">textBlockUser</span><span style="color: #800000;">"</span><span style="color: #000000;"> 
                Background</span>=<span style="color: #800000;">"</span><span style="color: #800000;">Transparent</span><span style="color: #800000;">"</span><span style="color: #000000;">
                Padding</span>=<span style="color: #800000;">"</span><span style="color: #800000;">0, 5</span><span style="color: #800000;">"</span><span style="color: #000000;">
                BorderThickness</span>=<span style="color: #800000;">"</span><span style="color: #800000;">0</span><span style="color: #800000;">"</span><span style="color: #000000;">
                Width</span>=<span style="color: #800000;">"</span><span style="color: #800000;">200</span><span style="color: #800000;">"</span><span style="color: #000000;">
                HorizontalAlignment</span>=<span style="color: #800000;">"</span><span style="color: #800000;">Left</span><span style="color: #800000;">"</span><span style="color: #000000;">
                PlaceholderText</span>=<span style="color: #800000;">"</span><span style="color: #800000;">hupo376787</span><span style="color: #800000;">"</span><span style="color: #000000;">
                TextChanged</span>=<span style="color: #800000;">"</span><span style="color: #800000;">User_TextChanged</span><span style="color: #800000;">"</span>/&gt;
            &lt;TextBlock x:Name=<span style="color: #800000;">"</span><span style="color: #800000;">textBlockDate</span><span style="color: #800000;">"</span>/&gt;
            &lt;TextBlock x:Name=<span style="color: #800000;">"</span><span style="color: #800000;">textBlockScore</span><span style="color: #800000;">"</span>/&gt;
            &lt;TextBlock x:Name=<span style="color: #800000;">"</span><span style="color: #800000;">textBlockRank</span><span style="color: #800000;">"</span>/&gt;

            &lt;charts:ChartView x:Name=<span style="color: #800000;">"</span><span style="color: #800000;">microChart</span><span style="color: #800000;">"</span><span style="color: #000000;">
                              Height</span>=<span style="color: #800000;">"</span><span style="color: #800000;">300</span><span style="color: #800000;">"</span>/&gt;
        &lt;/StackPanel&gt;</pre>
</div>
<p>&nbsp;</p>
<p><span style="font-size: 18pt;"><strong><span style="color: #ff00ff;">3. è·å–ç½‘é¡µæ•°æ®</span></strong></span></p>
<p>åˆ©ç”¨HttpClientå†™ä»£ç ï¼Œè·å–æŒ‡å®šurlçš„ç½‘é¡µæºä»£ç ã€‚</p>
<p>useræ˜¯æ–‡æœ¬æ¡†å¯ä»¥è¾“å…¥çš„ç”¨æˆ·idã€‚</p>
<p>ç„¶åæ ¹æ®Httpè¿”å›æ¥çš„æ•°æ®ï¼Œåšæˆä¸€ä¸ªList&lt;string&gt;ã€‚è¿™æ ·å°±ä¸ç”¨å†™æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾ğŸ”äº†ã€‚</p>
<p>å…¶å®ä¸»è¦æ˜¯æˆ‘ä¸å¤§ä¼šå†™æ­£åˆ™è¡¨è¾¾å¼è€Œå·²ã€‚<img src="./images/UWP è·å–åšå®¢å›­ç§¯åˆ†ï¼Œå¹¶ä»¥å›¾è¡¨å½¢å¼å‘ˆç°å˜åŒ–è¶‹åŠ¿3.png" alt="" width="202" height="112" /></p>
<p>&nbsp;ä¸å¥½æ„æ€æš´éœ²äº†ã€‚</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><code> string url = <span style="color: #800000;">"</span><span style="color: #800000;">https://www.cnblogs.com/</span><span style="color: #800000;">"</span> + user + <span style="color: #800000;">"</span><span style="color: #800000;">/ajax/sidecolumn.aspx</span><span style="color: #800000;">"</span><span style="color: #000000;">;
                HttpClient client </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> HttpClient();
                HttpResponseMessage message </span>= <span style="color: #0000ff;">await</span><span style="color: #000000;"> client.GetAsync(url);
                </span><span style="color: #0000ff;">string</span> content = <span style="color: #0000ff;">await</span><span style="color: #000000;"> message.Content.ReadAsStringAsync();
                List</span>&lt;<span style="color: #0000ff;">string</span>&gt; lines = content.Replace(<span style="color: #800000;">"</span><span style="color: #800000;">ç§¯åˆ†ä¸æ’å</span><span style="color: #800000;">"</span>, <span style="color: #800000;">""</span>).Split(<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">).ToList();

                </span><span style="color: #0000ff;">var</span> scoreHeaderIndex = lines.FindIndex(x =&gt; x.Contains(<span style="color: #800000;">"</span><span style="color: #800000;">ç§¯åˆ†</span><span style="color: #800000;">"</span><span style="color: #000000;">));
                </span><span style="color: #0000ff;">var</span> rankHeaderIndex = lines.FindIndex(x =&gt; x.Contains(<span style="color: #800000;">"</span><span style="color: #800000;">æ’å</span><span style="color: #800000;">"</span><span style="color: #000000;">));

                </span><span style="color: #0000ff;">int</span> score = Convert.ToInt32(lines[scoreHeaderIndex + <span style="color: #800080;">1</span><span style="color: #000000;">]);
                </span><span style="color: #0000ff;">int</span> rank = Convert.ToInt32(lines[rankHeaderIndex + <span style="color: #800080;">1</span>]);</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-size: 18pt;"><strong><span style="color: #ff00ff;">4. ç”Ÿæˆå›¾è¡¨</span></strong></span></p>
<p>å› ä¸ºè¦åšæˆè¶‹åŠ¿å›¾ï¼Œå¹¶ä¸”åšå®¢å›­è¿”å›çš„æ•°æ®åªæ˜¯å½“å¤©çš„ä¿¡æ¯ï¼Œå¹¶ä¸ä¸åŒ…å«å†å²è®°å½•ã€‚</p>
<p>æ‰€ä»¥éœ€è¦æ‰‹åŠ¨è®°å½•æ•°æ®ï¼Œå¹¶å­˜æ”¾åœ¨æœ¬åœ°ã€‚</p>
<p>ä¹‹å‰é‚£å‡ ä¸ªå¤§ä½¬ä¹Ÿæ˜¯è¿™æ ·å­ï¼Œå†™æˆäº†pythonæˆ–è€…jsï¼Œæ¯å¤©è‡ªåŠ¨è¿è¡Œä¸€æ¬¡ï¼Œä¿å­˜æ•°æ®ã€‚</p>
<p>UWPæƒ³è¦è®°å½•æ•°æ®ï¼Œéœ€è¦ä¸€ç‚¹é¢å¤–çš„æƒé™ã€‚</p>
<p>å› ä¸ºéœ€è¦è®°å½•txtæ–‡ä»¶ï¼Œè€Œè¿™æ ·çš„æ–‡æœ¬æ–‡ä»¶æœ€å¥½æ”¾åœ¨user/documentæ–‡ä»¶å¤¹ä¸‹ã€‚</p>
<p>é¦–å…ˆï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€Package.appxmanifestï¼ŒåŠ ä¸Š</p>
<div class="cnblogs_code">
<pre><code>&lt;Capabilities&gt;
   &lt;uap:Capability Name=<span style="color: #800000;">"</span><span style="color: #800000;">documentsLibrary</span><span style="color: #800000;">"</span> /&gt;
&lt;/Capabilities&gt;</pre>
</div>
<p>&nbsp;</p>
<p>ç„¶ååœ¨vsä¸­æ‰“å¼€Package.appxmanifestï¼Œæ·»åŠ å£°æ˜ã€‚æŒ‰ç…§å›¾ç¤ºè®¾ç½®ã€‚</p>
<p><img src="./images/UWP è·å–åšå®¢å›­ç§¯åˆ†ï¼Œå¹¶ä»¥å›¾è¡¨å½¢å¼å‘ˆç°å˜åŒ–è¶‹åŠ¿4.png" alt="" /></p>
<p>&nbsp;</p>
<p>è¿™æ ·å°±æœ‰æƒé™å†™å…¥txtåˆ°æ–‡æ¡£æ–‡ä»¶å¤¹äº†ã€‚</p>
<div class="cnblogs_code">
<pre><code>                StorageFolder storageFolder =<span style="color: #000000;"> KnownFolders.DocumentsLibrary;
                StorageFile file </span>= <span style="color: #0000ff;">await</span> storageFolder.CreateFileAsync(<span style="color: #800000;">"</span><span style="color: #800000;">cnBlogs.txt</span><span style="color: #800000;">"</span><span style="color: #000000;">, CreationCollisionOption.OpenIfExists);
                </span><span style="color: #0000ff;">string</span> existData = <span style="color: #0000ff;">await</span><span style="color: #000000;"> FileIO.ReadTextAsync(file);
                List</span>&lt;<span style="color: #0000ff;">string</span>&gt; list = existData.Split(<span style="color: #800000;">"</span><span style="color: #800000;">\r\n</span><span style="color: #800000;">"</span>).ToList();</pre>
</div>
<p>&nbsp;</p>
<p>æˆ‘è¿™å„¿é¦–å…ˆè¯»å–äº†txté‡Œé¢çš„æ•°æ®ï¼Œå¦‚æœè¿™ä¸ªtxtä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºã€‚å·²ç»å­˜åœ¨çš„è¯ï¼Œç›´æ¥æ‰“å¼€è¯»å–æ•°æ®ã€‚</p>
<p>ç„¶åç»˜å›¾</p>
<div class="cnblogs_code">
<pre><code>                Random rnd = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Random();
                List</span>&lt;ChartEntry&gt; entries = <span style="color: #0000ff;">new</span> List&lt;ChartEntry&gt;<span style="color: #000000;">();
                </span><span style="color: #0000ff;">foreach</span>(<span style="color: #0000ff;">var</span> item <span style="color: #0000ff;">in</span><span style="color: #000000;"> list)
                {
                    </span><span style="color: #0000ff;">if</span> (item.Trim() == <span style="color: #800000;">""</span><span style="color: #000000;">)
                        </span><span style="color: #0000ff;">continue</span><span style="color: #000000;">;

                    </span><span style="color: #0000ff;">var</span> singleLineArray = item.Split(<span style="color: #800000;">"</span><span style="color: #800000;">,</span><span style="color: #800000;">"</span><span style="color: #000000;">);
                    </span><span style="color: #0000ff;">var</span> entry = <span style="color: #0000ff;">new</span> ChartEntry((<span style="color: #0000ff;">float</span>)Convert.ToDouble(singleLineArray[<span style="color: #800080;">1</span><span style="color: #000000;">]))
                    {
                        Label </span>= singleLineArray[<span style="color: #800080;">0</span><span style="color: #000000;">],
                        ValueLabel </span>= singleLineArray[<span style="color: #800080;">1</span><span style="color: #000000;">],
                        Color </span>= SKColor.Parse(String.Format(<span style="color: #800000;">"</span><span style="color: #800000;">#{0:X6}</span><span style="color: #800000;">"</span>, rnd.Next(<span style="color: #800080;">0x1000000</span><span style="color: #000000;">)))
                    };
                    entries.Add(entry);
                }</span><span style="color: #0000ff;">var</span> chart = <span style="color: #0000ff;">new</span><span style="color: #000000;"> LineChart {
                    Entries </span>=<span style="color: #000000;"> entries,
                    MinValue </span>= <span style="color: #800080;">100000</span><span style="color: #000000;">,
                    BackgroundColor </span>=<span style="color: #000000;"> SKColors.Transparent
                };
                </span><span style="color: #0000ff;">this</span>.microChart.Chart = chart;</pre>
</div>
<p>&nbsp;</p>
<p>å¦‚æœåœ¨ç”ŸæˆæŠ˜çº¿å›¾çš„æ—¶å€™ï¼Œä¸åŠ ä¸Š</p>
<div class="cnblogs_code">
<pre><code>BackgroundColor = SKColors.Transparent</pre>
</div>
<p>ç”Ÿæˆçš„å›¾è¡¨é»˜è®¤ç™½è‰²ã€‚ä½†æ˜¯èƒŒæ™¯é€æ˜å¥½çœ‹ã€‚</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-size: 18pt;"><strong><span style="color: #ff00ff;">5.&nbsp;è®°å½•è·å–çš„ç§¯åˆ†å’Œæ’åæ•°æ®</span></strong></span></p>
<p>&nbsp;ä¸ºäº†é˜²æ­¢ä¸€å¤©å†…å¤šæ¬¡æ‰“å¼€appï¼Œé‡å¤è®°å½•ï¼Œæ‰€ä»¥æˆ‘åšäº†ä¸€ä¸ªæ£€æŸ¥ã€‚</p>
<p>åˆ©ç”¨System.IOå†™å…¥æ•°æ®ã€‚</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">                string</span> contentToWrite = <span style="color: #800000;">""</span><span style="color: #000000;">;
                </span><span style="color: #008000;">//</span><span style="color: #008000;">Add Today</span>
                <span style="color: #0000ff;">if</span> (!existData.Contains(DateTime.Now.ToString(<span style="color: #800000;">"</span><span style="color: #800000;">yyyy-MM-dd</span><span style="color: #800000;">"</span><span style="color: #000000;">)))
                {
                    </span><span style="color: #0000ff;">var</span> entryToday = <span style="color: #0000ff;">new</span> ChartEntry((<span style="color: #0000ff;">float</span><span style="color: #000000;">)Convert.ToDouble(score))
                    {
                        Label </span>=<span style="color: #000000;"> score.ToString(),
                        ValueLabel </span>= DateTime.Now.ToString(<span style="color: #800000;">"</span><span style="color: #800000;">yyyy-MM-dd</span><span style="color: #800000;">"</span><span style="color: #000000;">),
                        Color </span>= SKColor.Parse(<span style="color: #0000ff;">string</span>.Format(<span style="color: #800000;">"</span><span style="color: #800000;">#{0:X6}</span><span style="color: #800000;">"</span>, rnd.Next(<span style="color: #800080;">0x1000000</span><span style="color: #000000;">)))
                    };
                    entries.Append(entryToday);

                    contentToWrite </span>= existData + <span style="color: #800000;">"</span><span style="color: #800000;">\r\n</span><span style="color: #800000;">"</span> + DateTime.Now.ToString(<span style="color: #800000;">"</span><span style="color: #800000;">yyyy-MM-dd</span><span style="color: #800000;">"</span>) + <span style="color: #800000;">"</span><span style="color: #800000;">,</span><span style="color: #800000;">"</span> + score + <span style="color: #800000;">"</span><span style="color: #800000;">,</span><span style="color: #800000;">"</span> +<span style="color: #000000;"> rank;
                }
                </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
                    contentToWrite </span>=<span style="color: #000000;"> existData;

                </span><span style="color: #008000;">//</span><span style="color: #008000;">Write</span>
                <span style="color: #0000ff;">await</span> FileIO.WriteTextAsync(file, contentToWrite);</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-size: 18pt;"><strong><span style="color: #ff00ff;">6. å®Œæˆçš„ä»£ç </span></strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">        private</span> <span style="color: #0000ff;">async</span> Task GetData(<span style="color: #0000ff;">string</span><span style="color: #000000;"> user)
        {
            </span><span style="color: #0000ff;">try</span><span style="color: #000000;">
            {
                </span><span style="color: #0000ff;">string</span> url = <span style="color: #800000;">"</span><span style="color: #800000;">https://www.cnblogs.com/</span><span style="color: #800000;">"</span> + user + <span style="color: #800000;">"</span><span style="color: #800000;">/ajax/sidecolumn.aspx</span><span style="color: #800000;">"</span><span style="color: #000000;">;
                HttpClient client </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> HttpClient();
                HttpResponseMessage message </span>= <span style="color: #0000ff;">await</span><span style="color: #000000;"> client.GetAsync(url);
                </span><span style="color: #0000ff;">string</span> content = <span style="color: #0000ff;">await</span><span style="color: #000000;"> message.Content.ReadAsStringAsync();
                List</span>&lt;<span style="color: #0000ff;">string</span>&gt; lines = content.Replace(<span style="color: #800000;">"</span><span style="color: #800000;">ç§¯åˆ†ä¸æ’å</span><span style="color: #800000;">"</span>, <span style="color: #800000;">""</span>).Split(<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">).ToList();

                </span><span style="color: #0000ff;">var</span> scoreHeaderIndex = lines.FindIndex(x =&gt; x.Contains(<span style="color: #800000;">"</span><span style="color: #800000;">ç§¯åˆ†</span><span style="color: #800000;">"</span><span style="color: #000000;">));
                </span><span style="color: #0000ff;">var</span> rankHeaderIndex = lines.FindIndex(x =&gt; x.Contains(<span style="color: #800000;">"</span><span style="color: #800000;">æ’å</span><span style="color: #800000;">"</span><span style="color: #000000;">));

                </span><span style="color: #0000ff;">int</span> score = Convert.ToInt32(lines[scoreHeaderIndex + <span style="color: #800080;">1</span><span style="color: #000000;">]);
                </span><span style="color: #0000ff;">int</span> rank = Convert.ToInt32(lines[rankHeaderIndex + <span style="color: #800080;">1</span><span style="color: #000000;">]);

                textBlockDate.Text </span>= DateTime.Now.ToString(<span style="color: #800000;">"</span><span style="color: #800000;">yyyy-MM-dd</span><span style="color: #800000;">"</span><span style="color: #000000;">);
                textBlockScore.Text </span>=<span style="color: #000000;"> score.ToString();
                textBlockRank.Text </span>=<span style="color: #000000;"> rank.ToString();

                StorageFolder storageFolder </span>=<span style="color: #000000;"> KnownFolders.DocumentsLibrary;
                StorageFile file </span>= <span style="color: #0000ff;">await</span> storageFolder.CreateFileAsync(<span style="color: #800000;">"</span><span style="color: #800000;">cnBlogs.txt</span><span style="color: #800000;">"</span><span style="color: #000000;">, CreationCollisionOption.OpenIfExists);
                </span><span style="color: #0000ff;">string</span> existData = <span style="color: #0000ff;">await</span><span style="color: #000000;"> FileIO.ReadTextAsync(file);
                List</span>&lt;<span style="color: #0000ff;">string</span>&gt; list = existData.Split(<span style="color: #800000;">"</span><span style="color: #800000;">\r\n</span><span style="color: #800000;">"</span><span style="color: #000000;">).ToList();

                Random rnd </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> Random();
                List</span>&lt;ChartEntry&gt; entries = <span style="color: #0000ff;">new</span> List&lt;ChartEntry&gt;<span style="color: #000000;">();
                </span><span style="color: #0000ff;">foreach</span>(<span style="color: #0000ff;">var</span> item <span style="color: #0000ff;">in</span><span style="color: #000000;"> list)
                {
                    </span><span style="color: #0000ff;">if</span> (item.Trim() == <span style="color: #800000;">""</span><span style="color: #000000;">)
                        </span><span style="color: #0000ff;">continue</span><span style="color: #000000;">;

                    </span><span style="color: #0000ff;">var</span> singleLineArray = item.Split(<span style="color: #800000;">"</span><span style="color: #800000;">,</span><span style="color: #800000;">"</span><span style="color: #000000;">);
                    </span><span style="color: #0000ff;">var</span> entry = <span style="color: #0000ff;">new</span> ChartEntry((<span style="color: #0000ff;">float</span>)Convert.ToDouble(singleLineArray[<span style="color: #800080;">1</span><span style="color: #000000;">]))
                    {
                        Label </span>= singleLineArray[<span style="color: #800080;">0</span><span style="color: #000000;">],
                        ValueLabel </span>= singleLineArray[<span style="color: #800080;">1</span><span style="color: #000000;">],
                        Color </span>= SKColor.Parse(String.Format(<span style="color: #800000;">"</span><span style="color: #800000;">#{0:X6}</span><span style="color: #800000;">"</span>, rnd.Next(<span style="color: #800080;">0x1000000</span><span style="color: #000000;">)))
                    };
                    entries.Add(entry);
                }

                </span><span style="color: #0000ff;">string</span> contentToWrite = <span style="color: #800000;">""</span><span style="color: #000000;">;
                </span><span style="color: #008000;">//</span><span style="color: #008000;">Add Today</span>
                <span style="color: #0000ff;">if</span> (!existData.Contains(DateTime.Now.ToString(<span style="color: #800000;">"</span><span style="color: #800000;">yyyy-MM-dd</span><span style="color: #800000;">"</span><span style="color: #000000;">)))
                {
                    </span><span style="color: #0000ff;">var</span> entryToday = <span style="color: #0000ff;">new</span> ChartEntry((<span style="color: #0000ff;">float</span><span style="color: #000000;">)Convert.ToDouble(score))
                    {
                        Label </span>=<span style="color: #000000;"> score.ToString(),
                        ValueLabel </span>= DateTime.Now.ToString(<span style="color: #800000;">"</span><span style="color: #800000;">yyyy-MM-dd</span><span style="color: #800000;">"</span><span style="color: #000000;">),
                        Color </span>= SKColor.Parse(<span style="color: #0000ff;">string</span>.Format(<span style="color: #800000;">"</span><span style="color: #800000;">#{0:X6}</span><span style="color: #800000;">"</span>, rnd.Next(<span style="color: #800080;">0x1000000</span><span style="color: #000000;">)))
                    };
                    entries.Append(entryToday);

                    contentToWrite </span>= existData + <span style="color: #800000;">"</span><span style="color: #800000;">\r\n</span><span style="color: #800000;">"</span> + DateTime.Now.ToString(<span style="color: #800000;">"</span><span style="color: #800000;">yyyy-MM-dd</span><span style="color: #800000;">"</span>) + <span style="color: #800000;">"</span><span style="color: #800000;">,</span><span style="color: #800000;">"</span> + score + <span style="color: #800000;">"</span><span style="color: #800000;">,</span><span style="color: #800000;">"</span> +<span style="color: #000000;"> rank;
                }
                </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
                    contentToWrite </span>=<span style="color: #000000;"> existData;

                </span><span style="color: #0000ff;">var</span> chart = <span style="color: #0000ff;">new</span><span style="color: #000000;"> LineChart {
                    Entries </span>=<span style="color: #000000;"> entries,
                    MinValue </span>= <span style="color: #800080;">100000</span><span style="color: #000000;">,
                    BackgroundColor </span>=<span style="color: #000000;"> SKColors.Transparent
                };
                </span><span style="color: #0000ff;">this</span>.microChart.Chart =<span style="color: #000000;"> chart;

                </span><span style="color: #008000;">//</span><span style="color: #008000;">Write</span>
                <span style="color: #0000ff;">await</span><span style="color: #000000;"> FileIO.WriteTextAsync(file, contentToWrite);
            }
            </span><span style="color: #0000ff;">catch</span><span style="color: #000000;">
            {

            }
        }</span></pre>
</div>
<p>&nbsp;</p>
<p>ä¹‹æ‰€ä»¥åŠ äº†try{ ... } catch{ ... }ï¼Œæ˜¯å› ä¸ºåœ¨è¾“å…¥ç”¨æˆ·åçš„æ—¶å€™ï¼Œå¯ä»¥æ ¹æ®æ–‡æœ¬å˜åŒ–ï¼Œå®æ—¶æ£€æµ‹æ˜¯ä¸æ˜¯æœ‰æ•ˆçš„ç”¨æˆ·ï¼Œå¹¶ç”Ÿæˆå›¾è¡¨ã€‚</p>
<p>&nbsp;</p>
<p><span style="font-size: 18pt;"><strong><span style="color: #ff00ff;">7. æ€»ç»“</span></strong></span></p>
<p>è·å–å¹¶æ˜¾ç¤ºæ•°æ®ï¼Œæœ¬èº«ä¸æ˜¯ä¸€ä»¶å¾ˆéš¾çš„äº‹æƒ…ï¼Œå…³é”®æ˜¯æ€ä¹ˆåˆ©ç”¨å¾—åˆ°çš„æ•°æ®ï¼Œå¹¶æŠŠå®ƒå¾ˆå‹å¥½å‘ˆç°å‡ºæ¥ã€‚</p>
<p>å½“ç„¶ï¼Œæˆ‘è¿™é‡Œä¹Ÿå°‘åšäº†ä¸€æ­¥ï¼Œå°±æ˜¯è®©åº”ç”¨è‡ªå¯åŠ¨ï¼Œå¼€æœºçš„æ—¶å€™è·å–ä¸€æ¬¡æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥é˜²æ­¢æŸå¤©å¿˜è®°æ‰“å¼€ï¼Œå¯¼è‡´æ•°æ®æ–­å±‚çš„é—®é¢˜äº†ã€‚</p>
<p>å…³äºuwpå¦‚ä½•éšå¼€æœºå¯åŠ¨ï¼Œæˆ‘è¿˜æ²¡ç ”ç©¶è¿‡ï¼Œä»¥åæœ‰æ—¶é—´çš„å†™ä¸€äº›åˆ†äº«å¿ƒå¾—ã€‚</p>
<p>&nbsp;</p>
<p>OKï¼ŒMerry Christmasï¼Lonely Christmasï¼</p>
<p>â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸</p>
<p>â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„</p>
<p>ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„</p>
<p>ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…</p>
<p>ğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸ</p>
<p>&nbsp;ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦</p>
<div id="gtx-trans" style="position: absolute; left: 231px; top: 7529px;">&nbsp;</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>