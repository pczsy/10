<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='ç”µè„‘,ç”µè„‘è®²è§£,ç”µè„‘æŠ€æœ¯,ç¼–ç¨‹,ç”µè„‘æ•…éšœç»´ä¿®MVCæ¨¡å¼ä¸Servletæ‰§è¡Œæµç¨‹' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>é¦–é¡µ</a></li>
</div><div onclick='hidden1()' >åˆ†äº«</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>MVCæ¨¡å¼ä¸Servletæ‰§è¡Œæµç¨‹</center></div><div class='banquan'>åŸæ–‡å‡ºå¤„:æœ¬æ–‡ç”±åšå®¢å›­åšä¸»AirSkysæä¾›ã€‚<br/>
åŸæ–‡è¿æ¥:https://www.cnblogs.com/AirSky/p/12077387.html</div><br>
    <h2 id="servletç”Ÿå‘½å‘¨æœŸ">Servletç”Ÿå‘½å‘¨æœŸ</h2>
<h4 id="äº”ä¸ªéƒ¨åˆ†ä»åŠ è½½åˆ°å¸è½½å¦‚åŒäººç±»çš„å‡ºç”Ÿåˆ°æ­»äº¡">äº”ä¸ªéƒ¨åˆ†ï¼Œä»åŠ è½½åˆ°å¸è½½ï¼Œå¦‚åŒäººç±»çš„å‡ºç”Ÿåˆ°æ­»äº¡</h4>
<ol>
<li>åŠ è½½ï¼šServletå®¹å™¨è‡ªåŠ¨å¤„ç†</li>
<li>åˆå§‹åŒ–ï¼šinitæ–¹æ³• è¯¥æ–¹æ³•ä¼šåœ¨Servletè¢«åŠ è½½å¹¶å®ä¾‹åŒ–åæ‰§è¡Œ</li>
<li><strong>æœåŠ¡</strong>ï¼šserviceæŠ½è±¡æ–¹æ³•ï¼šå…·ä½“å®ç°æ˜¯doGet(),doPost()æ–¹æ³•</li>
<li>é”€æ¯ï¼šdestroy()ï¼ŒServletè¢«ç³»ç»Ÿå›æ”¶æ—¶æ‰§è¡Œ</li>
<li>å¸è½½ï¼šServletå®¹å™¨è‡ªåŠ¨å¤„ç†</li>
</ol>
<p><strong>init():</strong></p>
<ul>
<li>é»˜è®¤ç¬¬ä¸€æ¬¡è®¿é—®Servletæ—¶ä¼šè¢«æ‰§è¡Œï¼ˆåªæ‰§è¡Œè¿™ä¸€æ¬¡ï¼Œå¯ä»¥ä¿®æ”¹ä¸ºTomcatå¯åŠ¨æ—¶è‡ªåŠ¨æ‰§è¡Œ:</li>
<li>2.5ï¼šweb.xmlä¸­<code>&lt;servlet&gt;</code>å­—æ®µæ·»åŠ <code>&lt;load-on-startup&gt;1(ä»£è¡¨ç¬¬1ä¸ªServlet)</code>..</li>
<li>3.0ï¼š@WebServlet(value = &quot;/Servlet3&quot;,<strong>loadOnStartup = 1</strong>)</li>
</ul>
<p>service():-&gt;doGet() doPost:è°ƒç”¨å‡ æ¬¡ï¼Œåˆ™æ‰§è¡Œå‡ æ¬¡<br />
destroy():å…³é—­tomcatæœåŠ¡æ—¶</p>
<h2 id="servlet-api">Servlet API</h2>
<p>ç”±ä¸¤ä¸ªå¤§ç±»å››ä¸ªè½¯ä»¶åŒ…ç»„æˆï¼šï¼š<br />
<img src="./images/MVCæ¨¡å¼ä¸Servletæ‰§è¡Œæµç¨‹0.png" /><br />
å³Servlet APIå¯ä»¥é€‚ç”¨äºä»»ä½•é€šä¿¡åè®®ã€‚ä½†ç»å¤§å¤šæ•°æƒ…å†µä¸‹Servletåªç”¨æ¥æ‰©å±•åŸºäºHTTPåè®®çš„WebæœåŠ¡å™¨ã€‚<br />
æˆ‘ä»¬å­¦ä¹ çš„Servletï¼Œæ˜¯ä½äº<code>javax.servlet.http</code>åŒ…ä¸­çš„ç±»å’Œæ¥å£ï¼Œæ˜¯åŸºç¡€HTTPåè®®ã€‚</p>
<h4 id="servletç»§æ‰¿å…³ç³»">Servletç»§æ‰¿å…³ç³»</h4>
<p>ServletConfig:æ¥å£<br />
ServletContext getServletContext():è·å–Servletä¸Šä¸‹æ–‡å¯¹è±¡ application<br />
String getInitParameter(String name):åœ¨å½“å‰ServletèŒƒå›´å†…ï¼Œè·å–åä¸ºnameçš„å‚æ•°å€¼(åˆå§‹åŒ–å‚æ•°)<br />
a.ServletContextä¸­çš„å¸¸è§æ–¹æ³•(application):<br />
getContextPath():ç›¸å¯¹è·¯å¾„<br />
getRealPath():ç»å¯¹è·¯å¾„<br />
setAttribute()ã€getAttribute()<br />
----&gt;<br />
String getInitParameter(String name);åœ¨å½“å‰Webå®¹å™¨èŒƒå›´å†…ï¼Œè·å–åä¸ºnameçš„å‚æ•°å€¼(åˆå§‹åŒ–å‚æ•°)<br />
<code>åˆå§‹åŒ–å…¨å±€å‚æ•°</code></p>
<pre><code><code>    &lt;context-param&gt;
        &lt;param-name&gt;globalParam&lt;/param-name&gt;
        &lt;param-value&gt;global value...&lt;/param-value&gt;
    &lt;/context-param&gt;</code></pre>
<p><code>åˆå§‹åŒ–Servletå‚æ•°</code></p>
<ul>
<li>Servlet2.5</li>
</ul>
<pre><code><code>    &lt;servlet&gt;
        &lt;servlet-name&gt;my&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.hacker.servlet.MyServlet&lt;/servlet-class&gt;
        &lt;load-on-startup&gt;2&lt;/load-on-startup&gt;
    &lt;!--é…ç½®å½“å‰Servletåˆå§‹åŒ–å‚æ•° --&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;servletparamname&lt;/param-name&gt;
            &lt;param-value&gt;servletparamvalue...&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/servlet&gt;</code></pre>
<ul>
<li>Servlet3.0</li>
</ul>
<pre class="java"><code>@WebServlet(value = &quot;/Servlet3&quot;,loadOnStartup = 1,initParams = {@WebInitParam(name=&quot;servletparamname30&quot;,value = &quot;servletparamvalue30&quot;)})</code></pre>
<p><strong>æ³¨æ„ï¼š</strong>æ­¤æ³¨è§£åªéš¶å±äºæŸä¸€ä¸ªå…·ä½“çš„Servletï¼Œå› æ­¤æ— æ³•ä¸ºæ•´ä¸ªWebå®¹å™¨è®¾ç½®åˆå§‹åŒ–å‚æ•°(å¦‚æœè¦é€šè¿‡3.0æ–¹å¼è®¾ç½®ï¼Œä»éœ€åœ¨web.xmlä¸­è®¾ç½®)<br />
<code>è·å–å…¨å±€å‚æ•°</code><br />
<strong>ServletContextå¯¹è±¡è¡¨ç¤ºServletåº”ç”¨ç¨‹åºã€‚æ¯ä¸ªWebåº”ç”¨ç¨‹åºéƒ½åªæœ‰ä¸€ä¸ªServletContextå¯¹è±¡ã€‚åœ¨å°†ä¸€ä¸ªåº”ç”¨ç¨‹åºåŒæ—¶éƒ¨ç½²åˆ°å¤šä¸ªå®¹å™¨çš„åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œæ¯å°Javaè™šæ‹Ÿæœºä¸Šçš„Webåº”ç”¨éƒ½ä¼šæœ‰ä¸€ä¸ªServletContextå¯¹è±¡ã€‚<br />
é€šè¿‡åœ¨ServletConfigä¸­è°ƒç”¨getServletContextæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥è·å¾—ServletContextå¯¹è±¡ã€‚</strong></p>
<pre class="java"><code>    @Override
    public void init() throws ServletException {
        System.out.println(&quot;init...&quot;);
        //è·å–æ•´ä¸ªWebå®¹å™¨çš„åˆå§‹åŒ–å‚æ•°
        String str=super.getServletContext().getInitParameter(&quot;globalParam&quot;);
        System.out.println(&quot;å½“å‰Webå®¹å™¨çš„åˆå§‹åŒ–çš„å‚æ•°ä¸º&quot;+str);
    }</code></pre>
<p><code>è·å–å½“å‰Servletå‚æ•°</code><br />
<strong>å½“Servletå®¹å™¨åˆå§‹åŒ–Servletæ—¶ï¼ŒServletå®¹å™¨ä¼šç»™Servletçš„init( )æ–¹å¼ä¼ å…¥ä¸€ä¸ªServletConfigå¯¹è±¡</strong><br />
<strong>å…¶ä¸­å‡ ä¸ªæ–¹æ³•å¦‚ä¸‹ï¼š</strong><br />
<img src="./images/MVCæ¨¡å¼ä¸Servletæ‰§è¡Œæµç¨‹1.png" /></p>
<pre class="java"><code>    @Override
    public void init() throws ServletException {
        System.out.println(&quot;init...&quot;);
        //è·å–å½“å‰Servletçš„åˆå§‹åŒ–å‚æ•°
        String str=super.getInitParameter(&quot;servletparamname&quot;);
        System.out.println(&quot;å½“å‰Servletçš„åˆå§‹åŒ–å‚æ•°ä¸º&quot;+str);
    }</code></pre>
<h4 id="è¯·æ±‚ä¸å“åº”">è¯·æ±‚ä¸å“åº”</h4>
<p>å½“æˆ‘ä»¬åœ¨åœ¨è¯·æ±‚Servletå®¹å™¨å…·ä½“çš„æ‰§è¡Œæµç¨‹çš„ç»†èŠ‚æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸€èµ·æ¥çœ‹ä¸€çœ‹<br />
é¦–å…ˆæˆ‘ä»¬çŸ¥é“è¯·æ±‚çš„è¿‡ç¨‹æœ€ç»ˆä¼ ç»™äº†åä¸ºserviceçš„æ–¹æ³•ï¼Œé‚£serviceæ–¹å¼åˆ°åº•æ˜¯æ€ä¹ˆæ‰§è¡Œçš„ï¼Œæˆ‘ä»¬å…ˆæ¥ç®€å•çš„äº†è§£ä¸‹<br />
é¦–å…ˆæŸ¥çœ‹å…¥å£ç±»ç»§æ‰¿çš„HTTPServletç±»<br />
<img src="./images/MVCæ¨¡å¼ä¸Servletæ‰§è¡Œæµç¨‹2.png" /><br />
<img src="./images/MVCæ¨¡å¼ä¸Servletæ‰§è¡Œæµç¨‹3.png" /><br />
ç‚¹è¿›å»å‘ç°ç»§æ‰¿è‡³GenericServletï¼Œç»§ç»­è·Ÿè¿›<br />
<img src="./images/MVCæ¨¡å¼ä¸Servletæ‰§è¡Œæµç¨‹4.png" /><br />
GenericServletå®ç°äº†ä¸€ä¸ªServletæ¥å£<br />
<img src="./images/MVCæ¨¡å¼ä¸Servletæ‰§è¡Œæµç¨‹5.png" /><br />
æ¥å£ä¸­å®šä¹‰äº†serviceæ–¹æ³•ï¼Œå¹¶ä¸”æœ‰ä¸¤ä¸ªå‚æ•°ServletRequestå’ŒServletResponseä»£è¡¨è¯·æ±‚å’Œå“åº”ï¼Œé‚£ä¹ˆæˆ‘ä»¬è‡ªå®šä¹‰çš„Servletè‚¯å®šä¸æ˜¯å®ç°çš„è¿™ä¸ªserviceæ–¹æ³•ï¼Œå› ä¸ºæˆ‘ä»¬é‡å†™çš„serviceæ–¹æ³•å½¢å‚ä¸ºHttpServletRequestå’ŒHttpServletResponse<br />
<img src="./images/MVCæ¨¡å¼ä¸Servletæ‰§è¡Œæµç¨‹6.png" /><br />
ç°åœ¨å°±æ¥æ‰¾æ‰¾åˆ°åº•æ˜¯é‡å†™çš„é‚£ä¸ªserviceæ–¹æ³•ï¼Œé¦–å…ˆæ¥çœ‹GenericServletç±»<br />
<img src="./images/MVCæ¨¡å¼ä¸Servletæ‰§è¡Œæµç¨‹7.png" /><br />
åœ¨GenericServletç±»ä¸­å‘ç°å®ç°äº†serviceçš„æŠ½è±¡æ–¹æ³•ï¼Œä¼ å…¥å‚æ•°ä¸ºServletRequestï¼Œæ˜æ˜¾ä¹Ÿä¸æ˜¯ï¼Œç»§ç»­è·Ÿè¿›HTTPServletç±»<br />
<img src="./images/MVCæ¨¡å¼ä¸Servletæ‰§è¡Œæµç¨‹8.png" /></p>
<p>åœ¨HTTPServletç±»ä¸­å‘ç°ä¸¤ä¸ªserviceæ–¹æ³•ï¼Œå¾ˆæ˜æ˜¾ç¬¬äºŒä¸ªserviceæ–¹æ³•å‚æ•°ä¹Ÿæ˜¯ServletRequestï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªserviceæ–¹æ³•ä¸ºå®ç°æ–¹æ³•ï¼Œä¸‹é¢æ¥çœ‹çœ‹å…·ä½“å®ç°</p>
<pre class="java"><code>    public void service(ServletRequest req, ServletResponse res) throws ServletException, IOException {
        HttpServletRequest request;
        HttpServletResponse response;
        try {
            request = (HttpServletRequest)req;
            response = (HttpServletResponse)res;
        } catch (ClassCastException var6) {
            throw new ServletException(lStrings.getString(&quot;http.non_http&quot;));
        }

        this.service(request, response);
    }</code></pre>
<p>å¯ä»¥çœ‹åˆ°è¯¥å®ç°æ–¹æ³•å°†Servletå¼ºè½¬ä¸ºäº†HttpServletï¼Œ<br />
<img src="./images/MVCæ¨¡å¼ä¸Servletæ‰§è¡Œæµç¨‹9.png" /></p>
<p>HttpServletç»§æ‰¿è‡ªServletï¼Œå°†çˆ¶ç±»å˜ä¸ºäº†å­ç±»ï¼ŒæŠŠé€šç”¨çš„å“åº”ï¼Œè½¬æ¢ä¸ºäº†ç‰¹éœ€çš„HTTPå“åº”ï¼Œ<code>ä¹‹æ‰€ä»¥èƒ½å¤Ÿè¿™æ ·å¼ºåˆ¶çš„è½¬æ¢ï¼Œæ˜¯å› ä¸ºåœ¨è°ƒç”¨Servletçš„Serviceæ–¹æ³•æ—¶ï¼ŒServletå®¹å™¨æ€»ä¼šä¼ å…¥ä¸€ä¸ªHttpServletRequestå¯¹è±¡å’ŒHttpServletResponseå¯¹è±¡ï¼Œé¢„å¤‡ä½¿ç”¨HTTPã€‚</code>å› æ­¤ï¼Œè½¬æ¢ç±»å‹å½“ç„¶ä¸ä¼šå‡ºé”™äº†ã€‚<br />
<strong>PSï¼š</strong>Javaä¸­çˆ¶ç±»æƒ³è¦è½¬æ¢ä¸ºå­ç±»ï¼Œçˆ¶ç±»çš„å®ä¾‹å¿…é¡»æŒ‡å‘å­ç±»çš„åº”ç”¨ï¼Œå½¢å¦‚</p>
<pre class="java"><code>    public static void main(String[] args) {
        //Carä¸ºçˆ¶ç±»ï¼ŒBigCarä¸ºå­ç±»
        Car car=new BigCar();//è¿™é‡Œcarçˆ¶ç±»å¯¹è±¡çš„å¼•ç”¨ä¸ºBigCarå­ç±» çˆ¶ç±»æ˜¯å­ç±»æ„é€ å‡ºæ¥çš„å®ä¾‹
        BigCar bc=(BigCar)car;//æ‰€ä»¥è¿™é‡Œå¯ä»¥å°†çˆ¶ç±»å¯¹è±¡carå¼ºè½¬ä¸ºå­ç±»å¯¹è±¡BigCar
        bc.setName(&quot;ssss&quot;);//è¿™é‡Œå°±å¯ä»¥è°ƒç”¨å­ç±»çš„æ–¹æ³•
        test(new BigCar());
    }
    public static void test(Car car) {
        BigCar bigCar = (BigCar) car;
        if (bigCar instanceof Car) {
            System.out.println(&quot;1&quot;);
        }
    }</code></pre>
<p>æœ€åè°ƒç”¨äº†å½“å‰ç±»ä¸­çš„é‡è½½æ–¹æ³•service</p>
<pre class="java"><code>protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        String method = req.getMethod();
        long lastModified;
        if (method.equals(&quot;GET&quot;)) {
            lastModified = this.getLastModified(req);
            if (lastModified == -1L) {
                this.doGet(req, resp);
            } else {
                long ifModifiedSince;
                try {
                    ifModifiedSince = req.getDateHeader(&quot;If-Modified-Since&quot;);
                } catch (IllegalArgumentException var9) {
                    ifModifiedSince = -1L;
                }

                if (ifModifiedSince &lt; lastModified / 1000L * 1000L) {
                    this.maybeSetLastModified(resp, lastModified);
                    this.doGet(req, resp);
                } else {
                    resp.setStatus(304);
                }
            }
        } else if (method.equals(&quot;HEAD&quot;)) {
            lastModified = this.getLastModified(req);
            this.maybeSetLastModified(resp, lastModified);
            this.doHead(req, resp);
        } else if (method.equals(&quot;POST&quot;)) {
            this.doPost(req, resp);
        } else if (method.equals(&quot;PUT&quot;)) {
            this.doPut(req, resp);
        } else if (method.equals(&quot;DELETE&quot;)) {
            this.doDelete(req, resp);
        } else if (method.equals(&quot;OPTIONS&quot;)) {
            this.doOptions(req, resp);
        } else if (method.equals(&quot;TRACE&quot;)) {
            this.doTrace(req, resp);
        } else {
            String errMsg = lStrings.getString(&quot;http.method_not_implemented&quot;);
            Object[] errArgs = new Object[]{method};
            errMsg = MessageFormat.format(errMsg, errArgs);
            resp.sendError(501, errMsg);
        }

    }</code></pre>
<p>åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œå°†è¯·æ±‚ç±»å‹è¿›è¡Œäº†åˆ’åˆ†ï¼Œåˆ¤å®šè¯·æ±‚ç±»å‹è°ƒç”¨ä¸åŒçš„æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡å†™çš„serviceæ–¹æ³•å®é™…ä¸Šæ˜¯æ¥æ”¶äº†æ‰€æœ‰ç±»å‹çš„è¯·æ±‚ï¼Œé‚£ä¹ˆå¯ä»¥é’ˆå¯¹ä¸åŒè¯·æ±‚é‡å†™ç›¸åº”çš„æ–¹æ³•ï¼Œæ¥ç®€åŒ–æˆ‘ä»¬çš„æ“ä½œã€‚<br />
ä¸€èˆ¬è£…é¥°è€…å°±æ˜¯åœ¨ä¸»ä½“ç»„ä»¶æ‰©å±•åˆ°å…·ä½“çš„å®ç°ç±»æ—¶ï¼Œä¼šå¼•å…¥ä¸€ä¸ªä¸­é—´å±‚ï¼ŒæŠŠè£…é¥°è€…çš„å…¬å¸ƒéƒ¨åˆ†å¼•å…¥è¿›æ¥ï¼Œåœ¨å¼•å…¥å…·ä½“çš„å®ç°æ—¶ï¼Œåªéœ€è¦å®ç°è‡ªå·±ç‰¹å®šçš„éƒ¨åˆ†å°±è¡Œäº†ã€‚å…¬å…±çš„å°±æ”¾åœ¨ä¸Šé¢ï¼Œä¸­é—´å±‚ä¸­ã€‚è€ŒGenericServletç±»å°±å¯ä»¥çœ‹ä½œæ˜¯é‚£ä¸ªä¸­é—´å±‚ï¼Œå®ƒåœ¨ç©ºå®ç°Servletç±»çš„æ–¹æ³•åï¼Œå­ç±»åœ¨ç»§æ‰¿çš„æ—¶å€™å°±å¯ä»¥åªé‡å†™éœ€è¦çš„æ–¹æ³•ï¼Œä¸å¿…é‡å†™Servletç±»çš„æ‰€æœ‰æ–¹æ³•äº†ã€‚</p>
<h2 id="mvcæ¡ˆä¾‹">MVCæ¡ˆä¾‹</h2>
<p>å­¦äº†è¿™ä¹ˆå¤šï¼Œç°åœ¨å°±æ¥åŠ¨æ‰‹å®ç°ä¸€ä¸ªMVCç®€å•ç™»å½•æ¡ˆä¾‹ğŸ˜€ï¼Œå†æ¥å¤ç°ä¸€éä»€ä¹ˆæ˜¯MVCæ¨¡å¼:</p>
<ul>
<li><code>M</code>ï¼šModel ï¼Œæ¨¡å‹ ï¼šä¸€ä¸ªåŠŸèƒ½ã€‚ç”¨JavaBeanå®ç°ã€‚</li>
<li><code>V</code>:Viewï¼Œè§†å›¾ï¼š ç”¨äºå±•ç¤ºã€ä»¥åŠä¸ç”¨æˆ·äº¤äº’ã€‚ä½¿ç”¨html js css jsp jqueryç­‰å‰ç«¯æŠ€æœ¯å®ç°</li>
<li><code>C</code>:Controllerï¼Œæ§åˆ¶å™¨ ï¼šæ¥å—è¯·æ±‚ï¼Œå°†è¯·æ±‚è·³è½¬åˆ°æ¨¡å‹è¿›è¡Œå¤„ç†ï¼›æ¨¡å‹å¤„ç†å®Œæ¯•åï¼Œå†å°†å¤„ç†çš„ç»“æœ<br />
è¿”å›ç»™ è¯·æ±‚å¤„ ã€‚ å¯ä»¥ç”¨jspå®ç°ï¼Œ ä½†æ˜¯ä¸€èˆ¬å»ºè®®ä½¿ç”¨ Servletå®ç°æ§åˆ¶å™¨ã€‚<br />
Jsp-&gt;Java(Servlet)-&gt;JSP<br />
æˆ‘ä»¬é¦–å…ˆçœ‹åˆ°æ˜¯Viewé‚£ä¹ˆå°±å…ˆæ¥å®ç°ä¸€ä¸ªView:<code>login.jsp</code></li>
</ul>
<pre class="jsp"><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Login&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;form method=&quot;post&quot; action=&quot;/login&quot;&gt;
    ç”¨æˆ·å:&lt;input type=&quot;text&quot; name=&quot;un&quot;&gt;&lt;br/&gt;
    å¯†ç :&lt;input type=&quot;password&quot; name=&quot;pwd&quot;&gt;&lt;br/&gt;
    &lt;input type=&quot;submit&quot; value=&quot;ç™»å½•&quot;&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>ä¸€ä¸ªç®€å•çš„ç™»å½•ç•Œé¢å°±å®Œæˆäº†ï¼Œç™»å½•åControllerä¼šé¦–å…ˆæ¥æ”¶åˆ°æˆ‘ä»¬çš„è¯·æ±‚ï¼Œä¸ºäº†æ–¹ä¾¿ç”¨æˆ·åå’Œå¯†ç çš„å­˜å–ï¼Œå…ˆæ–°å»ºä¸€ä¸ªJavaBean</p>
<pre class="java"><code>package com.hacker.servlet.login;

public class Login {
    String username;
    String password;

    public Login(String username, String password) {
        this.username = username;
        this.password = password;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }
}</code></pre>
<p>æ–°å»ºä¸€ä¸ªç™»å½•æ§åˆ¶å™¨<br />
<img src="./images/MVCæ¨¡å¼ä¸Servletæ‰§è¡Œæµç¨‹10.png" /></p>
<pre class="java"><code>package com.hacker.servlet.login;
import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONArray;
import com.alibaba.fastjson.JSONObject;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;
/**
 * æ§åˆ¶å™¨å±‚ï¼šæ¥å—viewè¯·æ±‚ï¼Œå¹¶åˆ†å‘ç»™Modelå¤„ç†
 * */
public class LoginController extends HttpServlet {
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        String un=req.getParameter(&quot;un&quot;);//æ¥æ”¶POSTå‚æ•°un
        String pwd=req.getParameter(&quot;pwd&quot;);//æ¥æ”¶POSTå‚æ•°pwd
        Login login=new Login(un,pwd);//å°è£…åˆ°åä¸ºLoginçš„JavaBeanä¸­
        resp.setCharacterEncoding(&quot;UTF-8&quot;);//è®¾ç½®è¿”å›ç¼–ç 
        resp.setContentType(&quot;application/json; charset=utf-8&quot;);//è®¾ç½®è¿”å›æ ¼å¼å’Œæµè§ˆå™¨æ¸²æŸ“ç¼–ç 
// resp.setContentType(&quot;text/html;; charset=utf-8&quot;);
        PrintWriter out=resp.getWriter();//è·å–è¾“å‡ºå¯¹è±¡
        LoginDao loginDao=new LoginDao();//è·å–ä¸€ä¸ªç™»å½•æ¨¡å‹å¯¹è±¡
        JSONObject jsonObject=new JSONObject();
        try {
            if (loginDao.login(login)){//ç›´æ¥ä¼ å…¥loginå¯¹è±¡ï¼Œç”¨æˆ·åå¯†ç é€šè¿‡è¯¥å¯¹è±¡çš„getteræ–¹æ³•è·å–
                jsonObject.put(&quot;ç™»å½•æˆåŠŸ&quot;,&quot;1&quot;);
// out.write(&quot;{\&quot;flag\&quot;:\&quot;true\&quot;}&quot;);
            }else {
// out.write(&quot;{\&quot;flag\&quot;:\&quot;flase\&quot;}&quot;);
                jsonObject.put(&quot;ç™»å½•å¤±è´¥&quot;,&quot;0&quot;);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }finally {
// out.write(jsonObject);
            out.print(jsonObject);//è¿”å›Jsonæ ¼å¼çš„ç™»é™†ç»“æœ
            out.flush();
            out.close();
        }
    }
}</code></pre>
<p>åœ¨web.xmlä¸­æŒ‡å®šè¯¥Servletçš„è·¯å¾„</p>
<pre><code><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;
         version=&quot;4.0&quot;&gt;
    &lt;welcome-file-list&gt;
        &lt;welcome-file&gt;login.jsp&lt;/welcome-file&gt;
    &lt;/welcome-file-list&gt;
&lt;!-- é…ç½®Servlet --&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;login&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.hacker.servlet.login.LoginController&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;!--é…ç½®è®¿é—®æ–¹å¼ --&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;login&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/login&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
&lt;/web-app&gt;</code></pre>
<p>ç¼–å†™LoginDaoæ¨¡å‹ç±»ï¼Œé¦–å…ˆå¯¼å…¥Mysql JaråŒ…<br />
<img src="./images/MVCæ¨¡å¼ä¸Servletæ‰§è¡Œæµç¨‹11.png" /></p>
<pre><code><code>package com.hacker.servlet.login;
import java.sql.*;
/**
 * æ¨¡å‹å±‚ ç”¨äºå¤„ç†ç™»å½•
 */
public class LoginDao {
    static final String JDBC_DRIVER = &quot;com.mysql.jdbc.Driver&quot;;
    static final String DB_URL = &quot;jdbc:mysql://localhost:3306/test&quot;;
    static final String USER = &quot;root&quot;;
    static final String PASS = &quot;root&quot;;
    Connection conn; //è¿æ¥å¯¹è±¡
    PreparedStatement pstmt;//é¢„ç¼–è¯‘å¯¹è±¡
    ResultSet rs;//ç»“æœé›†å¯¹è±¡
    Boolean flag=false;//ç™»å½•ç»“æœ é»˜è®¤ä¸ºfalse

    public Boolean login(Login login) { //ç™»å½•æ“ä½œ
        try {
            Class.forName(JDBC_DRIVER);//åå°„è°ƒç”¨å¯¼å…¥é©±åŠ¨ï¼ŒåŠ è½½å…·ä½“é©±åŠ¨ç±»
            conn = DriverManager.getConnection(DB_URL, USER, PASS);//ä¸æ•°æ®åº“å»ºç«‹è¿æ¥
            String sql = &quot;SELECT * FROM user WHERE username=? AND password=?&quot;;//é¢„å¤„ç†æ·»åŠ æ•°æ®
            pstmt = conn.prepareStatement(sql);//åˆ›å»ºé¢„å¤„ç†æ‰§è¡Œå¯¹è±¡(é¢„ç¼–è¯‘SQL)
            pstmt.setString(1, login.getUsername());//è®¾ç½®å˜é‡å‚æ•°
            pstmt.setString(2, login.getPassword());//è®¾ç½®å˜é‡å‚æ•°
            rs = pstmt.executeQuery();//è¿”å›æŸ¥è¯¢åˆ°çš„ç»“æœé›†
            if (rs.next()) {//åˆ¤å®šç»“æœé›†ä¸­æ˜¯å¦èƒ½å¤Ÿè¯»åˆ°æ•°æ®
                flag=true; //ç™»å½•æˆåŠŸ
            }
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (SQLException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            try {
                //é˜²æ­¢ç©ºæŒ‡é’ˆå¼‚å¸¸
                //å…³é—­é¡ºåºä¸æ‰“å¼€é¡ºåºç›¸å
                if (rs != null) rs.close();
                if (pstmt != null) pstmt.close();
                if (pstmt != null) conn.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
        return flag;//è¿”å›ç»“æœ
    }
}</code></pre>
<p>ä¸‹é¢æ¥è¯•ä¸€è¯•å§ğŸ˜<br />
<img src="./images/MVCæ¨¡å¼ä¸Servletæ‰§è¡Œæµç¨‹12.png" /><br />
<img src="./images/MVCæ¨¡å¼ä¸Servletæ‰§è¡Œæµç¨‹13.png" /><br />
æˆåŠŸå¯åŠ¨Tomcat<br />
<img src="./images/MVCæ¨¡å¼ä¸Servletæ‰§è¡Œæµç¨‹14.png" /><br />
ç®€æ´çš„é¡µé¢<br />
<img src="./images/MVCæ¨¡å¼ä¸Servletæ‰§è¡Œæµç¨‹15.png" /><br />
ç™»é™†æˆåŠŸï¼Œä½ èƒ½çŒœåˆ°å¯†ç å—ï¼ŸğŸ˜œ</p>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>