<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修python-day16(正式学习)' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>python-day16(正式学习)</center></div><div class='banquan'>原文出处:本文由博客园博主wind叶提供。<br/>
原文连接:https://www.cnblogs.com/leaf-wind/p/11358449.html</div><br>
    <div class="toc">
    <p class="toc-title">目录</p>
    <div class="toc-list">
        <ul>
        <li><a href="#模块">模块</a><ul>
        <li><a href="#什么是模块">什么是模块？</a></li>
        <li><a href="#模块的四种形式">模块的四种形式</a></li>
        <li><a href="#为什么要用模块">为什么要用模块</a></li>
        <li><a href="#如何用模块">如何用模块</a></li>
        <li><a href="#import">import</a></li>
        <li><a href="#from...import...">from...import...</a></li>
        <li><a href="#异同">异同</a></li>
        </ul></li>
        <li><a href="#循环导入问题">循环导入问题</a><ul>
        <li><a href="#解决方案">解决方案</a><ul>
        <li><a href="#section">1.</a></li>
        <li><a href="#section-1">2.</a></li>
        </ul></li>
        </ul></li>
        <li><a href="#模块搜索路径">模块搜索路径</a></li>
        <li><a href="#random模块">random模块</a></li>
        </ul>
    </div>
</div>
<h1 id="模块">模块</h1>
<h2 id="什么是模块">什么是模块？</h2>
<p>模块是一系列功能的集合体，而函数是某一个功能的集合体，因此模块可以看成是一堆函数的集合体。一个py文件内部就可以放一堆函数，因此一个py文件就可以看成一个模块。如果这个py文件的文件名为<code>module.py</code>，模块名则是<code>module</code>。</p>
<h2 id="模块的四种形式">模块的四种形式</h2>
<p>在Python中，总共有以下四种形式的模块：</p>
<ol>
<li>自定义模块：如果你自己写一个py文件，在文件内写入一堆函数，则它被称为自定义模块，即使用python编写的.py文件</li>
<li>第三方模块：已被编译为共享库或DLL的C或C++扩展</li>
<li>内置模块：使用C编写并链接到python解释器的内置模块</li>
<li>包：把一系列模块组织到一起的文件夹（注：文件夹下有一个__init__.py文件，该文件夹称之为包）</li>
</ol>
<h2 id="为什么要用模块">为什么要用模块</h2>
<ol>
<li>用第三方或者内置的模块是一种拿来主义，可以极大地提升开发效率。</li>
<li>自定义模块，将我们自己程序中用到的公共功能，写入一个python文件，然后程序的各部分组件可以通过导入的方式来引用自定义模块的功能。</li>
</ol>
<h2 id="如何用模块">如何用模块</h2>
<p>一般我们使用import和from...import...导入模块。</p>
<h2 id="import">import</h2>
<pre><code><code># run.py
import spam  # from the spam.py
import spam</code></pre>
<p>import首次导入模块发生了3件事：</p>
<ol>
<li>以模块为准创造一个模块的名称空间</li>
<li>执行模块对应的文件，将执行过程中产生的名字都丢到模块的名称空间</li>
<li>在当前执行文件中拿到一个模块名</li>
</ol>
<p>模块的重复导入会直接饮用之前创造好的结果，不会重复执行模块的文件，即重复导入会发生：spam=spam=模块名称空间的内存地址</p>
<pre><code><code># run.py
import spam as sm


money = 111111

sm.money
sm.read1()  # &#39;spam模块：1000&#39;
sm.read2
sm.change()

print(money)  # 1000</code></pre>
<p>导入多个模块</p>
<pre><code><code>import spam, time, os

# 推荐使用下述方式
import spam
import time
import os</code></pre>
<h2 id="from...import...">from...import...</h2>
<pre><code><code># run.py

from spam import money

money = 10

print(money)  # 10</code></pre>
<p>from...import...首次导入模块发生了3件事：</p>
<ol>
<li>以模块为准创造一个模块的名称空间</li>
<li>执行模块对应的文件，将执行过程中产生的名字都丢到模块的名称空间</li>
<li>在当前执行文件的名称空间中拿到一个名字，该名字直接指向模块中的某一个名字，意味着可以不用加任何前缀而直接使用</li>
</ol>
<ul>
<li>优点：不用加前缀，代码更加精简</li>
<li>缺点：容易与当前执行文件中名称空间中的名字冲突</li>
</ul>
<p>导入文件内所有的功能：</p>
<pre><code><code># spam.py

__all__ = [&#39;money&#39;, &#39;read1&#39;]  # 只允许导入&#39;money&#39;和&#39;read1&#39;
# run.py
from spam import *  # 导入spam.py内的所有功能，但会受限制于__all__</code></pre>
<h2 id="异同">异同</h2>
<p>相同点：</p>
<ol>
<li>两者都会执行模块对应的文件，两者都会产生模块的名称空间</li>
<li>两者调用功能时，需要跑到定义时寻找作用域关系，与调用位置无关</li>
</ol>
<p>不同点</p>
<ol>
<li>import需要加前缀；from...import...不需要加前缀</li>
</ol>
<h1 id="循环导入问题">循环导入问题</h1>
<pre><code><code># m1.py
print(&#39;from m1.py&#39;)
from m2 import x

y = &#39;m1&#39;</code></pre>
<ol>
<li>创建m2的名称空间</li>
<li>执行m2.py，将执行产生的名字丢到m2.py</li>
<li>在当前执行文件中拿到m2.x</li>
</ol>
<pre><code><code># m2.py
print(&#39;from m2.py&#39;)
from m1 import y

x = &#39;m2&#39;</code></pre>
<ol>
<li>创建m1的名称空间</li>
<li>执行m1.py，将执行产生的名字丢到m1.py</li>
<li>在当前执行文件中拿到m1.y</li>
</ol>
<pre><code><code># run.py
import m1</code></pre>
<ol>
<li>创建m1的名称空间</li>
<li>执行m1.py，将执行产生的名字丢到m1.py</li>
<li>在当前执行文件中拿到m1</li>
</ol>
<ul>
<li>如果运行run.py，则会报错<code>ImportError: cannot import name 'y'</code></li>
<li>如果运行m1.py，则会报错<code>ImportError: cannot import name 'x'</code></li>
<li>如果运行m2.py，则会报错<code>ImportError: cannot import name 'y'</code></li>
</ul>
<h2 id="解决方案">解决方案</h2>
<h3 id="section">1.</h3>
<pre><code><code># m1.py
print(&#39;from m1.py&#39;)


def func1():
    from m2 import x
    print(x)


y = &#39;m1&#39;
# m2.py
print(&#39;from m2.py&#39;)

def func1():
    from m1 import y
    print(y)


x = &#39;m2&#39;</code></pre>
<h3 id="section-1">2.</h3>
<pre><code><code># m1.py
print(&#39;from m1.py&#39;)


y = &#39;m1&#39;
from m2 import x
# m2.py
print(&#39;from m2.py&#39;)

x = &#39;m2&#39;
from m1 import y</code></pre>
<h1 id="模块搜索路径">模块搜索路径</h1>
<p>模块其实就是一个文件，如果要执行文件，首先就需要找到模块的路径（某个文件夹）。如果模块的文件路径和执行文件不在同一个文件目录下，我们就需要指定模块的路径。</p>
<p>模块的搜索路径指的就是在导入模块时需要检索的文件夹。</p>
<p>导入模块时查找模块的顺序是：</p>
<ol>
<li>先从内存中已经导入的模块中寻找</li>
<li>内置的模块</li>
<li>自定义模块</li>
<li>环境变量sys.path中找</li>
</ol>
<pre><code><code>import sys
print(f&quot;sys.path: {sys.path}&quot;)

&#39;&#39;&#39;
[&#39;/Users/mac/Desktop/video/python/day16&#39;, 
&#39;/Users/mac/Desktop/video/python&#39;, 
&#39;/Applications/anaconda3/lib/python36.zip&#39;, 
&#39;/Applications/anaconda3/lib/python3.6&#39;, 
&#39;/Applications/anaconda3/lib/python3.6/lib-dynload&#39;, 
&#39;/Applications/anaconda3/lib/python3.6/site-packages&#39;, 
&#39;/Applications/PyCharm.app/Contents/helpers/pycharm_matplotlib_backend&#39;]
&#39;&#39;&#39;</code></pre>
<p>强调：sys.path的第一个值是当前执行文件的所在的文件夹</p>
<h1 id="random模块">random模块</h1>
<pre><code><code>import random
# 大于0且小于1之间的小数
print(random.random())
0.42866657593385415
# 大于等于1且小于等于3之间的整数
print(random.randint(1, 3))
3
# 大于等于1且小于3之间的整数
print(random.randrange(1, 3))
2
# 大于1小于3的小数，如1.927109612082716
print(random.uniform(1, 3))
2.1789596280319605
# 列表内的任意一个元素，即1或者‘23’或者[4,5]
print(random.choice([1, &#39;23&#39;, [4, 5]]))
[4, 5]
# random.sample([], n)，列表元素任意n个元素的组合，示例n=2
print(random.sample([1, &#39;23&#39;, [4, 5]], 2))
[&#39;23&#39;, 1]
lis = [1, 3, 5, 7, 9]
# 打乱l的顺序,相当于&quot;洗牌&quot;
random.shuffle(lis)
print(lis)
[9, 1, 5, 7, 3]</code></pre>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>