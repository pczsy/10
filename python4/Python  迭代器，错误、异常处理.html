<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Python  迭代器，错误、异常处理' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Python  迭代器，错误、异常处理</center></div><div class='banquan'>原文出处:本文由博客园博主chenhongyong提供。<br/>
原文连接:https://www.cnblogs.com/chy18883701161/p/11296789.html</div><br>
    <p>&nbsp;</p>
<h2>迭代器</h2>
<p>迭代器可以用来遍历字符串、列表、元组、集合、字典。</p>
<div class="cnblogs_code">
<pre><code>myString=<span style="color: #800000;">"</span><span style="color: #800000;">hello</span><span style="color: #800000;">"</span><span style="color: #000000;">
myIter</span>=iter(myString)  <span style="color: #008000;">#</span><span style="color: #008000;">#iter()函数可以获取元素集的一个迭代器</span>
<span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span>  myIter:   <span style="color: #008000;">#</span><span style="color: #008000;">遍历每个字符</span>
    <span style="color: #0000ff;">print</span><span style="color: #000000;">(i)


myList</span>=[1,2,3,4<span style="color: #000000;">]
myIter</span>=<span style="color: #000000;">iter(myList)
</span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span>  myIter:  <span style="color: #008000;">#</span><span style="color: #008000;">遍历列表、元组、集合</span>
    <span style="color: #0000ff;">print</span><span style="color: #000000;">(i)


mySet</span>={<span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">张三</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">age</span><span style="color: #800000;">"</span>:18<span style="color: #000000;">}
myIter</span>=iter(mySet)  <span style="color: #008000;">#</span><span style="color: #008000;">字典比较特殊，获取到的是key的迭代器</span>
<span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> myIter:  <span style="color: #008000;">#</span><span style="color: #008000;">i表示一个key</span>
    <span style="color: #0000ff;">print</span>(i)   <span style="color: #008000;">#</span><span style="color: #008000;">输出key</span>
    <span style="color: #0000ff;">print</span>(mySet.get(i))  <span style="color: #008000;">#</span><span style="color: #008000;">输出对应的value</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>可以使用next()获取下一个元素：</p>
<div class="cnblogs_code">
<pre><code>myList=[1,2,3,4<span style="color: #000000;">]
myIter</span>=<span style="color: #000000;">iter(myList)
i</span>=next(myIter)  <span style="color: #008000;">#</span><span style="color: #008000;">获取迭代器中的下一个元素，参数是迭代器。最初指针指向第一个元素之前。</span>
<span style="color: #0000ff;">print</span>(i)  <span style="color: #008000;">#</span><span style="color: #008000;">1</span>
<span style="color: #0000ff;">print</span>(next(myIter))  <span style="color: #008000;">#</span><span style="color: #008000;">2</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>错误、异常处理</h2>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">try</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">print</span>(2/0)   <span style="color: #008000;">#</span><span style="color: #008000;">可能出现问题的语句块</span>
<span style="color: #0000ff;">except</span> Exception as  e:   <span style="color: #008000;">#</span><span style="color: #008000;">捕获异常，try和except必须配对使用，如果有try，就必须要有except来捕获处理。</span>
    <span style="color: #0000ff;">print</span>(e)   <span style="color: #008000;">#</span><span style="color: #008000;">处理异常,如果不想处理，可使用raise再次抛出此异常，交给上一级程序单元来处理。</span>
<span style="color: #0000ff;">else</span>:   <span style="color: #008000;">#</span><span style="color: #008000;">可选，如果try语句块没有出问题，那么try语句块执行完毕就会自动执行else语句块</span>
    <span style="color: #0000ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">no error and exception</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">finally</span>:  <span style="color: #008000;">#</span><span style="color: #008000;">可选，不管try语句出不出现问题，都会执行finally语句块</span>
    <span style="color: #0000ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">over</span><span style="color: #800000;">"</span>)</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>except语句</h3>
<p>ecxcept语句用来捕获、处理错误、异常。</p>
<div class="cnblogs_code">
<pre><code>a=input(<span style="color: #800000;">"</span><span style="color: #800000;">请输入被除数：</span><span style="color: #800000;">"</span><span style="color: #000000;">)
b</span>=input(<span style="color: #800000;">"</span><span style="color: #800000;">请输入除数：</span><span style="color: #800000;">"</span><span style="color: #000000;">)
a</span>=float(a)  <span style="color: #008000;">#</span><span style="color: #008000;">从控制台输入的都是String类型，需要强制转换</span>
b=<span style="color: #000000;">float(b)
</span><span style="color: #0000ff;">try</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">print</span>(a,<span style="color: #800000;">"</span><span style="color: #800000;">&divide;</span><span style="color: #800000;">"</span>,b,<span style="color: #800000;">"</span><span style="color: #800000;">=</span><span style="color: #800000;">"</span>,a/<span style="color: #000000;">b)
</span><span style="color: #0000ff;">except</span> ZeroDivisionError as e:  <span style="color: #008000;">#</span><span style="color: #008000;">捕获一个具体的异常。当然也可以直接捕获Exception，即捕获、处理所有的异常，但太笼统了，不方便对应处理异常。</span>
    <span style="color: #0000ff;">print</span>(e)  <span style="color: #008000;">#</span><span style="color: #008000;">输出异常信息</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;<span class="cnblogs_code">as e</span>&nbsp;&nbsp;as是关键字，e是e是捕获的异常实例（对象），可以自己随便取名。</p>
<p>如果异常处理中用不到捕获的异常对象，可以不要as部分：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">except</span><span style="color: #000000;"> ZeroDivisionError:
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">除数不能为0</span><span style="color: #800000;">"</span>)</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>可以有多个except语句，但try语句块出现问题时，只会执行一个except语句（靠前的匹配）。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">try</span><span style="color: #000000;">:
    </span><span style="color: #008000;">#</span><span style="color: #008000;">.....</span>
<span style="color: #0000ff;">except</span><span style="color: #000000;"> ZeroDivisionError:
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">除数不能为0</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">except</span><span style="color: #000000;"> FileExistsError:
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">文件不存在</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">except</span><span style="color: #000000;"> IndexError:
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">索引错误</span><span style="color: #800000;">"</span>)</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>可以在一个except中捕获、处理多种异常：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">try</span><span style="color: #000000;">:
    </span><span style="color: #008000;">#</span><span style="color: #008000;">....</span>
<span style="color: #0000ff;">except</span> (ZeroDivisionError,FileExistsError,IndexError):   <span style="color: #008000;">#</span><span style="color: #008000;">使用一个except捕获多种异常时，需要使用元组形式</span>
    <span style="color: #008000;">#</span><span style="color: #008000;">...</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>捕获所有种类的异常：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">except</span> Exception:  <span style="color: #008000;">#</span><span style="color: #008000;">捕获所有种类的异常</span>
    <span style="color: #008000;">#</span><span style="color: #008000;">...</span></pre>
</div>
<p>如果是捕获所有种类的异常，可以缺省Exception，直接写成except:</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">except</span><span style="color: #000000;">:
    </span><span style="color: #008000;">#</span><span style="color: #008000;">...</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>raise语句</h2>
<p>raise语句可以抛出一个异常：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">def</span><span style="color: #000000;"> test():
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">start</span><span style="color: #800000;">"</span><span style="color: #000000;">)
    </span><span style="color: #0000ff;">raise</span> FileExistsError  <span style="color: #008000;">#</span><span style="color: #008000;">抛出一个FileExistsError异常，可根据需要选择异常类</span>
<span style="color: #0000ff;">try</span><span style="color: #000000;">:
    test()
</span><span style="color: #0000ff;">except</span><span style="color: #000000;"> Exception:
    </span><span style="color: #008000;">#</span><span style="color: #008000;">处理</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>可以自定义异常信息：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">def</span><span style="color: #000000;"> test():
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">start</span><span style="color: #800000;">"</span><span style="color: #000000;">)
    </span><span style="color: #0000ff;">raise</span> Exception(<span style="color: #800000;">"</span><span style="color: #800000;">xxx错误</span><span style="color: #800000;">"</span>)  <span style="color: #008000;">#</span><span style="color: #008000;">括号中写自定义的异常信息</span>
<span style="color: #0000ff;">try</span><span style="color: #000000;">:
    test()
</span><span style="color: #0000ff;">except</span><span style="color: #000000;"> Exception as e:
    </span><span style="color: #0000ff;">print</span>(e)  <span style="color: #008000;">#</span><span style="color: #008000;">xxx错误  输出我们自定义的异常信息</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>try语句块中，一旦抛出了异常，不管是程序本身出问题抛出的异常，还是我们手动抛出的异常，<strong>try语句块中</strong>后面的代码都不再执行：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">try</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">start</span><span style="color: #800000;">"</span><span style="color: #000000;">)
    </span><span style="color: #0000ff;">raise</span><span style="color: #000000;"> Exception
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">end</span><span style="color: #800000;">"</span>)  <span style="color: #008000;">#</span><span style="color: #008000;">此句代码不会执行</span>
<span style="color: #0000ff;">except</span><span style="color: #000000;"> Exception:
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">exception</span><span style="color: #800000;">"</span>)</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>使用了try，就必须要有except来捕获、处理异常，如果不想处理或者已处理一部分、但还需要交给上一级程序单元来继续处理，可以使用raise再次抛出异常。</p>
<p>在except语句中使用raise时，如果抛出的是当前捕获的异常，可以直接写成raise：</p>
<div class="cnblogs_code">
<pre><code>except<span> ZeroDivisionError:
    raise  #把捕获的异常抛给上一级的程序单元处理</span></pre>
</div>
<p>我们也可以先做一些处理，再抛给上一级程序单元做进一步处理。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>当然，我们也可以自定义异常类，抛出自定义的异常：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> MyException(Exception):  #需要继承Exception类
    </span><span style="color: #008000;">#</span><span style="color: #008000;">根据需要重写方法</span>
<span style="color: #0000ff;">try</span><span style="color: #000000;">:
    </span><span style="color: #008000;">#</span><span style="color: #008000;">...</span>
    <span style="color: #0000ff;">raise</span> MyException  <span style="color: #008000;">#</span><span style="color: #008000;">抛出自定义的异常</span>
<span style="color: #0000ff;">except</span><span style="color: #000000;"> MyException as e:
    </span><span style="color: #008000;">#</span><span style="color: #008000;">处理  可以调用我们重写的方法来处理</span></pre>
</div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>