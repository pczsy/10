<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Python3 pickle模块用法' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Python3 pickle模块用法</center></div><div class='banquan'>原文出处:本文由博客园博主正态分个布提供。<br/>
原文连接:https://www.cnblogs.com/zrmw/p/11527410.html</div><br>
    <p>pickle(python3.x)和cPickle(python2.x的模块)相当于java的序列化和反序列化操作。</p>
<p>常采用下面的方式使用：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> pickle
 
pickle.dump(obj,f)
pickle.dumps(obj,f)
pickle.load(f)
pickle.loads(f)</span></pre>
</div>
<p><strong>使用pickle模块你可以把Python对象直接保存到文件，而不需要把他们转化为字符串，也不用底层的文件访问操作把它们写入到一个二进制文件里。 pickle模块会创建一个python语言专用的二进制格式，你基本上不用考虑任何文件细节，它会帮你干净利落地完成读写独享操作，唯一需要的只是一个合法的文件句柄。</strong></p>
<p>pickle模块中的两个主要函数是dump()和load()：</p>
<p>dump()函数接受一个文件句柄和一个数据对象作为参数，把数据对象以特定的格式保存到给定的文件中。当我们使用load()函数从文件中取出已保存的对象时，pickle知道如何恢复这些对象到它们本来的格式。</p>
<p>dumps()函数执行和dump() 函数相同的序列化。取代接受流对象并将序列化后的数据保存到磁盘文件，这个函数简单的返回序列化的数据。</p>
<p>loads()函数执行和load() 函数一样的反序列化。取代接受一个流对象并去文件读取序列化后的数据，它接受包含序列化后的数据的str对象, 直接返回的对象。</p>
<p><strong>示例：</strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff;">import</span><span style="color: #000000;"> pickle

obj </span>= 123, <span style="color: #800000;">"</span><span style="color: #800000;">abcdef</span><span style="color: #800000;">"</span>, [<span style="color: #800000;">"</span><span style="color: #800000;">ac</span><span style="color: #800000;">"</span>, 123], {<span style="color: #800000;">"</span><span style="color: #800000;">key</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">value</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">key1</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">value1</span><span style="color: #800000;">"</span><span style="color: #000000;">}
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(obj)

</span><span style="color: #008000;">#</span><span style="color: #008000;"> 序列化到文件</span>
with open(r<span style="color: #800000;">"</span><span style="color: #800000;">F:\pycodes\ML\a.txt</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">wb</span><span style="color: #800000;">"</span><span style="color: #000000;">) as f:
    pickle.dump(obj, f)

with open(r</span><span style="color: #800000;">"</span><span style="color: #800000;">F:\\pycodes\\ML\\a.txt</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">rb</span><span style="color: #800000;">"</span><span style="color: #000000;">) as f:
    </span><span style="color: #0000ff;">print</span>(pickle.load(f))<span style="color: #008000;">#</span><span style="color: #008000;"> 输出：(123, 'abcdef', ['ac', 123], {'key': 'value', 'key1': 'value1'})</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> 序列化到内存（字符串格式保存），然后对象可以以任何方式处理如通过网络传输</span>
obj1 =<span style="color: #000000;"> pickle.dumps(obj)
</span><span style="color: #0000ff;">print</span>(type(obj1))<span style="color: #008000;">#</span><span style="color: #008000;"> 输出&lt;class 'bytes'&gt;</span>
<span style="color: #0000ff;">print</span>(obj1)<span style="color: #008000;">#</span><span style="color: #008000;"> 输出：python专用的存储格式 b'\x80\x03(K{X\x06\x00\x00\x00abcdefq\x00]q\x01(X\x02\x00\x00\x00acq\x02K{e}q\x03(X\x03\x00\x00\x00keyq\x04X\x05\x00\x00\x00valueq\x05X\x04\x00\x00\x00key1q\x06X\x06\x00\x00\x00value1q\x07utq\x08.'</span>
<span style="color: #000000;">
obj2 </span>=<span style="color: #000000;"> pickle.loads(obj1)
</span><span style="color: #0000ff;">print</span>(type(obj2))<span style="color: #008000;">#</span><span style="color: #008000;"> 输出：&lt;class 'tuple'&gt;</span>
<span style="color: #0000ff;">print</span>(obj2) <span style="color: #008000;">#</span><span style="color: #008000;"> 输出：(123, 'abcdef', ['ac', 123], {'key': 'value', 'key1': 'value1'})</span></pre>
</div>
<pre class="has"><code>
</code></pre>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>