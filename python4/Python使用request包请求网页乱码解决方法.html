<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Python使用request包请求网页乱码解决方法' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Python使用request包请求网页乱码解决方法</center></div><div class='banquan'>原文出处:本文由博客园博主记住我忘记我提供。<br/>
原文连接:https://www.cnblogs.com/nmsghgnv/p/11322287.html</div><br>
    <p>&nbsp;使用requests请求网页时，返回的页面信息有时是乱码，如下代码</p>
<div class="cnblogs_code">
<pre><code>headers =<span style="color: #000000;"> {
    </span><span style="color: #800000;">'</span><span style="color: #800000;">User-Agent</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36</span><span style="color: #800000;">'</span><span style="color: #000000;">
}
</span><span style="color: #0000ff;">def</span><span style="color: #000000;"> get_all(url,key):
    params </span>=<span style="color: #000000;"> {
        </span><span style="color: #800000;">'</span><span style="color: #800000;">keyword</span><span style="color: #800000;">'</span><span style="color: #000000;">:key,
        </span><span style="color: #800000;">'</span><span style="color: #800000;">enc</span><span style="color: #800000;">'</span>:<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">
    }
    response </span>= requests.get(url=url,params=params,headers=<span style="color: #000000;">headers)

    with open(</span><span style="color: #800000;">'</span><span style="color: #800000;">jd.html</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">w</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f:
        f.write(response.text)



</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">'</span><span style="color: #800000;">__main__</span><span style="color: #800000;">'</span><span style="color: #000000;">:
    key </span>= input(<span style="color: #800000;">'</span><span style="color: #800000;">输入搜索内容：</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    url </span>= <span style="color: #800000;">'</span><span style="color: #800000;">https://search.jd.com/Search?</span><span style="color: #800000;">'</span><span style="color: #000000;">
    get_all(url,key)</span></pre>
</div>
<p>返回的部分内容；</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="p-name p-name-type-2"</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">a </span><span style="color: #ff0000;">target</span><span style="color: #0000ff;">="_blank"</span><span style="color: #ff0000;"> title</span><span style="color: #0000ff;">="&aelig;&aring;&deg;&auml;&frac14;&nbsp;&egrave;&macr;&acute;&ccedil;&shy;&egrave;&cent;T&aelig;&curren;&ccedil;&middot;&aring;&curren;&aring;&shy;&pound;&eacute;&copy;&ccedil;&aelig;&frac12;&reg;&aelig;&micro;&ccedil;&shy;&egrave;&cent;&ccedil;&middot;&aring;&pound;&laquo;&aring;&egrave;&cent;t&aelig;&curren;&aring;&eacute;&cent;&auml;&frac14;&eacute;&sup2;&auml;&iquest;&reg;&egrave;&ordm;&laquo;&aring;&curren;&sect;&ccedil;&nbsp;&auml;&ordm;&aring;&egrave;&cent;&aelig;&frac12;&reg;&ccedil;&eacute;&aring;&sup1;&acute;&aring;&shy;&brvbar;&ccedil;t&aelig;&curren;&egrave;&iexcl;&pound;&aelig;&ccedil;&middot;&egrave;&pound; 430&eacute;&raquo;&egrave;&sup2; M"</span><span style="color: #ff0000;"> href</span><span style="color: #0000ff;">="//item.jd.com/51029271063.html"</span><span style="color: #ff0000;"> onclick</span><span style="color: #0000ff;">="searchlog(1,51029271063,8,1,'','flagsClk=1077936264')"</span><span style="color: #0000ff;">&gt;</span>
                <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">em</span><span style="color: #0000ff;">&gt;</span>&aelig;&aring;&deg;&auml;&frac14;&nbsp;&egrave;&macr;&acute;&ccedil;&shy;&egrave;&cent;T&aelig;&curren;<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">font </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="skcolor_ljg"</span><span style="color: #0000ff;">&gt;</span>&ccedil;&middot;<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">font</span><span style="color: #0000ff;">&gt;</span>&aring;&curren;&aring;&shy;&pound;&eacute;&copy;&ccedil;&aelig;&frac12;&reg;&aelig;&micro;&ccedil;&shy;&egrave;&cent;&ccedil;&middot;&aring;&pound;&laquo;&aring;&egrave;&cent;t&aelig;&curren;&aring;&eacute;&cent;&auml;&frac14;&eacute;&sup2;&auml;&iquest;&reg;&egrave;&ordm;&laquo;&aring;&curren;&sect;&ccedil;&nbsp;&auml;&ordm;&aring;&egrave;&cent;&aelig;&frac12;&reg;&ccedil;&eacute;&aring;&sup1;&acute;&aring;&shy;&brvbar;&ccedil;t&aelig;&curren;&egrave;&iexcl;&pound;&aelig;<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">font </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="skcolor_ljg"</span><span style="color: #0000ff;">&gt;</span>&ccedil;&middot;&egrave;&pound;<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">font</span><span style="color: #0000ff;">&gt;</span> 430&eacute;&raquo;&egrave;&sup2; M<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">em</span><span style="color: #0000ff;">&gt;</span>
                <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">i </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="promo-words"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="J_AD_51029271063"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">i</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">a</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>解决方法和思路过程；</p>
<p>代码；</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">def</span><span style="color: #000000;"> get_all(url,key):
    params </span>=<span style="color: #000000;"> {
        </span><span style="color: #800000;">'</span><span style="color: #800000;">keyword</span><span style="color: #800000;">'</span><span style="color: #000000;">:key,
        </span><span style="color: #800000;">'</span><span style="color: #800000;">enc</span><span style="color: #800000;">'</span>:<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">
    }
    response </span>= requests.get(url=url,params=params,headers=<span style="color: #000000;">headers)
    </span><span style="color: #008000;">#</span><span style="color: #008000;"> 打印出所请求页面返回的编码方式</span>
    <span style="color: #0000ff;">print</span><span style="color: #000000;">(response.encoding)
    </span><span style="color: #008000;">#</span><span style="color: #008000;"> response.apparent_encoding是通过内容分析出的编码方式，这里是urf-8</span>
    <span style="color: #0000ff;">print</span><span style="color: #000000;">(response.apparent_encoding)
    </span><span style="color: #008000;">#</span><span style="color: #008000;"> 转码</span>
    content =<span style="color: #000000;"> response.text.encode(response.encoding).decode(response.apparent_encoding)
    </span><span style="color: #0000ff;">print</span><span style="color: #000000;">(content)
    with open(</span><span style="color: #800000;">'</span><span style="color: #800000;">jd.html</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">w</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f:
        f.write(content)



</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">'</span><span style="color: #800000;">__main__</span><span style="color: #800000;">'</span><span style="color: #000000;">:
    key </span>= input(<span style="color: #800000;">'</span><span style="color: #800000;">输入搜索内容：</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    url </span>= <span style="color: #800000;">'</span><span style="color: #800000;">https://search.jd.com/Search?</span><span style="color: #800000;">'</span><span style="color: #000000;">
    get_all(url,key)</span></pre>
</div>
<p>控制台输出（部分）；</p>
<div class="cnblogs_code">
<pre><code>E:\anaconda\python.exe E:/练习/最后阶段/0808/<span style="color: #000000;">jd.py
输入搜索内容：男装
ISO</span>-8859-1<span style="color: #000000;">
utf</span>-8
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=<span style="color: #800000;">"</span><span style="color: #800000;">Content-Type</span><span style="color: #800000;">"</span> content=<span style="color: #800000;">"</span><span style="color: #800000;">text/html; charset=utf-8</span><span style="color: #800000;">"</span> /&gt;
&lt;meta http-equiv=<span style="color: #800000;">"</span><span style="color: #800000;">X-UA-Compatible</span><span style="color: #800000;">"</span> content=<span style="color: #800000;">"</span><span style="color: #800000;">IE=edge</span><span style="color: #800000;">"</span>&gt;
&lt;meta name=<span style="color: #800000;">"</span><span style="color: #800000;">renderer</span><span style="color: #800000;">"</span> content=<span style="color: #800000;">"</span><span style="color: #800000;">webkit</span><span style="color: #800000;">"</span>&gt;
&lt;meta http-equiv=<span style="color: #800000;">"</span><span style="color: #800000;">Cache-Control</span><span style="color: #800000;">"</span> content=<span style="color: #800000;">"</span><span style="color: #800000;">max-age=300</span><span style="color: #800000;">"</span> /&gt;
&lt;link rel=<span style="color: #800000;">"</span><span style="color: #800000;">dns-prefetch</span><span style="color: #800000;">"</span> href=<span style="color: #800000;">"</span><span style="color: #800000;">//search.jd.com</span><span style="color: #800000;">"</span> /&gt;&lt;link rel=<span style="color: #800000;">"</span><span style="color: #800000;">dns-prefetch</span><span style="color: #800000;">"</span> href=<span style="color: #800000;">"</span><span style="color: #800000;">//item.jd.com</span><span style="color: #800000;">"</span> /&gt;&lt;link rel=<span style="color: #800000;">"</span><span style="color: #800000;">dns-prefetch</span><span style="color: #800000;">"</span> href=<span style="color: #800000;">"</span><span style="color: #800000;">//list.jd.com</span><span style="color: #800000;">"</span> /&gt;&lt;link rel=<span style="color: #800000;">"</span><span style="color: #800000;">dns-prefetch</span><span style="color: #800000;">"</span> href=<span style="color: #800000;">"</span><span style="color: #800000;">//p.3.cn</span><span style="color: #800000;">"</span> /&gt;&lt;link rel=<span style="color: #800000;">"</span><span style="color: #800000;">dns-prefetch</span><span style="color: #800000;">"</span> href=<span style="color: #800000;">"</span><span style="color: #800000;">//misc.360buyimg.com</span><span style="color: #800000;">"</span> /&gt;&lt;link rel=<span style="color: #800000;">"</span><span style="color: #800000;">dns-prefetch</span><span style="color: #800000;">"</span> href=<span style="color: #800000;">"</span><span style="color: #800000;">//nfa.jd.com</span><span style="color: #800000;">"</span> /&gt;&lt;link rel=<span style="color: #800000;">"</span><span style="color: #800000;">dns-prefetch</span><span style="color: #800000;">"</span> href=<span style="color: #800000;">"</span><span style="color: #800000;">//d.jd.com</span><span style="color: #800000;">"</span> /&gt;&lt;link rel=<span style="color: #800000;">"</span><span style="color: #800000;">dns-prefetch</span><span style="color: #800000;">"</span> href=<span style="color: #800000;">"</span><span style="color: #800000;">//img12.360buyimg.com</span><span style="color: #800000;">"</span> /&gt;&lt;link rel=<span style="color: #800000;">"</span><span style="color: #800000;">dns-prefetch</span><span style="color: #800000;">"</span> href=<span style="color: #800000;">"</span><span style="color: #800000;">//img13.360buyimg.com</span><span style="color: #800000;">"</span> /&gt;&lt;link rel=<span style="color: #800000;">"</span><span style="color: #800000;">dns-prefetch</span><span style="color: #800000;">"</span> href=<span style="color: #800000;">"</span><span style="color: #800000;">//static.360buyimg.com</span><span style="color: #800000;">"</span> /&gt;&lt;link rel=<span style="color: #800000;">"</span><span style="color: #800000;">dns-prefetch</span><span style="color: #800000;">"</span> href=<span style="color: #800000;">"</span><span style="color: #800000;">//csc.jd.com</span><span style="color: #800000;">"</span> /&gt;&lt;link rel=<span style="color: #800000;">"</span><span style="color: #800000;">dns-prefetch</span><span style="color: #800000;">"</span> href=<span style="color: #800000;">"</span><span style="color: #800000;">//mercury.jd.com</span><span style="color: #800000;">"</span> /&gt;&lt;link rel=<span style="color: #800000;">"</span><span style="color: #800000;">dns-prefetch</span><span style="color: #800000;">"</span> href=<span style="color: #800000;">"</span><span style="color: #800000;">//x.jd.com</span><span style="color: #800000;">"</span> /&gt;&lt;link rel=<span style="color: #800000;">"</span><span style="color: #800000;">dns-prefetch</span><span style="color: #800000;">"</span> href=<span style="color: #800000;">"</span><span style="color: #800000;">//wl.jd.com</span><span style="color: #800000;">"</span> /&gt;&lt;title&gt;男装 - 商品搜索 - 京东&lt;/title&gt;&lt;meta name=<span style="color: #800000;">"</span><span style="color: #800000;">Keywords</span><span style="color: #800000;">"</span> content=<span style="color: #800000;">"</span><span style="color: #800000;">男装,京东男装</span><span style="color: #800000;">"</span> /&gt;&lt;meta name=<span style="color: #800000;">"</span><span style="color: #800000;">description</span><span style="color: #800000;">"</span> content=<span style="color: #800000;">"</span><span style="color: #800000;">在京东找到了260867件男装的类似商品，其中包含了&ldquo;男装&rdquo;等类型的男装的商品。</span><span style="color: #800000;">"</span> /&gt;&lt;script&gt;<span style="color: #000000;">
window.loadFa_toJson_data</span>={query:<span style="color: #800000;">'</span><span style="color: #800000;">%E7%94%B7%E8%A3%85</span><span style="color: #800000;">'</span><span style="color: #000000;">};
window.jdpts</span>={};jdpts._st=new Date().getTime();window.pageConfig=<span style="color: #000000;">{
    closeJpg : </span>1<span style="color: #000000;">,
    compatible: false,
    searchType: 0,
    jdfVersion: </span><span style="color: #800000;">'</span><span style="color: #800000;">2.0.0</span><span style="color: #800000;">'</span><span style="color: #000000;">,
    floatnav: </span>1<span style="color: #000000;">,
    price_pdos_off: 0,
    actName: </span><span style="color: #800000;">''</span><span style="color: #000000;">,
    pSource: </span><span style="color: #800000;">'</span><span style="color: #800000;">search_pc</span><span style="color: #800000;">'</span><span style="color: #000000;">,
    queryParam: {
        c1: 0,
        c2: </span>1342<span style="color: #000000;">,
        c3: 0,
        brand: </span><span style="color: #800000;">''</span><span style="color: #000000;">,
        price: </span><span style="color: #800000;">''</span><span style="color: #000000;">,
        keyword: </span><span style="color: #800000;">'</span><span style="color: #800000;">男装</span><span style="color: #800000;">'</span><span style="color: #000000;">,
        page: </span><span style="color: #800000;">'</span><span style="color: #800000;">1</span><span style="color: #800000;">'</span><span style="color: #000000;">
    }
};
window.searchUnit</span>=<span style="color: #000000;">{
    resizeOnebox: function(g,f,j){var g</span>=parseInt(g),i=typeof f,h=typeof j;<span style="color: #0000ff;">if</span>(!isNaN(g)){<span style="color: #0000ff;">if</span>(<span style="color: #800000;">"</span><span style="color: #800000;">string</span><span style="color: #800000;">"</span>==i&amp;&amp;f!=<span style="color: #800000;">""</span>&amp;&amp;g&gt;0){$(<span style="color: #800000;">"</span><span style="color: #800000;">#J_oneBoxFrame_</span><span style="color: #800000;">"</span>+f).css(<span style="color: #800000;">"</span><span style="color: #800000;">height</span><span style="color: #800000;">"</span>,g+10);h==<span style="color: #800000;">"</span><span style="color: #800000;">function</span><span style="color: #800000;">"</span>&amp;&amp;j()}<span style="color: #0000ff;">else</span>{<span style="color: #0000ff;">if</span>(i==<span style="color: #800000;">"</span><span style="color: #800000;">undefined</span><span style="color: #800000;">"</span>||i==<span style="color: #800000;">"</span><span style="color: #800000;">function</span><span style="color: #800000;">"</span>){$(<span style="color: #800000;">"</span><span style="color: #800000;">#virtualWareIFrame</span><span style="color: #800000;">"</span>).css(<span style="color: #800000;">"</span><span style="color: #800000;">height</span><span style="color: #800000;">"</span>,g&gt;0?g+10:0);i==<span style="color: #800000;">"</span><span style="color: #800000;">function</span><span style="color: #800000;">"</span>&amp;&amp;<span style="color: #000000;">f()}}}},
    resizeShopbox: function(e,d){var f</span>=0;switch(e){case 1:case 2:f=145;<span style="color: #0000ff;">break</span>;case 3:f=75;<span style="color: #0000ff;">break</span>;case 4:f=80;<span style="color: #0000ff;">break</span>;default:<span style="color: #0000ff;">break</span>}f&amp;&amp;$(<span style="color: #800000;">"</span><span style="color: #800000;">#shopboxIFrame</span><span style="color: #800000;">"</span>).css(<span style="color: #800000;">"</span><span style="color: #800000;">height</span><span style="color: #800000;">"</span>,f).show();typeof(d)==<span style="color: #800000;">"</span><span style="color: #800000;">string</span><span style="color: #800000;">"</span>&amp;&amp;(new Image().src=<span style="color: #000000;">d)},
    coupon: {}};
window.QUERY_KEYWORD</span>=<span style="color: #800000;">'</span><span style="color: #800000;">男装</span><span style="color: #800000;">'</span><span style="color: #000000;">;
window.REAL_KEYWORD</span>=<span style="color: #800000;">'</span><span style="color: #800000;">男装</span><span style="color: #800000;">'</span><span style="color: #000000;">;
</span>&lt;/script&gt;
&lt;link type=<span style="color: #800000;">"</span><span style="color: #800000;">text/css</span><span style="color: #800000;">"</span> rel=<span style="color: #800000;">"</span><span style="color: #800000;">stylesheet</span><span style="color: #800000;">"</span> href=<span style="color: #800000;">"</span><span style="color: #800000;">//misc.360buyimg.com/??jdf/1.0.0/unit/ui-base/5.0.0/ui-base.css,jdf/1.0.0/unit/shortcut/5.0.0/shortcut.css,jdf/1.0.0/unit/global-header/5.0.0/global-header.css,jdf/1.0.0/unit/myjd/5.0.0/myjd.css,jdf/1.0.0/unit/nav/5.0.0/nav.css,jdf/1.0.0/unit/shoppingcart/5.0.0/shoppingcart.css,jdf/1.0.0/unit/global-footer/5.0.0/global-footer.css,jdf/1.0.0/unit/service/5.0.0/service.css,jdf/1.0.0/unit/global-header-photo/5.0.0/global-header-photo.css,jdf/1.0.0/ui/area/1.0.0/area.css</span><span style="color: #800000;">"</span> /&gt;
&lt;link type=<span style="color: #800000;">"</span><span style="color: #800000;">text/css</span><span style="color: #800000;">"</span> rel=<span style="color: #800000;">"</span><span style="color: #800000;">stylesheet</span><span style="color: #800000;">"</span> href=<span style="color: #800000;">"</span><span style="color: #800000;">//misc.360buyimg.com/product/search/1.0.7/css/search.css</span><span style="color: #800000;">"</span> /&gt;
&lt;script type=<span style="color: #800000;">"</span><span style="color: #800000;">text/javascript</span><span style="color: #800000;">"</span> src=<span style="color: #800000;">"</span><span style="color: #800000;">//misc.360buyimg.com/??jdf/1.0.0/unit/base/5.0.0/base.js,jdf/lib/jquery-1.6.4.js,product/module/es5-shim.js</span><span style="color: #800000;">"</span>&gt;&lt;/script&gt;
&lt;script&gt;<span style="color: #000000;">
window.SEARCH </span>=<span style="color: #000000;"> {
    cid: </span>1349<span style="color: #000000;">,
    ui_ver: </span><span style="color: #800000;">'</span><span style="color: #800000;">1.0.7</span><span style="color: #800000;">'</span><span style="color: #000000;">,
    c_category: </span>1342<span style="color: #000000;">,
    p_category: 0,
    enable_adv: </span>1<span style="color: #000000;">,
    enable_prom_adwords: </span>1<span style="color: #000000;">,
    enable_prom_flag: </span>1<span style="color: #000000;">,
    enable_price: </span>1<span style="color: #000000;">,
    enable_stock: </span>2<span style="color: #000000;">,
    enable_yyk: 0,
    lottery_code: </span><span style="color: #800000;">''</span><span style="color: #000000;">,
    is_correct_hash: function(e){var a</span>=[<span style="color: #800000;">"</span><span style="color: #800000;">keyword</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">brand_id</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">activity_id</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">coupon_batch</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">ecard_id</span><span style="color: #800000;">"</span>];<span style="color: #0000ff;">for</span>(var c=0,b=a.length;c&lt;b;c++){var d=new RegExp(<span style="color: #800000;">"</span><span style="color: #800000;">(^|\\?|&amp;)</span><span style="color: #800000;">"</span>+a[c]+<span style="color: #800000;">"</span><span style="color: #800000;">=([^&amp;]*)(\\s|&amp;|$)</span><span style="color: #800000;">"</span>);<span style="color: #0000ff;">if</span>(d.test(e)){<span style="color: #0000ff;">return</span> true}}<span style="color: #0000ff;">return</span><span style="color: #000000;"> false},
    get_real_hash: function(){var a</span>=window.location.hash.substr(1);<span style="color: #0000ff;">if</span>(a&amp;&amp;$.browser.mozilla){<span style="color: #0000ff;">return</span> location.href.substr(location.href.indexOf(<span style="color: #800000;">"</span><span style="color: #800000;">#</span><span style="color: #800000;">"</span>)+1)}<span style="color: #0000ff;">else</span>{<span style="color: #0000ff;">return</span><span style="color: #000000;"> a}}
};
(function(a,b){var c</span>=b.get_real_hash();<span style="color: #0000ff;">if</span>(b.is_correct_hash(c)){a.location.href=a.location.pathname+<span style="color: #800000;">"</span><span style="color: #800000;">?</span><span style="color: #800000;">"</span>+c;<span style="color: #0000ff;">return</span> false}<span style="color: #0000ff;">else</span>{<span style="color: #0000ff;">if</span>(a.self!=a.top||$.browser.msie&amp;&amp;$.browser.version&lt;=9){var f=null,e=function(){var d=$(a).width();<span style="color: #0000ff;">return</span> 1210&gt;d?$(<span style="color: #800000;">"</span><span style="color: #800000;">html</span><span style="color: #800000;">"</span>).removeClass():$(<span style="color: #800000;">"</span><span style="color: #800000;">html</span><span style="color: #800000;">"</span>).removeClass().addClass(d&gt;=1210&amp;&amp;1390&gt;d?<span style="color: #800000;">"</span><span style="color: #800000;">resp01</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">resp02</span><span style="color: #800000;">"</span>),true};e();$(a).resize(function(){clearTimeout(f),f=setTimeout(e,20<span style="color: #000000;">)})}}})(window,SEARCH);
</span>&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;!--shortcut start--&gt;
&lt;div id=<span style="color: #800000;">"</span><span style="color: #800000;">shortcut-2014</span><span style="color: #800000;">"</span>&gt;
    &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">w</span><span style="color: #800000;">"</span>&gt;
        &lt;ul <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">fl</span><span style="color: #800000;">"</span>&gt;
            &lt;li id=<span style="color: #800000;">"</span><span style="color: #800000;">ttbar-home</span><span style="color: #800000;">"</span>&gt;&lt;i <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">iconfont</span><span style="color: #800000;">"</span>&gt;&amp;<span style="color: #008000;">#</span><span style="color: #008000;">xe608;&lt;/i&gt;&lt;a href="//www.jd.com/" target="_blank"&gt;京东首页&lt;/a&gt;&lt;/li&gt;</span>
            &lt;li <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">dorpdown</span><span style="color: #800000;">"</span> id=<span style="color: #800000;">"</span><span style="color: #800000;">ttbar-mycity</span><span style="color: #800000;">"</span>&gt;&lt;/li&gt;
        &lt;/ul&gt;</pre>
</div>
<p>补充，方法二；</p>
<div class="cnblogs_code">
<pre><code>response = requests.get(url=url, headers=<span style="color: #000000;">headers)
    etrees </span>= etree.HTML(response.content.decode(<span style="color: #800000;">"</span><span style="color: #800000;">gb18030</span><span style="color: #800000;">"</span>))</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>done。</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>