<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Python学习日记(十九) 模块导入' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Python学习日记(十九) 模块导入</center></div><div class='banquan'>原文出处:本文由博客园博主Fantac提供。<br/>
原文连接:https://www.cnblogs.com/Fantac/p/11444478.html</div><br>
    <p><span style="color: #ffffff; font-family: 宋体; background-color: #ff0000; font-size: 18pt;"><strong>模块导入</strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">当文件夹中有这样一个自定义的command模块</span></p>
<p><img src="./images/Python学习日记(十九) 模块导入0.png" alt="" /></p>
<p><span style="font-family: 宋体; font-size: 18px;">在它的内部写下下列代码:</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">这个py文件被调用!</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">def</span><span style="color: #000000;"> fuc():
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">这个函数被调用!</span><span style="color: #800000;">'</span>)</pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">然后我们在command模块中执行下列代码:</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span> command      <span style="color: #008000;">#</span><span style="color: #008000;">这个py文件被调用!</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">我们如果在这段程序中反复执行多次这一段代码,这一个文件结果也只会被导入一次</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span> command      <span style="color: #008000;">#</span><span style="color: #008000;">这个py文件被调用!</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> command
</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> command
</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> command
</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> command
</span><span style="color: #0000ff;">import</span> command</pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">调用command模块中的方法fuc()</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span> command      <span style="color: #008000;">#</span><span style="color: #008000;">这个py文件被调用!</span>
command.fuc()       <span style="color: #008000;">#</span><span style="color: #008000;">这个函数被调用!</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">当我们写这样一个代码的时候,计算机会先去找到这一个模块,找到之后再创建这个模块的命名空间,把文件夹的名字都放在命名空间里</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">如果我们在temp_py.py中也写一个fuc()函数:</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span> command      <span style="color: #008000;">#</span><span style="color: #008000;">这个py文件被调用!</span>
<span style="color: #0000ff;">def</span><span style="color: #000000;"> fuc():
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">hello __fuc__</span><span style="color: #800000;">'</span><span style="color: #000000;">)
command.fuc()       </span><span style="color: #008000;">#</span><span style="color: #008000;">这个函数被调用!</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">那么实际上它调用的还是command模块内的函数</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">如果在command模块内和temp_py.py中加入相同的变量:</span></p>
<p><strong><span style="color: #ff0000;"><span style="font-family: 宋体;"><span style="font-size: 18px;">command模块代码:</span></span></span></strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">这个py文件被调用!</span><span style="color: #800000;">'</span><span style="color: #000000;">)
number </span>= 150
<span style="color: #0000ff;">def</span><span style="color: #000000;"> fuc():
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">这个函数被调用!</span><span style="color: #800000;">'</span>,number)　　　　#number获取到一个内存地址再从中拿到值</pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong><span style="color: #ff0000;">temp_py.py执行代码:</span></strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span> command      <span style="color: #008000;">#</span><span style="color: #008000;">这个py文件被调用!</span>
number = 300
<span style="color: #0000ff;">print</span>(command.number)   <span style="color: #008000;">#</span><span style="color: #008000;">150</span>
<span style="color: #0000ff;">print</span>(number)           <span style="color: #008000;">#</span><span style="color: #008000;">300</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">当你要导入一个模块的时候,计算机会先到sys.modules()中去找你导入的这个模块是否在这个里面</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span> command      <span style="color: #008000;">#</span><span style="color: #008000;">这个py文件被调用!</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> sys
</span><span style="color: #0000ff;">print</span>(sys.modules.keys())   <span style="color: #008000;">#</span><span style="color: #008000;">dict_keys(['sys', 'builtins', '_frozen_importlib', '_imp', '_thread', '_warnings', '_weakref', 'zipimport', '_frozen_importlib_external', '_io', 'marshal', 'nt', 'winreg', 'encodings', 'codecs', '_codecs', 'encodings.aliases', 'encodings.utf_8', '_signal', '__main__', 'encodings.latin_1', 'io', 'abc', '_abc', 'site', 'os', 'stat', '_stat', 'ntpath', 'genericpath', 'os.path', '_collections_abc', '_sitebuiltins', '_bootlocale', '_locale', 'encodings.gbk', '_codecs_cn', '_multibytecodec', 'encodings.cp437', 'command'])</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">在最后我们可以看到之前的command模块有被成功导入</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">如果我们要找的这个模块在sys.modules()中找不到,那么就依据sys.path()路径去找到模块,若找到就创建这个模块的命名空间再把文件名陈放在内存里并执行,若找不到那么就会报错</span></p>
<p><strong><span style="font-family: 宋体; font-size: 18px;">给模块取别名:</span></strong></p>
<p><span style="font-family: 宋体;"><span style="font-size: 18px;">语法:import '模块名' as '别名'</span></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span> command as comd  <span style="color: #008000;">#</span><span style="color: #008000;">这个py文件被调用!</span>
comd.fuc()              <span style="color: #008000;">#</span><span style="color: #008000;">这个函数被调用! 150</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> time as t
</span><span style="color: #0000ff;">print</span>(t.time())         <span style="color: #008000;">#</span><span style="color: #008000;">1567359703.0011516</span>
<span style="color: #0000ff;">print</span>(time.time())      <span style="color: #008000;">#</span><span style="color: #008000;">NameError: name 'time' is not defined  </span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">假设有两个模块xmlreader.py和csvreader.py,它们都定义了函数read_data(filename):用来从文件中读取一些数据,但采用不同的输入格式.可以编写代码来选择性地挑选读取模块,例如</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">if</span> file_format == <span style="color: #800000;">'</span><span style="color: #800000;">xml</span><span style="color: #800000;">'</span><span style="color: #000000;">:
     </span><span style="color: #0000ff;">import</span><span style="color: #000000;"> xmlreader as reader
</span><span style="color: #0000ff;">elif</span> file_format == <span style="color: #800000;">'</span><span style="color: #800000;">csv</span><span style="color: #800000;">'</span><span style="color: #000000;">:
     </span><span style="color: #0000ff;">import</span><span style="color: #000000;"> csvreader as reader
data</span>=reader.read_date(filename)</pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>一行获取模块:</strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span> sys,os,pickle,shelve,json</pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">不推荐这样写后期不好维护,建议一行一行写在开头,能够让人一目了然</span></p>
<p><strong><span style="font-family: 宋体; font-size: 18px;">模块的写法顺序:</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px;">内置模块(re、time等)、扩展的模块(django等)、自定义的模块</span></p>
<p><strong><span style="font-family: 宋体;"><span style="font-size: 18px;">from...import...的用法</span></span></strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">from</span> time <span style="color: #0000ff;">import</span><span style="color: #000000;"> time
</span><span style="color: #0000ff;">print</span>(time())   <span style="color: #008000;">#</span><span style="color: #008000;">1567360779.0056956</span>
<span style="color: #0000ff;">from</span> sys <span style="color: #0000ff;">import</span><span style="color: #000000;"> version
</span><span style="color: #0000ff;">print</span>(version)  <span style="color: #008000;">#</span><span style="color: #008000;">3.7.1 (default, Dec 10 2018, 22:54:23) [MSC v.1915 64 bit (AMD64)]</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">在pycharm中,如果是自定义模块要用from...import...调用方法有红色的波浪线报错是因为pycharm主观认为从根目录去找这个模块,结果却找不到,但其实这个模块可以从sys.path()中找到</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">若在temp_py.py定义一个和fuc同名的函数,让我们来看看执行结果:</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">from</span> command <span style="color: #0000ff;">import</span> fuc     <span style="color: #008000;">#</span><span style="color: #008000;">这个py文件被调用!</span>
<span style="color: #0000ff;">def</span><span style="color: #000000;"> fuc():
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">!!!!!!!</span><span style="color: #800000;">'</span>)        <span style="color: #008000;">#</span><span style="color: #008000;">!!!!!!!</span>
fuc()</pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>也支持获取多个方法:</strong></span></p>
<p>&nbsp;<img src="./images/Python学习日记(十九) 模块导入1.png" alt="" width="613" height="109" /></p>
<p><img src="./images/Python学习日记(十九) 模块导入2.png" alt="" width="615" height="134" /></p>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>from 模块名 import *</strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">它能把模块内的名字都调用</span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><img src="./images/Python学习日记(十九) 模块导入3.png" alt="" width="542" height="183" /></span></p>
<p><img src="./images/Python学习日记(十九) 模块导入4.png" alt="" width="544" height="220" /></p>
<p><span style="font-family: 宋体; font-size: 18px;">缺点:不安全怕重名</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">from</span> time <span style="color: #0000ff;">import</span> *<span style="color: #000000;">
sleep </span>= 10<span style="color: #000000;">
sleep(</span>0.1)      <span style="color: #008000;">#</span><span style="color: #008000;">TypeError: 'int' object is not callable</span></pre>
</div>
<p><strong><span style="font-family: 宋体; font-size: 18px;">__all__</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px;">只和from 模块名 import *有关</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">如果有被__all__约束住那么才能够执行</span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><img src="./images/Python学习日记(十九) 模块导入5.png" alt="" width="593" height="156" /></span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><img src="./images/Python学习日记(十九) 模块导入6.png" alt="" width="594" height="280" /></span></p>
<p><strong><span style="font-family: 宋体; font-size: 18px;">__name__</span></strong></p>
<p><em><span style="font-family: 宋体; font-size: 18px;">当我们直接执行这个模块的时候,这里的__name__就等于'__main__'</span></em></p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">__all__</span> = [<span style="color: #800000;">'</span><span style="color: #800000;">number</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">fuc</span><span style="color: #800000;">'</span><span style="color: #000000;">]
</span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">这个py文件被调用!</span><span style="color: #800000;">'</span><span style="color: #000000;">)
number </span>= 150            <span style="color: #008000;">#</span><span style="color: #008000;">这里的值已经放到了内存地址中</span>
<span style="color: #0000ff;">def</span><span style="color: #000000;"> fuc():
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">这个函数被调用!</span><span style="color: #800000;">'</span><span style="color: #000000;">,number)
</span><span style="color: #0000ff;">def</span><span style="color: #000000;"> fuc2():
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">fuc2</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">def</span><span style="color: #000000;"> fuc3():
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">fuc3</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(<span style="color: #800080;">__name__</span>)     　　 <span style="color: #008000;">#</span><span style="color: #008000;">__main__</span></pre>
</div>
<p><em><span style="font-family: 宋体; font-size: 18px;">当我们执行其他模块的时候,在其他模块中引用这个模块,这个模块中的__name__就等于'这个模块的名字'</span></em></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span> command          <span style="color: #008000;">#</span><span style="color: #008000;">这个py文件被调用!</span>
                        <span style="color: #008000;">#command</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">有些时候当我们在其他模块中调用模块时,调用的这个模块本身可能有一些测试的代码,如果我们直接调用的话那么这些测试的代码也会跟着一起执行出来,但是实际上我们在调用这个模块的时候并不想让它里面的内容直接就跑出来,所以我们就要在这个模块中添加一个判断来确定它的__name__</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">当在这个模块执行时:</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #800080;">__all__</span> = [<span style="color: #800000;">'</span><span style="color: #800000;">number</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">fuc</span><span style="color: #800000;">'</span><span style="color: #000000;">]
</span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">这个py文件被调用!</span><span style="color: #800000;">'</span><span style="color: #000000;">)
number </span>= 150            <span style="color: #008000;">#</span><span style="color: #008000;">这里的值已经放到了内存地址中</span>
<span style="color: #0000ff;">def</span><span style="color: #000000;"> fuc():
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">这个函数被调用!</span><span style="color: #800000;">'</span><span style="color: #000000;">,number)
</span><span style="color: #0000ff;">def</span><span style="color: #000000;"> fuc2():
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">fuc2</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">def</span><span style="color: #000000;"> fuc3():
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">fuc3</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">'</span><span style="color: #800000;">__main__</span><span style="color: #800000;">'</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">执行下列调试代码或其他功能代码...</span><span style="color: #800000;">'</span>)     <span style="color: #008000;">#</span><span style="color: #008000;">执行下列调试代码或其他功能代码...</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">在其他模块调用这个模块时,模块中的那些调试代码就不会再被直接执行了</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span> command      <span style="color: #008000;">#</span><span style="color: #008000;">这个py文件被调用!</span></pre>
</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>