<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修python 之 数据库（修改表、复制表、删除表、单表查询）' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>python 之 数据库（修改表、复制表、删除表、单表查询）</center></div><div class='banquan'>原文出处:本文由博客园博主small_white-提供。<br/>
原文连接:https://www.cnblogs.com/mylu/p/11291450.html</div><br>
    <h3 class="md-end-block md-heading md-focus"><span class="md-plain">10.8 修改表、复制表、删除表</span></h3>
<h4 class="md-end-block md-heading"><span class="md-plain">10.81 修改表 alter table</span></h4>
<div class="cnblogs_code">
<pre><code><span style="color: #800000; font-weight: bold;">1</span><span style="color: #000000;">. 修改表名
</span><span style="color: #0000ff;">alter</span> <span style="color: #0000ff;">table</span><span style="color: #000000;"> 表名 rename 新表名;
</span><span style="color: #800000; font-weight: bold;">2</span><span style="color: #000000;">. 增加字段
</span><span style="color: #0000ff;">alter</span> <span style="color: #0000ff;">table</span> 表名 <span style="color: #0000ff;">add</span> 字段名  数据类型 <span style="color: #ff0000;">[</span><span style="color: #ff0000;">完整性约束条件&hellip;</span><span style="color: #ff0000;">]</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">alter</span> <span style="color: #0000ff;">table</span> t1 <span style="color: #0000ff;">add</span> stu <span style="color: #0000ff;">char</span>(<span style="color: #800000; font-weight: bold;">10</span>) <span style="color: #808080;">not</span> <span style="color: #0000ff;">null</span><span style="color: #000000;"> after name;     #添加到name字段之后
</span><span style="color: #0000ff;">alter</span> <span style="color: #0000ff;">table</span> t1 <span style="color: #0000ff;">add</span> sex enum(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">male</span><span style="color: #ff0000;">'</span>,<span style="color: #ff0000;">'</span><span style="color: #ff0000;">female</span><span style="color: #ff0000;">'</span>) <span style="color: #0000ff;">default</span> <span style="color: #ff0000;">'</span><span style="color: #ff0000;">male</span><span style="color: #ff0000;">'</span><span style="color: #000000;"> first;#添加到最前面                   
</span><span style="color: #800000; font-weight: bold;">3</span><span style="color: #000000;">. 删除字段
</span><span style="color: #0000ff;">alter</span> <span style="color: #0000ff;">table</span> t1 <span style="color: #0000ff;">drop</span><span style="color: #000000;"> sex;
</span><span style="color: #800000; font-weight: bold;">4</span><span style="color: #000000;">. 修改字段(增加主键)
</span><span style="color: #0000ff;">alter</span> <span style="color: #0000ff;">table</span> t1 modify age <span style="color: #0000ff;">int</span>(<span style="color: #800000; font-weight: bold;">3</span><span style="color: #000000;">);
</span><span style="color: #0000ff;">alter</span> <span style="color: #0000ff;">table</span> t1 modify id <span style="color: #0000ff;">int</span>(<span style="color: #800000; font-weight: bold;">11</span>) <span style="color: #0000ff;">primary</span> <span style="color: #0000ff;">key</span><span style="color: #000000;"> auto_increment;      #修改为主键
​
</span><span style="color: #0000ff;">alter</span> <span style="color: #0000ff;">table</span> t1 change 旧字段名 新字段名 新数据类型 <span style="color: #ff0000;">[</span><span style="color: #ff0000;">完整性约束条件&hellip;</span><span style="color: #ff0000;">]</span><span style="color: #000000;">;
</span><span style="color: #800000; font-weight: bold;">5</span><span style="color: #000000;">. 对已经存在的表增加复合主键
</span><span style="color: #0000ff;">alter</span> <span style="color: #0000ff;">table</span> t1 <span style="color: #0000ff;">add</span> <span style="color: #0000ff;">primary</span> <span style="color: #0000ff;">key</span><span style="color: #000000;">(ip,port); 
</span><span style="color: #800000; font-weight: bold;">6</span><span style="color: #000000;">. 删除主键
a. 删除自增约束 </span><span style="color: #0000ff;">alter</span> <span style="color: #0000ff;">table</span> t1 modify id <span style="color: #0000ff;">int</span>(<span style="color: #800000; font-weight: bold;">11</span>) <span style="color: #808080;">not</span> <span style="color: #0000ff;">null</span><span style="color: #000000;">;
b. 删除主键 </span><span style="color: #0000ff;">alter</span> <span style="color: #0000ff;">table</span> t1 <span style="color: #0000ff;">drop</span> <span style="color: #0000ff;">primary</span> <span style="color: #0000ff;">key</span><span style="color: #000000;">;
</span><span style="color: #800000; font-weight: bold;">7</span>. 修改存储引擎 <span style="color: #0000ff;">alter</span> <span style="color: #0000ff;">table</span> it engine<span style="color: #808080;">=</span><span style="color: #000000;">innodb;
</span><span style="color: #800000; font-weight: bold;">8</span>. 增加主键(设置索引) <span style="color: #0000ff;">alter</span> <span style="color: #0000ff;">table</span> t1 <span style="color: #0000ff;">add</span> <span style="color: #0000ff;">primary</span> <span style="color: #0000ff;">key</span>(id);</pre>
</div>
<h4 class="md-end-block md-heading"><span class="md-plain">10.82 复制表</span></h4>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">create</span> <span style="color: #0000ff;">table</span> new_t1 <span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span><span style="color: #000000;"> t1;                       # 复制表结构＋记录,但是key和自增不会复制
</span><span style="color: #0000ff;">alter</span> <span style="color: #0000ff;">table</span> new_t1 modify id <span style="color: #0000ff;">int</span>(<span style="color: #800000; font-weight: bold;">11</span>) <span style="color: #0000ff;">primary</span> <span style="color: #0000ff;">key</span><span style="color: #000000;"> auto_increment; #添加主键和自增
                         #条件为假，查不到任何记录                                      
</span><span style="color: #0000ff;">create</span> <span style="color: #0000ff;">table</span> new1_t1 <span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> t1 <span style="color: #0000ff;">where</span> <span style="color: #800000; font-weight: bold;">1</span><span style="color: #808080;">=</span><span style="color: #800000; font-weight: bold;">2</span><span style="color: #000000;">;                #只复制表结构,但是key和自增不会复制
</span><span style="color: #0000ff;">alter</span> <span style="color: #0000ff;">table</span> new_t1 modify id <span style="color: #0000ff;">int</span>(<span style="color: #800000; font-weight: bold;">11</span>) <span style="color: #0000ff;">primary</span> <span style="color: #0000ff;">key</span><span style="color: #000000;"> auto_increment; #添加主键和自增                                                                           
</span><span style="color: #0000ff;">create</span> <span style="color: #0000ff;">table</span> t2 <span style="color: #808080;">like</span> t1;    #只完全复制表结构，不复制记录</pre>
</div>
<h4 class="md-end-block md-heading"><span class="md-plain">10.83 删除表</span></h4>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">drop</span> <span style="color: #0000ff;">table</span> t1;</pre>
</div>
<h3 class="md-end-block md-heading"><span class="md-plain">10.9 单表查询</span></h3>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>语法<br /></span></pre>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">select</span> <span style="color: #0000ff;">distinct</span> 查询字段1，查询字段2......... <span style="color: #0000ff;">from</span><span style="color: #000000;"> 表名
    </span><span style="color: #0000ff;">where</span><span style="color: #000000;"> 分组之前的过滤条件
    </span><span style="color: #0000ff;">group</span> <span style="color: #0000ff;">by</span><span style="color: #000000;"> 分组条件
    </span><span style="color: #0000ff;">having</span><span style="color: #000000;"> 分组之后的过滤条件
    </span><span style="color: #0000ff;">order</span> <span style="color: #0000ff;">by</span> 排序字段1 <span style="color: #0000ff;">asc</span>,排序字段2 <span style="color: #0000ff;">desc</span><span style="color: #000000;">
    limit </span><span style="color: #800000; font-weight: bold;">5</span>,<span style="color: #800000; font-weight: bold;">5</span>;</pre>
</div>
<h4 class="md-end-block md-heading"><span class="md-plain">10.91 where过滤</span></h4>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">select</span> id,name <span style="color: #0000ff;">from</span> db39.emp <span style="color: #0000ff;">where</span> id <span style="color: #808080;">&gt;=</span> <span style="color: #800000; font-weight: bold;">3</span> <span style="color: #808080;">and</span> id <span style="color: #808080;">&lt;=</span> <span style="color: #800000; font-weight: bold;">6</span>
<span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span>  <span style="color: #0000ff;">from</span> db39.emp <span style="color: #0000ff;">where</span> id <span style="color: #808080;">between</span> <span style="color: #800000; font-weight: bold;">3</span> <span style="color: #808080;">and</span> <span style="color: #800000; font-weight: bold;">6</span><span style="color: #000000;">;
​
</span><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">where</span> salary <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">20000</span> <span style="color: #808080;">or</span> salary <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">18000</span> <span style="color: #808080;">or</span> salary <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">17000</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">where</span> salary <span style="color: #808080;">in</span> (<span style="color: #800000; font-weight: bold;">20000</span>,<span style="color: #800000; font-weight: bold;">18000</span>,<span style="color: #800000; font-weight: bold;">17000</span><span style="color: #000000;">);
</span><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">where</span> salary <span style="color: #808080;">not</span> <span style="color: #808080;">in</span> (<span style="color: #800000; font-weight: bold;">20000</span>,<span style="color: #800000; font-weight: bold;">18000</span>,<span style="color: #800000; font-weight: bold;">17000</span><span style="color: #000000;">);
</span><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">where</span> id <span style="color: #808080;">not</span> <span style="color: #808080;">between</span> <span style="color: #800000; font-weight: bold;">3</span> <span style="color: #808080;">and</span> <span style="color: #800000; font-weight: bold;">6</span><span style="color: #000000;">;
​
要求：查询员工姓名中包含i字母的员工姓名与其薪资
</span><span style="color: #0000ff;">select</span> name,salary <span style="color: #0000ff;">from</span> db39.emp <span style="color: #0000ff;">where</span> name <span style="color: #808080;">like</span> <span style="color: #ff0000;">'</span><span style="color: #ff0000;">%i%</span><span style="color: #ff0000;">'</span><span style="color: #000000;">
​
要求：查询员工姓名是由四个字符组成的的员工姓名与其薪资
</span><span style="color: #0000ff;">select</span> name,salary <span style="color: #0000ff;">from</span> db39.emp <span style="color: #0000ff;">where</span> name <span style="color: #808080;">like</span> <span style="color: #ff0000;">'</span><span style="color: #ff0000;">____</span><span style="color: #ff0000;">'</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">select</span> name,salary <span style="color: #0000ff;">from</span> db39.emp <span style="color: #0000ff;">where</span> char_length(name) <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">4</span><span style="color: #000000;">;
​
要求：查询岗位描述为空的员工名与岗位名
</span><span style="color: #0000ff;">select</span> name,post <span style="color: #0000ff;">from</span> db39.emp <span style="color: #0000ff;">where</span> post_comment <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">NULL</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">select</span> name,post <span style="color: #0000ff;">from</span> db39.emp <span style="color: #0000ff;">where</span> post_comment <span style="color: #0000ff;">is</span> <span style="color: #808080;">not</span> <span style="color: #0000ff;">NULL</span>;</pre>
</div>
<h4 class="md-end-block md-heading"><span class="md-plain">10.92 group by分组</span></h4>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">#设置sql_mode为only_full_group_by，意味着以后但凡分组，只能取到分组的依据
mysql</span><span style="color: #808080;">&gt;</span> <span style="color: #0000ff;">set</span> global sql_mode<span style="color: #808080;">=</span><span style="color: #000000;">"strict_trans_tables,only_full_group_by";
​
#聚合函数：每个部门的最高、最低、平均、总工资，计数
</span><span style="color: #0000ff;">select</span> post,<span style="color: #ff00ff;">max</span>(salary) <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">group</span> <span style="color: #0000ff;">by</span><span style="color: #000000;"> post;
</span><span style="color: #0000ff;">select</span> post,<span style="color: #ff00ff;">min</span>(salary) <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">group</span> <span style="color: #0000ff;">by</span><span style="color: #000000;"> post;
</span><span style="color: #0000ff;">select</span> post,<span style="color: #ff00ff;">avg</span>(salary) <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">group</span> <span style="color: #0000ff;">by</span><span style="color: #000000;"> post;
</span><span style="color: #0000ff;">select</span> post,<span style="color: #ff00ff;">sum</span>(salary) <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">group</span> <span style="color: #0000ff;">by</span><span style="color: #000000;"> post;
</span><span style="color: #0000ff;">select</span> post,<span style="color: #ff00ff;">count</span>(id) <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">group</span> <span style="color: #0000ff;">by</span> post;</pre>
</div>
<p class="md-end-block md-p"><span><strong>group_concat (不能做中间结果)、concat 、concat_ws 、as</strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">#group_concat（分组之后使用）：取出分组后，组内定制的详细信息
</span><span style="color: #0000ff;">select</span> post,group_concat(name) <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">group</span> <span style="color: #0000ff;">by</span><span style="color: #000000;"> post;
</span><span style="color: #0000ff;">select</span> post,group_concat(name,"_SB") <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">group</span> <span style="color: #0000ff;">by</span><span style="color: #000000;"> post;
</span><span style="color: #0000ff;">select</span> post,group_concat(name,": ",salary) <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">group</span> <span style="color: #0000ff;">by</span><span style="color: #000000;"> post;
</span><span style="color: #0000ff;">select</span> post,group_concat(name,":",age,":",sex) <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">group</span> <span style="color: #0000ff;">by</span><span style="color: #000000;"> post;
</span><span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">---------------------------------------+--------------------------------------------------------</span>
<span style="color: #808080;">|</span> post                                    <span style="color: #808080;">|</span> group_concat(name,"_SB")                              <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">---------------------------------------+--------------------------------------------------------</span>
<span style="color: #808080;">|</span> operation                               <span style="color: #808080;">|</span> 程咬铁_SB,程咬铜_SB,程咬银_SB,程咬金_SB,张野_SB         <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span> sale                                    <span style="color: #808080;">|</span> 格格_SB,星星_SB,丁丁_SB,丫丫_SB,歪歪_SB                <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>外交大使                                <span style="color: #808080;">|</span> egon_SB                                               <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">---------------------------------------+--------------------------------------------------------</span>
<span style="color: #000000;"># concat（不分组时用）：自定制取出的结果
</span><span style="color: #0000ff;">select</span> name <span style="color: #0000ff;">as</span> 姓名,salary <span style="color: #0000ff;">as</span> 薪资 <span style="color: #0000ff;">from</span><span style="color: #000000;"> emp;
</span><span style="color: #0000ff;">select</span> concat("NAME: ",name) <span style="color: #0000ff;">as</span> 姓名,concat("SAL: ",salary) <span style="color: #0000ff;">as</span> 薪资 <span style="color: #0000ff;">from</span><span style="color: #000000;"> emp;
</span><span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">----------------+-----------------+</span>
<span style="color: #808080;">|</span> 姓名             <span style="color: #808080;">|</span> 薪资            <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">----------------+-----------------+</span>
<span style="color: #808080;">|</span> NAME: egon       <span style="color: #808080;">|</span> SAL: <span style="color: #800000; font-weight: bold;">7300.33</span>    <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span> NAME: alex       <span style="color: #808080;">|</span> SAL: <span style="color: #800000; font-weight: bold;">1000000.31</span> <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span> NAME: wupeiqi    <span style="color: #808080;">|</span> SAL: <span style="color: #800000; font-weight: bold;">8300.00</span>    <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">----------------+-----------------+</span>
<span style="color: #000000;"># concat_ws (不分组时用)：每个分组结果都用相同的分隔符时使用
</span><span style="color: #0000ff;">select</span> concat_ws(":",name,age,sex,post) <span style="color: #0000ff;">as</span> info <span style="color: #0000ff;">from</span><span style="color: #000000;"> emp;
</span><span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">----------------------------------------------------+</span>
<span style="color: #808080;">|</span> info                                                 <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">----------------------------------------------------+</span>
<span style="color: #808080;">|</span> egon:<span style="color: #800000; font-weight: bold;">18</span>:male:外交大使                               <span style="color: #808080;">|</span>                                    
<span style="color: #808080;">|</span> 程咬金:<span style="color: #800000; font-weight: bold;">18</span>:male:operation                             <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span> 程咬银:<span style="color: #800000; font-weight: bold;">18</span>:female:operation                           <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span> 程咬铜:<span style="color: #800000; font-weight: bold;">18</span>:male:operation                             <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span> 程咬铁:<span style="color: #800000; font-weight: bold;">18</span>:female:operation                           <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">----------------------------------------------------+</span>
<span style="color: #000000;"># 补充as语法
mysql</span><span style="color: #808080;">&gt;</span> <span style="color: #0000ff;">select</span> emp.id,emp.name <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">as</span><span style="color: #000000;"> t1; # 报错
mysql</span><span style="color: #808080;">&gt;</span> <span style="color: #0000ff;">select</span> t1.id,t1.name <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">as</span><span style="color: #000000;"> t1;
# 查询四则运算
</span><span style="color: #0000ff;">select</span> name,salary<span style="color: #808080;">*</span><span style="color: #800000; font-weight: bold;">12</span> <span style="color: #0000ff;">as</span> annual_salary <span style="color: #0000ff;">from</span> emp;</pre>
</div>
<h4 class="md-end-block md-heading"><span class="md-plain">10.93 having过滤</span></h4>
<p class="md-end-block md-p"><span class="md-plain">having的语法格式与where一模一样，只不过having是在分组之后进行的进一步过滤，即where不能用聚合函数，而having是可以用聚合函数的</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">#统计各部门年龄在30岁以上的员工平均工资，并且保留平均工资大于10000的部门
</span><span style="color: #0000ff;">select</span> post,<span style="color: #ff00ff;">avg</span>(salary) <span style="color: #0000ff;">from</span><span style="color: #000000;"> emp
        </span><span style="color: #0000ff;">where</span> age <span style="color: #808080;">&gt;=</span> <span style="color: #800000; font-weight: bold;">30</span>
        <span style="color: #0000ff;">group</span> <span style="color: #0000ff;">by</span><span style="color: #000000;"> post
        </span><span style="color: #0000ff;">having</span> <span style="color: #ff00ff;">avg</span>(salary) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">10000</span><span style="color: #000000;">;
</span><span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">-------+---------------+</span>
<span style="color: #808080;">|</span> post    <span style="color: #808080;">|</span> <span style="color: #ff00ff;">avg</span>(salary)   <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">-------+---------------+</span>
<span style="color: #808080;">|</span> teacher <span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">255450.077500</span> <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">-------+---------------+</span>
<span style="color: #000000;">#强调：having必须在group by后面使用
</span><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">having</span> <span style="color: #ff00ff;">avg</span>(salary) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">10000</span>;#报错</pre>
</div>
<h4 class="md-end-block md-heading"><span class="md-plain">10.94 distinct去重</span></h4>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">select</span> <span style="color: #0000ff;">distinct</span> post <span style="color: #0000ff;">from</span><span style="color: #000000;"> emp;
</span><span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">---------------------------------------+</span>
<span style="color: #808080;">|</span> post                                    <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">---------------------------------------+</span>
<span style="color: #808080;">|</span> 外交大使                               <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span> teacher                                 <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span> sale                                    <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span> operation                               <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">---------------------------------------+  </span><span class="cm-keyword"><span class="cm-keyword"><span class="cm-keyword"><span class="cm-tab"><span class="cm-tab"><span class="cm-tab"><span class="cm-tab"> &nbsp; &nbsp; &nbsp;</span></span></span></span></span></span></span></pre>
</div>
<h4 class="md-end-block md-heading"><span class="md-plain">10.95 order by 排序</span></h4>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">order</span> <span style="color: #0000ff;">by</span> salary (<span style="color: #0000ff;">asc</span><span style="color: #000000;">); #默认升序排
</span><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">order</span> <span style="color: #0000ff;">by</span> salary <span style="color: #0000ff;">desc</span><span style="color: #000000;">; #降序排
</span><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">order</span> <span style="color: #0000ff;">by</span> age <span style="color: #0000ff;">desc</span>,salary <span style="color: #0000ff;">asc</span><span style="color: #000000;">; #先按照age降序排，如果相同再按照薪资升序排
​
# 统计各部门年龄在10岁以上的员工平均工资，并且保留平均工资大于1000的部门，然后对平均工资进行排序
</span><span style="color: #0000ff;">select</span> post,<span style="color: #ff00ff;">avg</span>(salary) <span style="color: #0000ff;">from</span><span style="color: #000000;"> emp
    </span><span style="color: #0000ff;">where</span> age <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">10</span>
    <span style="color: #0000ff;">group</span> <span style="color: #0000ff;">by</span><span style="color: #000000;"> post
    </span><span style="color: #0000ff;">having</span> <span style="color: #ff00ff;">avg</span>(salary) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">1000</span>
    <span style="color: #0000ff;">order</span> <span style="color: #0000ff;">by</span> <span style="color: #ff00ff;">avg</span><span style="color: #000000;">(salary);
</span><span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">---------------------------------------+---------------+</span>
<span style="color: #808080;">|</span> post                                    <span style="color: #808080;">|</span> <span style="color: #ff00ff;">avg</span>(salary)   <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">---------------------------------------+---------------+</span>
<span style="color: #808080;">|</span> sale                                    <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">2600.294000</span> <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>外交大使                                <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">7300.330000</span> <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span> operation                               <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">16800.026000</span> <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span> teacher                                 <span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">151842.901429</span> <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">---------------------------------------+---------------+</span></pre>
</div>
<h4 class="md-end-block md-heading"><span class="md-plain">10.96 limit 限制显示条数</span></h4>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp limit <span style="color: #800000; font-weight: bold;">3</span><span style="color: #000000;">;                      #从头开始只显示3条信息
</span><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">order</span> <span style="color: #0000ff;">by</span> salary <span style="color: #0000ff;">desc</span> limit <span style="color: #800000; font-weight: bold;">1</span><span style="color: #000000;">;   #找到工资最大的一条信息
</span><span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">--+------+------+-----+------------+---------+--------------+------------+--------+-----------+</span>
<span style="color: #808080;">|</span> id <span style="color: #808080;">|</span> name <span style="color: #808080;">|</span> sex  <span style="color: #808080;">|</span> age <span style="color: #808080;">|</span> hire_date  <span style="color: #808080;">|</span> post    <span style="color: #808080;">|</span> post_comment <span style="color: #808080;">|</span> salary     <span style="color: #808080;">|</span> office <span style="color: #808080;">|</span> depart_id <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">--+------+------+-----+------------+---------+--------------+------------+--------+-----------+</span>
<span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">2</span> <span style="color: #808080;">|</span> alex <span style="color: #808080;">|</span> male <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">78</span> <span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">2015</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">03</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">02</span> <span style="color: #808080;">|</span> teacher <span style="color: #808080;">|</span> <span style="color: #0000ff;">NULL</span>         <span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">1000000.31</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">401</span> <span style="color: #808080;">|</span>         <span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">--+------+------+-----+------------+---------+--------------+------------+--------+-----------+</span>
<span style="color: #000000;"># 分页显示
</span><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp limit <span style="color: #800000; font-weight: bold;">0</span>,<span style="color: #800000; font-weight: bold;">5</span>;#从0开始显示5条信息(<span style="color: #800000; font-weight: bold;">1</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">5</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp limit <span style="color: #800000; font-weight: bold;">5</span>,<span style="color: #800000; font-weight: bold;">5</span>;#从5开始显示5条信息(<span style="color: #800000; font-weight: bold;">6</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">10</span>)</pre>
</div>
<h4 class="md-end-block md-heading"><span class="md-plain">10.97 正则表达式</span></h4>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">where</span> name regexp <span style="color: #ff0000;">'</span><span style="color: #ff0000;">^jin.*(n|g)$</span><span style="color: #ff0000;">'</span><span style="color: #000000;">;
</span><span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">--+------------+--------+-----+------------+---------+--------------+----------+--------+</span>
<span style="color: #808080;">|</span> id <span style="color: #808080;">|</span> name  <span style="color: #808080;">|</span> sex  <span style="color: #808080;">|</span> age <span style="color: #808080;">|</span> hire_date  <span style="color: #808080;">|</span> post  <span style="color: #808080;">|</span>post_comment<span style="color: #808080;">|</span> salary  <span style="color: #808080;">|</span> office <span style="color: #808080;">|</span> depart_id <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">--+------------+--------+-----+------------+---------+--------------+----------+--------+</span>
<span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">6</span> <span style="color: #808080;">|</span> jingliyang<span style="color: #808080;">|</span>female<span style="color: #808080;">|</span><span style="color: #800000; font-weight: bold;">18</span><span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">2011</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">02</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">11</span> <span style="color: #808080;">|</span> teacher <span style="color: #808080;">|</span> <span style="color: #0000ff;">NULL</span>    <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">9000.00</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">401</span>   <span style="color: #808080;">|</span>         <span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">7</span> <span style="color: #808080;">|</span> jinxin    <span style="color: #808080;">|</span>male  <span style="color: #808080;">|</span><span style="color: #800000; font-weight: bold;">18</span><span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">1900</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">03</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">01</span> <span style="color: #808080;">|</span> teacher <span style="color: #808080;">|</span> <span style="color: #0000ff;">NULL</span>    <span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">30000.00</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">401</span>   <span style="color: #808080;">|</span>         <span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">--+------------+--------+-----+------------+---------+--------------+----------+--------+</span></pre>
</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>