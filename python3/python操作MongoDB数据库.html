<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修python操作MongoDB数据库' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>python操作MongoDB数据库</center></div><div class='banquan'>原文出处:本文由博客园博主记住我忘记我提供。<br/>
原文连接:https://www.cnblogs.com/nmsghgnv/p/11289316.html</div><br>
    <p>上一篇文章中介绍了怎么用python连接MongoDB数据库，现在写一下python控制MongoDB进行增删改查操作。</p>
<p>首先连接数据库：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;">  pymongo
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 连接数据库</span>
myclient = pymongo.MongoClient(<span style="color: #800000;">"</span><span style="color: #800000;">mongodb://localhost:27017/</span><span style="color: #800000;">"</span><span style="color: #000000;">)
mydb </span>= myclient[<span style="color: #800000;">"</span><span style="color: #800000;">mydb</span><span style="color: #800000;">"</span><span style="color: #000000;">]
mycol </span>= mydb[<span style="color: #800000;">"</span><span style="color: #800000;">col</span><span style="color: #800000;">"</span>]</pre>
</div>
<h2>Python MongoDB增加数据</h2>
<p>插入一条记录：</p>
<div class="cnblogs_code">
<pre><code>x=mycol.insert_one({<span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">刘飞</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">age</span><span style="color: #800000;">"</span>:19<span style="color: #000000;">})
</span><span style="color: #0000ff;">print</span>(x)</pre>
</div>
<p>输出结果：</p>
<div class="cnblogs_code">
<pre><code>&lt;pymongo.results.InsertOneResult object at 0x02A45620&gt;</pre>
</div>
<p><span class="marked">insert_one()&nbsp;方法返回&nbsp;<strong>InsertOneResult</strong>&nbsp;对象，可使用下面方法查看对象所有的属性：</span></p>
<div class="cnblogs_code">
<pre><code>x=mycol.insert_one({<span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">刘飞</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">age</span><span style="color: #800000;">"</span>:19<span style="color: #000000;">})
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(dir(x))<br />
#输出结果
[</span><span style="color: #800000;">'</span><span style="color: #800000;">_InsertOneResult__acknowledged</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">_InsertOneResult__inserted_id</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">_WriteResult__acknowledged</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__class__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__delattr__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__dir__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__doc__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__eq__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__format__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__ge__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__getattribute__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__gt__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__hash__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__init__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__init_subclass__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__le__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__lt__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__module__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__ne__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__new__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__reduce__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__reduce_ex__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__repr__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__setattr__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__sizeof__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__slots__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__str__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__subclasshook__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">_raise_if_unacknowledged</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">acknowledged</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">inserted_id</span><span style="color: #800000;">'</span>]</pre>
</div>
<p>该对象包含&nbsp;<strong>inserted_id</strong>&nbsp;属性，它是插入文档的&nbsp;<strong>id</strong>&nbsp;值。如果我们在插入文档时没有指定&nbsp;<strong>_id</strong>，MongoDB 会为每个文档添加一个唯一的&nbsp;<strong>id</strong>。</p>
<div class="cnblogs_code">
<pre><code>x=mycol.insert_one({<span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">刘飞</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">age</span><span style="color: #800000;">"</span>:19<span style="color: #000000;">})
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(x.inserted_id)<br />
</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
5d43d8189f5e382760e25acf</pre>
</div>
<p>插入多个文档：</p>
<p>集合中插入多个文档使用&nbsp;<span class="marked">insert_many()&nbsp;方法，该方法的第一参数是字典列表。</span></p>
<div class="cnblogs_code">
<pre><code>mylist =<span style="color: #000000;"> [
  { </span><span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">Taobao</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">alexa</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">100</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">url</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">https://www.taobao.com</span><span style="color: #800000;">"</span><span style="color: #000000;"> },
  { </span><span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">QQ</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">alexa</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">101</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">url</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">https://www.qq.com</span><span style="color: #800000;">"</span><span style="color: #000000;"> },
  { </span><span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">Facebook</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">alexa</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">10</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">url</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">https://www.facebook.com</span><span style="color: #800000;">"</span><span style="color: #000000;"> },
  { </span><span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">知乎</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">alexa</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">103</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">url</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">https://www.zhihu.com</span><span style="color: #800000;">"</span><span style="color: #000000;"> },
  { </span><span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">Github</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">alexa</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">109</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">url</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">https://www.github.com</span><span style="color: #800000;">"</span><span style="color: #000000;"> }
]
x </span>=<span style="color: #000000;"> mycol.insert_many(mylist)
 
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 输出插入的所有文档对应的 _id 值</span>
<span style="color: #0000ff;">print</span><span style="color: #000000;">(x.inserted_ids)

</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
[ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43d9069f5e38272c69fc07</span><span style="color: #800000;">'</span>), ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43d9069f5e38272c69fc08</span><span style="color: #800000;">'</span>), ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43d9069f5e38272c69fc09</span><span style="color: #800000;">'</span>), ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43d9069f5e38272c69fc0a</span><span style="color: #800000;">'</span>), ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43d9069f5e38272c69fc0b</span><span style="color: #800000;">'</span>)]</pre>
</div>
<p><span class="marked">insert_many()&nbsp;方法返回&nbsp;<strong>InsertManyResult</strong>&nbsp;对象，该对象包含&nbsp;<strong>inserted_ids</strong>&nbsp;属性，该属性保存着所有插入文档的&nbsp;<strong>id</strong>&nbsp;值。</span></p>
<p>执行完以上查找，我们可以在命令终端，查看数据是否已插入:</p>
<p><img src="./images/python操作MongoDB数据库0.png" alt="" /></p>
<p>插入指定id的多个文档：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">先删除之前插入的所有文档</span>
x=<span style="color: #000000;">mycol.delete_many({})
</span><span style="color: #0000ff;">print</span>(x.deleted_count, <span style="color: #800000;">"</span><span style="color: #800000;">个文档已删除</span><span style="color: #800000;">"</span><span style="color: #000000;">)<br />
</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
11 个文档已删除</pre>
</div>
<div class="cnblogs_code">
<pre><code>mylist =<span style="color: #000000;"> [
    {</span><span style="color: #800000;">"</span><span style="color: #800000;">_id</span><span style="color: #800000;">"</span>: 1, <span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">RUNOOB</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">cn_name</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">菜鸟教程</span><span style="color: #800000;">"</span><span style="color: #000000;">},
    {</span><span style="color: #800000;">"</span><span style="color: #800000;">_id</span><span style="color: #800000;">"</span>: 2, <span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">Google</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">address</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">Google 搜索</span><span style="color: #800000;">"</span><span style="color: #000000;">},
    {</span><span style="color: #800000;">"</span><span style="color: #800000;">_id</span><span style="color: #800000;">"</span>: 3, <span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">Facebook</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">address</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">脸书</span><span style="color: #800000;">"</span><span style="color: #000000;">},
    {</span><span style="color: #800000;">"</span><span style="color: #800000;">_id</span><span style="color: #800000;">"</span>: 4, <span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">Taobao</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">address</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">淘宝</span><span style="color: #800000;">"</span><span style="color: #000000;">},
    {</span><span style="color: #800000;">"</span><span style="color: #800000;">_id</span><span style="color: #800000;">"</span>: 5, <span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">Zhihu</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">address</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">知乎</span><span style="color: #800000;">"</span><span style="color: #000000;">}
]

x </span>=<span style="color: #000000;"> mycol.insert_many(mylist)

</span><span style="color: #008000;">#</span><span style="color: #008000;"> 输出插入的所有文档对应的 _id 值</span>
<span style="color: #0000ff;">print</span><span style="color: #000000;">(x.inserted_ids)

</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
[1, 2, 3, 4, 5]</pre>
</div>
<p>执行完以上查找，我们可以在命令终端，查看数据是否已插入:</p>
<p><img src="./images/python操作MongoDB数据库1.png" alt="" /></p>
<p>&nbsp;</p>
<h2>&nbsp;Python MongoDB 删除数据</h2>
<p>&nbsp;删除单个文档：</p>
<p>我们可以使用&nbsp;<span class="marked">delete_one()&nbsp;方法来删除一个文档，该方法第一个参数为查询对象，指定要删除哪些数据。</span></p>
<p><span class="marked">本文使用的测试数据如下：</span></p>
<p>&nbsp;<img src="./images/python操作MongoDB数据库2.png" alt="" /></p>
<div class="cnblogs_code">
<pre><code>x=mycol.delete_one({<span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">Google</span><span style="color: #800000;">"</span><span style="color: #000000;">})
</span><span style="color: #0000ff;">print</span>(x.deleted_count,<span style="color: #800000;">'</span><span style="color: #800000;">个文档已删除</span><span style="color: #800000;">'</span><span style="color: #000000;">)

</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
1 个文档已删除</pre>
</div>
<p>删除多个文档：</p>
<p>我们可以使用&nbsp;<span class="marked">delete_many()&nbsp;方法来删除多个文档，该方法第一个参数为查询对象，指定要删除哪些数据。</span></p>
<p><span class="marked">删除所有 name 字段中以 F 开头的文档:</span></p>
<div class="cnblogs_code">
<pre><code>myquery = {<span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>: {<span style="color: #800000;">"</span><span style="color: #800000;">$regex</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">^F</span><span style="color: #800000;">"</span><span style="color: #000000;">}}
x </span>=<span style="color: #000000;"> mycol.delete_many(myquery)
</span><span style="color: #0000ff;">print</span>(x.deleted_count, <span style="color: #800000;">"</span><span style="color: #800000;">个文档已删除</span><span style="color: #800000;">"</span><span style="color: #000000;">)

</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
2 个文档已删除</pre>
</div>
<p>删除集合中所有的文档:</p>
<div class="cnblogs_code">
<pre><code>x =<span style="color: #000000;"> mycol.delete_many({})
</span><span style="color: #0000ff;">print</span>(x.deleted_count, <span style="color: #800000;">"</span><span style="color: #800000;">个文档已删除</span><span style="color: #800000;">"</span><span style="color: #000000;">)

</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
7 个文档已删除</pre>
</div>
<p>删除集合：</p>
<div class="cnblogs_code">
<pre><code>mycol.drop()</pre>
</div>
<p>如果删除成功 drop() 返回 true，如果删除失败(集合不存在)则返回 false。</p>
<p>我们使用以下命令在终端查看集合是否已删除：</p>
<p><img src="./images/python操作MongoDB数据库3.png" alt="" /></p>
<h2>Python MongoDB 修改文档</h2>
<p>修改一条记录</p>
<p>在 MongoDB 中使用&nbsp;<span class="marked">update_one()&nbsp;方法修改文档中的记录。该方法第一个参数为查询的条件，第二个参数为要修改的字段。如果查找到的匹配数据多余一条，则只会修改第一条。</span></p>
<p>&nbsp;本文使用的测试数据如下</p>
<p><img src="./images/python操作MongoDB数据库4.png" alt="" /></p>
<p>将 alexa 字段的值 10000 改为 12345:</p>
<div class="cnblogs_code">
<pre><code>mycol.update_one({<span style="color: #800000;">"</span><span style="color: #800000;">alexa</span><span style="color: #800000;">"</span>:<span style="color: #800000;">'</span><span style="color: #800000;">100</span><span style="color: #800000;">'</span>},{<span style="color: #800000;">'</span><span style="color: #800000;">$set</span><span style="color: #800000;">'</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">alexa</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">123456</span><span style="color: #800000;">"</span><span style="color: #000000;">}})
</span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> mycol.find():
    </span><span style="color: #0000ff;">print</span><span style="color: #000000;">(i)

</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
{<span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bcd</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Taobao</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000; background-color: #ffff00;">123456</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.taobao.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bce</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">QQ</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">101</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.qq.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bcf</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Facebook</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">10</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.facebook.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bd0</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">知乎</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">103</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.zhihu.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bd1</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Github</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">109</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.github.com</span><span style="color: #800000;">'</span>}</pre>
</div>
<p>修改多条记录</p>
<p>使用&nbsp;<span class="marked">update_many()。</span>查找所有以&nbsp;<strong>F</strong>&nbsp;开头的&nbsp;<strong>name</strong>&nbsp;字段，并将匹配到所有记录的&nbsp;<strong>alexa</strong>&nbsp;字段修改为&nbsp;<strong>123</strong>：</p>
<div class="cnblogs_code">
<pre><code>x=mycol.update_many({<span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">$regex</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">^F</span><span style="color: #800000;">"</span>}},{<span style="color: #800000;">"</span><span style="color: #800000;">$set</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">alexa</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">123</span><span style="color: #800000;">"</span><span style="color: #000000;">}})
</span><span style="color: #0000ff;">print</span>(x.modified_count,<span style="color: #800000;">'</span><span style="color: #800000;">个文档已修改</span><span style="color: #800000;">'</span><span style="color: #000000;">)

</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
1 个文档已修改</pre>
</div>
<h2>Python MongoDB 查询文档</h2>
<p>MongoDB 中使用了 find 和 find_one 方法来查询集合中的数据，它类似于 SQL 中的 SELECT 语句。</p>
<p>本文使用的测试数据如下</p>
<p><img src="./images/python操作MongoDB数据库5.png" alt="" /></p>
<p>使用&nbsp;<span class="marked">find_one()&nbsp;方法来查询集合中的一条数据。</span></p>
<div class="cnblogs_code">
<pre><code>x =<span style="color: #000000;"> mycol.find_one()
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(x)

</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
{<span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bcd</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Taobao</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">123456</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.taobao.com</span><span style="color: #800000;">'</span>}</pre>
</div>
<p><span class="marked">find()&nbsp;方法可以查询集合中的所有数据，类似 SQL 中的&nbsp;<span class="marked">SELECT *&nbsp;操作。</span></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> mycol.find():
    </span><span style="color: #0000ff;">print</span><span style="color: #000000;">(i)

</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
{<span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bcd</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Taobao</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">123456</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.taobao.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bce</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">QQ</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">101</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.qq.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bcf</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Facebook</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">123</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.facebook.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bd0</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">知乎</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">103</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.zhihu.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bd1</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Github</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">109</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.github.com</span><span style="color: #800000;">'</span>}</pre>
</div>
<p>查询指定字段的数据</p>
<p>我们可以使用 find() 方法来查询指定字段的数据，将要返回的字段对应值设置为 1。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> mycol.find({},{<span style="color: #800000;">"</span><span style="color: #800000;">_id</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>:1,<span style="color: #800000;">"</span><span style="color: #800000;">url</span><span style="color: #800000;">"</span>:1<span style="color: #000000;">}):
    </span><span style="color: #0000ff;">print</span><span style="color: #000000;">(i)

</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
{<span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Taobao</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.taobao.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">QQ</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.qq.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Facebook</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.facebook.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">知乎</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.zhihu.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Github</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.github.com</span><span style="color: #800000;">'</span>}</pre>
</div>
<p>除了 _id 你不能在一个对象中同时指定 0 和 1，如果你设置了一个字段为 0，则其他都为 1，反之亦然。</p>
<p>以下实例除了 alexa 字段外，其他都返回：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> mycol.find({},{<span style="color: #800000;">"</span><span style="color: #800000;">alexa</span><span style="color: #800000;">"</span><span style="color: #000000;">:0}):
    </span><span style="color: #0000ff;">print</span><span style="color: #000000;">(i)

</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
{<span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bcd</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Taobao</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.taobao.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bce</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">QQ</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.qq.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bcf</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Facebook</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.facebook.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bd0</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">知乎</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.zhihu.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bd1</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Github</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.github.com</span><span style="color: #800000;">'</span>}</pre>
</div>
<p><strong>以下代码同时指定了 0 和 1 则会报错</strong>：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> mycol.find({},{<span style="color: #800000;">"</span><span style="color: #800000;">alexa</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>:1<span style="color: #000000;">}):
    </span><span style="color: #0000ff;">print</span><span style="color: #000000;">(i)

</span><span style="color: #008000;">#</span><span style="color: #008000;">报错信息</span>
pymongo.errors.OperationFailure: Projection cannot have a mix of inclusion <span style="color: #0000ff;">and</span> exclusion.</pre>
</div>
<p>根据指定条件查询</p>
<p>在&nbsp;<span class="marked">find()&nbsp;中设置参数来过滤数据。</span>查找 name 字段为 "QQ" 的数据：</p>
<div class="cnblogs_code">
<pre><code>mydoc = mycol.find({<span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">QQ</span><span style="color: #800000;">"</span><span style="color: #000000;">})
</span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> mydoc:
    </span><span style="color: #0000ff;">print</span><span style="color: #000000;">(i)

</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
{<span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bce</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">QQ</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">101</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.qq.com</span><span style="color: #800000;">'</span>}</pre>
</div>
<p>高级查询</p>
<p>查询的条件语句中，我们还可以使用修饰符。</p>
<p>读取 name 字段中第一个字母 ASCII 值大于 "H" 的数据，大于的修饰符条件为&nbsp;<span class="marked">{"$gt": "H"}&nbsp;:</span></p>
<div class="cnblogs_code">
<pre><code>mydoc = mycol.find({<span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">$gt</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">H</span><span style="color: #800000;">"</span><span style="color: #000000;">}})
</span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> mydoc:
    </span><span style="color: #0000ff;">print</span><span style="color: #000000;">(i)

</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
{<span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bcd</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Taobao</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">123456</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.taobao.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bce</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">QQ</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">101</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.qq.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bd0</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">知乎</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">103</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.zhihu.com</span><span style="color: #800000;">'</span>}</pre>
</div>
<p>使用正则表达式查询</p>
<p>正则表达式修饰符只用于搜索字符串的字段。</p>
<p>读取 name 字段中第一个字母为 "T" 的数据，正则表达式修饰符条件为&nbsp;<span class="marked">{"$regex": "^T"}&nbsp;:</span></p>
<div class="cnblogs_code">
<pre><code>mydoc = mycol.find({<span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">$regex</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">^T</span><span style="color: #800000;">"</span><span style="color: #000000;">}})
</span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> mydoc:
    </span><span style="color: #0000ff;">print</span><span style="color: #000000;">(i)

</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
{<span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bcd</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Taobao</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">123456</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.taobao.com</span><span style="color: #800000;">'</span>}</pre>
</div>
<p>返回指定条数记录</p>
<p>如果我们要对查询结果设置指定条数的记录可以使用&nbsp;<span class="marked">limit()&nbsp;方法，该方法只接受一个数字参数。</span></p>
<div class="cnblogs_code">
<pre><code>mydoc = mycol.find().limit(3<span style="color: #000000;">)
</span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> mydoc:
    </span><span style="color: #0000ff;">print</span><span style="color: #000000;">(i)

</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
{<span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bcd</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Taobao</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">123456</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.taobao.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bce</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">QQ</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">101</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.qq.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bcf</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Facebook</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">123</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.facebook.com</span><span style="color: #800000;">'</span>}</pre>
</div>
<h2>排序</h2>
<p><span class="marked">sort()&nbsp;方法可以指定升序或降序排序。</span></p>
<p><span class="marked">sort()&nbsp;方法第一个参数为要排序的字段，第二个字段指定排序规则，<strong>1</strong>&nbsp;为升序，<strong>-1</strong>&nbsp;为降序，默认为升序。</span></p>
<p>对字段 alexa 按升序排序：</p>
<div class="cnblogs_code">
<pre><code>mydoc = mycol.find().sort(<span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> mydoc:
    </span><span style="color: #0000ff;">print</span><span style="color: #000000;">(i)

</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
{<span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bce</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">QQ</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">101</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.qq.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bd0</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">知乎</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">103</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.zhihu.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bd1</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Github</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">109</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.github.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bcf</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Facebook</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">123</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.facebook.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bcd</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Taobao</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">123456</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.taobao.com</span><span style="color: #800000;">'</span>}</pre>
</div>
<p>对字段 alexa 按降序排序：</p>
<div class="cnblogs_code">
<pre><code>mydoc = mycol.find().sort(<span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>,-1<span style="color: #000000;">)
</span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> mydoc:
    </span><span style="color: #0000ff;">print</span><span style="color: #000000;">(i)

</span><span style="color: #008000;">#</span><span style="color: #008000;">输出结果</span>
{<span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bcd</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Taobao</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">123456</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.taobao.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bcf</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Facebook</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">123</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.facebook.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bd1</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">Github</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">109</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.github.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bd0</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">知乎</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">103</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.zhihu.com</span><span style="color: #800000;">'</span><span style="color: #000000;">}
{</span><span style="color: #800000;">'</span><span style="color: #800000;">_id</span><span style="color: #800000;">'</span>: ObjectId(<span style="color: #800000;">'</span><span style="color: #800000;">5d43e5ff9f5e381df4a69bce</span><span style="color: #800000;">'</span>), <span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">QQ</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">alexa</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">101</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">url</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">https://www.qq.com</span><span style="color: #800000;">'</span>}</pre>
</div>
<p>&nbsp;</p>
<p>done</p>
<p>参考资料：https://www.runoob.com/python3/python-mongodb.html</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>