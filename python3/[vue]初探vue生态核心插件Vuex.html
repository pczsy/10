<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修[vue]初探vue生态核心插件Vuex' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>[vue]初探vue生态核心插件Vuex</center></div><div class='banquan'>原文出处:本文由博客园博主rencoo提供。<br/>
原文连接:https://www.cnblogs.com/rencoo/p/12049831.html</div><br>
    <div id="output_wrapper_id" class="output_wrapper" style="font-size: 16px; color: #3e3e3e; line-height: 1.6; word-spacing: 0px; letter-spacing: 0px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;">
<h4 id="hvuex" style="color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px; font-weight: bold; font-size: 1.2em;"><span style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px;">为什么会有 Vuex 这个东西 ？</span></h4>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">现代前端框架主要解决的是 <strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">事件 -&gt; 状态 -&gt; UI</strong> 将传统前端在两个过程的代码剥离出来，变得更加容易维护；</p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">vue的声明式渲染，解决了 <strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">状态 和 UI</strong> 的同步问题，从而使我们不需要由于状态发生改变去写大量的命令式改变 dom 的代码。</p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">而类似于 vuex 这类状态管理的库，则解决了 <strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">事件 -&gt; 状态</strong> 这个过程的维护问题。这类库所做的事情就是管理从 <strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">事件源映射到状态变化</strong> 这个过程(将这个映射过程<strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">从视图组件中剥离出来</strong>，组织好这一部分的代码，在组件外部进行状态的管理)</p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">具体表现就是一个全局的数据中心 store 配置，每个组件进行更新的时候就通知数据中心，数据中心改变后，再去触发每个调用它的组件进行更新(这种更新是响应式的)；几个核心概念就是 <code>mutations</code>里的方法可以直接 <code>mutate</code>store 中的状态，并且 <code>mutation</code> 过程必须同步的，需要通过 <code>commit</code> 去触发；而 <code>actions</code> 则允许异步的操作，通过 <code>commit</code> 去触发 <code>mutation</code> ，达到间接修改 <code>store</code>的目的，<code>action</code> 本身需要通过 <code>disptch</code>去触发。</p>
<h4 id="hvuex-1" style="color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px; font-weight: bold; font-size: 1.2em;"><span style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px;">Vuex与全局对象的区别</span></h4>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">其实，<code>vuex</code> 与全局对象有一定的共同之处，那就是状态会被全局共享，无论是嵌套多少组件&hellip;</p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">每一个 Vuex 应用的核心就是 store（仓库）。&ldquo;store&rdquo;基本上就是一个容器，它包含着你的应用中大部分的<strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">状态 (state)</strong>。Vuex 和单纯的全局对象有以下两点不同：</p>
<ol style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; padding-left: 32px; list-style-type: decimal;">
<li style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; margin-bottom: 0.5em;">Vuex 的状态存储是 <strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">响应式</strong> 的。当 Vue 组件从 store 中读取状态的时候，若 store 中的状态发生变化，那么相应的组件也会相应地得到 **高效更新 **。</li>
<li style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; margin-bottom: 0.5em;">你不能直接改变 store 中的状态。改变 store 中的状态的唯一途径就是显式地<strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">提交 (commit) mutation</strong>。这样使得我们可以方便地<strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">跟踪每一个状态的变化</strong>，从而让我们能够实现一些工具帮助我们更好地了解我们的应用。</li>
</ol>
<h4 id="hvuex-2" style="color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px; font-weight: bold; font-size: 1.2em;"><span style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px;"><strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">Vuex常见的应用场景</strong></span></h4>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;"><strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">管理状态与共享状态</strong></p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">应用简单时，可以使用 <code>prop</code>与 <code>event</code> 来完成 <strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">父子组件</strong> 的通信。使用 <code>global event bus(event bus)</code>来实现 <strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">简单的非父子组件之间的跨组件</strong> 通信。但对于 **多层级组件嵌套 **等较为复杂的场景，使用 <code>vuex</code> 能更好地应对。(使用 event bus 的缺点是当状态较复杂，调用组件非常多，要挨个依次通知所有组件更新；每个组件对这个组件进行的状态更新都要通知监听该事件的所有组件；这样会变得非常复杂)</p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;"><code>vuex</code> 状态管理模型，拥有一个统一的数据中心Store，Store用来维护状态数据；每个组件进行更新的时候就通知数据中心，数据中心改变后，再去触发每一个调用它的组件进行更新(相当于由数据中心来统筹状态变化以及状态变化的分发，而不是由每个<code>vue</code>组件直接去操作state)</p>
<img style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; display: block; margin: 0px auto; max-width: 100%;" title="图解" src="./images/[vue]初探vue生态核心插件Vuex0.png" alt="图解" />图解
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;"><code>vuex</code> 是通过将 <code>state</code> 作为数据中心，各个组件 <strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">共享 state</strong> 来实现跨组件通信的， 此时的<strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">数据完全独立于组件</strong>。(点击不同模块的操作，不再需要去发送乱七八糟的事件, 只是去调用事件中心里的 <code>mutation</code> 动作, 从而实现模块间共享状态的功能)</p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">需要构建一个中大型单页应用时，很可能会考虑如何更好地 <strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">在组件外部</strong> 管理状态</p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">vuex更多地用于解决 **跨组件通信 **(多层嵌套组件之间的通信问题)以及作为 <strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">数据中心集中式存储数据</strong> (管理应用中错综复杂的状态关系)</p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">vuex <strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">作为数据存储中心</strong></p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;"><code>vuex</code>的 <code>state</code>在单页应用的开发中本身具有一个 <strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">数据库</strong> 的作用，可以将组件用到的数据存储在 <code>state</code>中，并在 <code>actions</code>中封装数据读写的逻辑。目前主要有两种数据会使用 <code>vuex</code>进行管理</p>
<ol style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; padding-left: 32px; list-style-type: decimal;">
<li style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; margin-bottom: 0.5em;">组件之间 <strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">全局共享</strong> 的数据</li>
<li style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; margin-bottom: 0.5em;"><span style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px;">通过后端异步请求的数据</span></li>
</ol>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">实际项目开发中更多的是用到第二种，即把通过后端异步请求的数据都纳入 <code>vuex</code> 状态管理，在 <code>actions</code> 中封装数据的增删改查等逻辑，这样可以在一定程度上对前端的逻辑代码进行分层，<strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">使组件中的代码更多地关注页面交互与数据渲染等 <span style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; text-decoration: underline;">视图层</span> 的逻辑</strong>，而异步请求与状态数据的持久化等则交由 <code>vuex</code> 管理</p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">一般全局数据，会使用到 <code>vuex</code> 来管理。比如 <strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">用户数据，系统数据</strong> 等，这些数据很多组件中都会使用，我们当然可以每次使用的时候都去请求，但是出于程序员的&ldquo;洁癖&rdquo;、&ldquo;抠&rdquo;等等优点，还是希望一次请求，到处使用。</p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">这时候很自然的想到存储在 <code>localStorage</code> 中，但是有个问题是，这些数据可能会变，如果没能及时 <strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">同步</strong> 的话，就会用到不正确的数据，即使做了数据同步，但是 <code>localStorage</code> 中的数据不是响应式的，不能自动更新使用到这些数据的地方。这时候就想要开始使用 <code>vuex</code>了。</p>
<h4 id="hvuex-3" style="color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px; font-weight: bold; font-size: 1.2em;"><span style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px;">Vuex代码的组织方式</span></h4>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">与 <code>vue-router</code> 类似，有非模块化写法与模块化写法(其实无论何种写法本质上是一样的，目的就是导出一份 <code>router</code>或者 <code>store</code> 的配置数据)</p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">以管理 <code>count</code> 与 用户信息 <code>userinfo</code> 为例，介绍 <code>vuex</code>代码的组织方式</p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">核心概念 state，getter，mutation，action，module</p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;"><code>vuex</code> 需要遵守的规则</p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">应用层级的状态应该集中到 <strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">单个</strong> <code>store</code> 对象中</p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;"><code>mutation</code>是直接操作state的方法(<strong style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold;">唯一</strong>能改变状态的方法)，过程要求必须同步</p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;"><code>action</code> 通过<code>commit</code>去触发<code>mutation</code>，从而间接修改状态，优点是允许异步逻辑，</p>
<h5 id="h" style="color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px; font-weight: bold; font-size: 1em;"><span style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px;">非模块化写法</span></h5>
<pre><code><code class="javascript language-javascript hljs" style="overflow-wrap: break-word; margin: 0px 2px; line-height: 18px; font-size: 14px; font-weight: normal; word-spacing: 0px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; overflow-x: auto; padding: 0.5em; background: #fdf6e3; color: #657b83; white-space: pre !important; word-wrap: normal !important; word-break: normal !important; overflow: auto !important; display: -webkit-box !important;"><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;1.安装&nbsp;vuex</span><br /><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;2.在入口文件中引入</span><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;main.js</span><br /><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">import</span>&nbsp;Vuex&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">from</span>&nbsp;<span class="hljs-string" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">'vuex'</span><br /><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;3.Vue使用&nbsp;vuex&nbsp;插件</span><br />Vue.use(Vuex)<br /><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;4.生成数据管理中心&nbsp;store</span><br /><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">const</span>&nbsp;store&nbsp;=&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">new</span>&nbsp;Vuex.Store({<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">state</span>:&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">userinfo</span>:&nbsp;<span class="hljs-literal" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">null</span>,&nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;需要给定初始值</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count:&nbsp;<span class="hljs-number" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">0</span><br />&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;直接通过mutation方法来mutate操作state;&nbsp;只能以同步的方式;&nbsp;mutation方法需要通过commit来触发</span><br />&nbsp;&nbsp;&nbsp;&nbsp;mutations:&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">userinfo</span>:&nbsp;<span class="hljs-function" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">function</span>&nbsp;(<span class="hljs-params" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;">state,&nbsp;payload</span>)&nbsp;</span>{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state.userinfo&nbsp;=&nbsp;options<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.userinfo&nbsp;=&nbsp;<span class="hljs-built_in" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #dc322f; word-wrap: inherit !important; word-break: inherit !important;">JSON</span>.stringify(state.userinfo)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">increment</span>:&nbsp;<span class="hljs-function" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">function</span>&nbsp;(<span class="hljs-params" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;">state,&nbsp;payload</span>)&nbsp;</span>{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state.count&nbsp;+=&nbsp;payload.amount<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;通过commit触发mutations里的mutation方法,&nbsp;以此间接修改&nbsp;state;&nbsp;允许异步操作；action方法需要通过dispatch来触发</span><br />&nbsp;&nbsp;&nbsp;&nbsp;actions:&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">increment</span>:&nbsp;<span class="hljs-function" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">function</span>&nbsp;(<span class="hljs-params" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;">context,&nbsp;payload</span>)&nbsp;</span>{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.commit(<span class="hljs-string" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">'increment'</span>,&nbsp;payload)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">incrementAsync</span>:&nbsp;<span class="hljs-function" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">function</span>&nbsp;(<span class="hljs-params" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;">context</span>)&nbsp;</span>{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;异步请求数据</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setTimeout(<span class="hljs-function" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-params" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;">()</span>&nbsp;=&gt;</span>&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">var</span>&nbsp;amount&nbsp;=&nbsp;<span class="hljs-number" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">10</span>;&nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;模拟异步请求得到数据</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.commit(<span class="hljs-string" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">'increment'</span>,&nbsp;{&nbsp;amount&nbsp;})<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;<span class="hljs-number" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">1000</span>)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">async</span>&nbsp;userinfo&nbsp;(context)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">let</span>&nbsp;response&nbsp;=&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">await</span>&nbsp;getUserInfo()&nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;异步请求后端数据&nbsp;方法需要&nbsp;import</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">if</span>&nbsp;(response.ok)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">let</span>&nbsp;json&nbsp;=&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">await</span>&nbsp;response.json()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.commit(<span class="hljs-string" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">'userinfo'</span>,&nbsp;json)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}，<br />&nbsp;&nbsp;&nbsp;&nbsp;getters:&nbsp;{<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;处理、过滤数据</span><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />})<br /><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;5.通过&nbsp;store&nbsp;配置参数注入状态管理，从而任何组件可通过&nbsp;this.$store&nbsp;访问状态中心</span><br /><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">new</span>&nbsp;Vue({<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">el</span>:&nbsp;<span class="hljs-string" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">'#app'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;store,&nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;(*)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;render:&nbsp;<span class="hljs-function" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">function</span>&nbsp;(<span class="hljs-params" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;">h</span>)&nbsp;</span>{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">return</span>&nbsp;h(App)<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />})<br /></code></pre>
<h5 id="h-1" style="color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px; font-weight: bold; font-size: 1em;"><span style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px;">模块化写法</span></h5>
<pre><code><code class="javascript language-javascript hljs" style="overflow-wrap: break-word; margin: 0px 2px; line-height: 18px; font-size: 14px; font-weight: normal; word-spacing: 0px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; overflow-x: auto; padding: 0.5em; background: #fdf6e3; color: #657b83; white-space: pre !important; word-wrap: normal !important; word-break: normal !important; overflow: auto !important; display: -webkit-box !important;"><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;1.安装vuex</span><br /><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;2.引入</span><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;store/index.js</span><br /><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">import</span>&nbsp;Vue&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">from</span>&nbsp;<span class="hljs-string" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">'vue'</span><br /><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">import</span>&nbsp;Vuex&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">from</span>&nbsp;<span class="hljs-string" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">'vuex'</span><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;import&nbsp;...</span><br /><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;3.Vue使用&nbsp;vuex&nbsp;插件</span><br />Vue.use(Vuex)<br /><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;4.分模块生成数据管理中心</span><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;配置&nbsp;userinfo&nbsp;状态模块&nbsp;(还能再单独拆出一个文件，然后import进来)</span><br /><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">const</span>&nbsp;moduleA&nbsp;=&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">state</span>:&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">userinfo</span>:&nbsp;<span class="hljs-literal" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">null</span>&nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;需要初始化响应式数据</span><br />&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">mutations</span>:&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">userinfo</span>:&nbsp;<span class="hljs-function" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">function</span>&nbsp;(<span class="hljs-params" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;">state,&nbsp;options</span>)&nbsp;</span>{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state.userinfo&nbsp;=&nbsp;options<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localstorage.userinfo&nbsp;=&nbsp;<span class="hljs-built_in" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #dc322f; word-wrap: inherit !important; word-break: inherit !important;">JSON</span>.stringify(state.userinfo)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">actions</span>:&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">async</span>&nbsp;userinfo&nbsp;(context)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">async</span>&nbsp;userinfo&nbsp;(context)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">let</span>&nbsp;response&nbsp;=&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">await</span>&nbsp;response.json()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">if</span>&nbsp;(response.ok)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">let</span>&nbsp;json&nbsp;=&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">await</span>&nbsp;response.json()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.commit(<span class="hljs-string" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">'userinfo'</span>,&nbsp;json)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">getters</span>:&nbsp;{<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;处理、过滤数据</span><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;配置&nbsp;count&nbsp;状态模块&nbsp;(还能再单独拆出一个文件，然后import进来)</span><br /><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">const</span>&nbsp;moduleB&nbsp;=&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">state</span>:&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">count</span>:&nbsp;<span class="hljs-number" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">1</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">mutations</span>:&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment：<span class="hljs-function" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">function</span>&nbsp;(<span class="hljs-params" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;">state,&nbsp;payload</span>)&nbsp;</span>{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state.count&nbsp;+=&nbsp;payload<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">actions</span>:&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">increment</span>:&nbsp;<span class="hljs-function" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">function</span>&nbsp;(<span class="hljs-params" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;">context,&nbsp;payload</span>)&nbsp;</span>{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.comit(<span class="hljs-string" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">'increment'</span>,&nbsp;payload)&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">incrementAsync</span>:&nbsp;<span class="hljs-function" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">function</span>&nbsp;(<span class="hljs-params" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;">context</span>)&nbsp;</span>{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;异步请求数据</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setTimeout(<span class="hljs-function" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-params" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;">()</span>&nbsp;=&gt;</span>&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">var</span>&nbsp;amount&nbsp;=&nbsp;<span class="hljs-number" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">10</span>;&nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;模拟异步请求得到数据</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.commit(<span class="hljs-string" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">'increment'</span>,&nbsp;{&nbsp;amount&nbsp;})<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;<span class="hljs-number" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">1000</span>)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">getters</span>:&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doubleCount&nbsp;(state)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">return</span>&nbsp;state.count&nbsp;*&nbsp;<span class="hljs-number" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">2</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;5.导出一份&nbsp;store&nbsp;的配置</span><br /><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">export</span>&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">default</span>&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">new</span>&nbsp;Vuex.Store({<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">modules</span>:&nbsp;{&nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;这里与非模块化写法有点不一样；原来整个对象是一份配置...</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a:&nbsp;moduleA,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">b</span>:&nbsp;moduleB,<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />})<br /><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;store.state.a&nbsp;//&nbsp;-&gt;&nbsp;moduleA&nbsp;的状态</span><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;store.state.b&nbsp;//&nbsp;-&gt;&nbsp;moduleB&nbsp;的状态</span><br /><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;6.在根脚本&nbsp;main.js&nbsp;中引入&nbsp;store&nbsp;配置</span><br /><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">import</span>&nbsp;store&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">from</span>&nbsp;<span class="hljs-string" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">'./store'</span><br />...<br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;并通过&nbsp;store&nbsp;配置参数注入状态管理，从而任何组件可通过&nbsp;this.$store&nbsp;访问状态中心</span><br /><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">new</span>&nbsp;Vue({<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">el</span>:&nbsp;<span class="hljs-string" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">'#app'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;router,<br />&nbsp;&nbsp;&nbsp;&nbsp;store,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">render</span>:&nbsp;<span class="hljs-function" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;"><span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">function</span>&nbsp;(<span class="hljs-params" style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; word-wrap: inherit !important; word-break: inherit !important;">h</span>)&nbsp;</span>{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">return</span>&nbsp;h(App);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />});<br /></code></pre>
<h4 id="h-2" style="color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px; font-weight: bold; font-size: 1.2em;"><span style="font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px;">在不同组件中使用或操作状态</span></h4>
<pre><code><code class="javascript language-javascript hljs" style="overflow-wrap: break-word; margin: 0px 2px; line-height: 18px; font-size: 14px; font-weight: normal; word-spacing: 0px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; overflow-x: auto; padding: 0.5em; background: #fdf6e3; color: #657b83; white-space: pre !important; word-wrap: normal !important; word-break: normal !important; overflow: auto !important; display: -webkit-box !important;"><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;根组件</span><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;App.vue</span><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;在生命周期中触发全局共享数据的获取</span><br />...<br />mounted&nbsp;()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">if</span>&nbsp;(!<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">this</span>.$store.state.userinfo)&nbsp;{&nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;this.$store.state.a.userinfo&nbsp;模块化写法的话</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">this</span>.$store.dispatch(<span class="hljs-string" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">'userinfo'</span>)<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;使用&nbsp;state&nbsp;的数据</span><br />computed:&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;userinfo&nbsp;()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">return</span>&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">this</span>.$store.state.userinfo<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;return&nbsp;this.$store.state.a.userinfo&nbsp;//&nbsp;模块化写法的话</span><br />&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;count&nbsp;()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">return</span>&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">this</span>.$store.state.count<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;return&nbsp;this.$store.state.b.count&nbsp;//&nbsp;模块化写法的话</span><br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></code></pre>
<pre><code><code class="javascript language-javascript hljs" style="overflow-wrap: break-word; margin: 0px 2px; line-height: 18px; font-size: 14px; font-weight: normal; word-spacing: 0px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; overflow-x: auto; padding: 0.5em; background: #fdf6e3; color: #657b83; white-space: pre !important; word-wrap: normal !important; word-break: normal !important; overflow: auto !important; display: -webkit-box !important;"><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;子组件</span><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;NavBar.vue</span><br />...<br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;改变&nbsp;state&nbsp;的数据</span><br />methods:&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;使用&nbsp;commit&nbsp;触发&nbsp;mutations&nbsp;中的&nbsp;mutation&nbsp;方法，直接修改&nbsp;state&nbsp;中的数据</span><br />&nbsp;&nbsp;&nbsp;&nbsp;addOne&nbsp;()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">this</span>.$store.commit(<span class="hljs-string" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">'increment'</span>,&nbsp;{&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">amount</span>:&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">this</span>.price&nbsp;})<br />&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;使用&nbsp;dispatch&nbsp;触发&nbsp;actions&nbsp;中的&nbsp;action&nbsp;方法；异步修改&nbsp;state&nbsp;中的数据</span><br />&nbsp;&nbsp;&nbsp;&nbsp;addTenAsync&nbsp;()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">this</span>.$store.dispatch(<span class="hljs-string" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">'incrementAsync'</span>)<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;使用&nbsp;state&nbsp;的数据</span><br />computed:&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;userinfo&nbsp;()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">return</span>&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">this</span>.$store.state.userinfo<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;return&nbsp;this.$store.state.a.userinfo&nbsp;//&nbsp;模块化写法的话</span><br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></code></pre>
<pre><code><code class="javascript language-javascript hljs" style="overflow-wrap: break-word; margin: 0px 2px; line-height: 18px; font-size: 14px; font-weight: normal; word-spacing: 0px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; overflow-x: auto; padding: 0.5em; background: #fdf6e3; color: #657b83; white-space: pre !important; word-wrap: normal !important; word-break: normal !important; overflow: auto !important; display: -webkit-box !important;"><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;路由页面组件</span><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;Manage.vue</span><br />...<br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;改变&nbsp;state&nbsp;的数据</span><br />methods:&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;addTwo&nbsp;()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">this</span>.$store.commit(<span class="hljs-string" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #2aa198; word-wrap: inherit !important; word-break: inherit !important;">'increment'</span>,&nbsp;{&nbsp;<span class="hljs-attr" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #b58900; word-wrap: inherit !important; word-break: inherit !important;">amount</span>:&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">this</span>.price&nbsp;})<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /><span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;使用&nbsp;state&nbsp;的数据</span><br />computed:&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;count&nbsp;()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">return</span>&nbsp;<span class="hljs-keyword" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #859900; word-wrap: inherit !important; word-break: inherit !important;">this</span>.$store.state.count<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: #93a1a1; word-wrap: inherit !important; word-break: inherit !important;">//&nbsp;return&nbsp;this.$store.state.b.count&nbsp;//&nbsp;模块化写法的话</span><br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />},<br /></code></pre>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">总之，使用了 <code>vuex</code> 来管理状态，点击不同模块的操作，不再需要去发送乱七八糟的事件, 只是去调用事件中心里的 <code>mutation</code> 动作, 从而实现模块间共享状态的功能；修改一处，全局共享(无论是组件还是路由页面组件都能同步)</p>
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">最后，再看看 <code>vuex</code> 官网的这张说明图，是不是更加清晰了呢！</p>
<img style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; display: block; margin: 0px auto; max-width: 100%;" title="虚线绿框里即vuex做的事" src="./images/[vue]初探vue生态核心插件Vuex1.png" alt="虚线绿框里即vuex做的事" />虚线绿框里即vuex做的事
<p style="font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.5em 0px;">-项目地址- <a style="font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; text-decoration: none; color: #1e6bb8; overflow-wrap: break-word;" href="https://github.com/rencoo/blog-demo/tree/master/vuex-demo">vuex-demo</a></p>
</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>