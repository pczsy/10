<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修30段极简Python代码：这些小技巧你都Get了么' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>30段极简Python代码：这些小技巧你都Get了么</center></div><div class='banquan'>原文出处:本文由博客园博主python学习者0提供。<br/>
原文连接:https://www.cnblogs.com/xxpythonxx/p/11580363.html</div><br>
    <p>学 Python 怎样才最快，当然是实战各种小项目，只有自己去想与写，才记得住规则。本文是 30 个极简任务，初学者可以尝试着自己实现；本文同样也是 30 段代码，Python 开发者也可以看看是不是有没想到的用法。</p>
<p>Python 是机器学习最广泛采用的编程语言，它最重要的优势在于编程的易用性。如果读者对基本的 Python 语法已经有一些了解，那么这篇文章可能会给你一些启发。作者简单概览了 30 段代码，它们都是平常非常实用的技巧，我们只要花几分钟就能从头到尾浏览一遍。</p>
<p><strong>1. 重复元素判定</strong></p>
<p>以下方法可以检查给定列表是不是存在重复元素，它会使用 set() 函数来移除所有重复元素。</p>
<pre><code><code>def all_unique(lst):
    return len(lst) == len(set(lst))


x = [1,1,2,2,3,2,3,4,5,6]
y = [1,2,3,4,5]
all_unique(x) # False
all_unique(y) # True</code></pre>
<p><strong>2. 字符元素组成判定</strong></p>
<p>检查两个字符串的组成元素是不是一样的。</p>
<pre><code><code>from collections import Counter

def anagram(first, second):
    return Counter(first) == Counter(second)


anagram(&quot;abcd3&quot;, &quot;3acdb&quot;) # True</code></pre>
<p><strong>3. 内存占用</strong></p>
<p>下面的代码块可以检查变量 variable 所占用的内存。</p>
<pre><code><code>import sys 

variable = 30 
print(sys.getsizeof(variable)) # 24</code></pre>
<p><strong>4. 字节占用</strong></p>
<p>下面的代码块可以检查字符串占用的字节数。</p>
<pre><code><code>def byte_size(string):
    return(len(string.encode(&#39;utf-8&#39;)))


byte_size(&#39;😀&#39;) # 4
byte_size(&#39;Hello World&#39;) # 11   </code></pre>
<p><strong>5. 打印 N 次字符串</strong></p>
<p>该代码块不需要循环语句就能打印 N 次字符串。</p>
<pre><code><code>n = 2; 
s =&quot;Programming&quot;; 

print(s * n);
# ProgrammingProgramming  </code></pre>
<p><strong>6. 大写第一个字母</strong></p>
<p>以下代码块会使用 title() 方法，从而大写字符串中每一个单词的首字母。</p>
<pre><code><code>s = &quot;programming is awesome&quot;

print(s.title())
# Programming Is Awesome</code></pre>
<p><strong>7. 分块</strong></p>
<p>给定具体的大小，定义一个函数以按照这个大小切割列表。</p>
<pre><code><code>from math import ceil

def chunk(lst, size):
    return list(
        map(lambda x: lst[x * size:x * size + size],
            list(range(0, ceil(len(lst) / size)))))

chunk([1,2,3,4,5],2)
# [[1,2],[3,4],5]</code></pre>
<p><strong>8. 压缩</strong></p>
<p>这个方法可以将布尔型的值去掉，例如（False，None，0，“”），它使用 filter() 函数。</p>
<pre><code><code>def compact(lst):
    return list(filter(bool, lst))


compact([0, 1, False, 2, &#39;&#39;, 3, &#39;a&#39;, &#39;s&#39;, 34])
# [ 1, 2, 3, &#39;a&#39;, &#39;s&#39;, 34 ]</code></pre>
<p><strong>9. 解包</strong></p>
<p>如下代码段可以将打包好的成对列表解开成两组不同的元组。</p>
<pre><code><code>array = [[&#39;a&#39;, &#39;b&#39;], [&#39;c&#39;, &#39;d&#39;], [&#39;e&#39;, &#39;f&#39;]]
transposed = zip(*array)
print(transposed)
# [(&#39;a&#39;, &#39;c&#39;, &#39;e&#39;), (&#39;b&#39;, &#39;d&#39;, &#39;f&#39;)]</code></pre>
<p><strong>10. 链式对比</strong></p>
<p>我们可以在一行代码中使用不同的运算符对比多个不同的元素。</p>
<pre><code><code>a = 3
print( 2 &lt; a &lt; 8) # True
print(1 == a &lt; 2) # False</code></pre>
<p><strong>11. 逗号连接</strong></p>
<p>下面的代码可以将列表连接成单个字符串，且每一个元素间的分隔方式设置为了逗号。</p>
<pre><code><code>hobbies = [&quot;basketball&quot;, &quot;football&quot;, &quot;swimming&quot;]

print(&quot;My hobbies are: &quot; + &quot;, &quot;.join(hobbies))
# My hobbies are: basketball, football, swimming</code></pre>
<p><strong>12. 元音统计</strong></p>
<p>以下方法将统计字符串中的元音 (‘a’, ‘e’, ‘i’, ‘o’, ‘u’) 的个数，它是通过正则表达式做的。</p>
<pre><code><code>import re

def count_vowels(str):
    return len(len(re.findall(r&#39;[aeiou]&#39;, str, re.IGNORECASE)))

count_vowels(&#39;foobar&#39;) # 3
count_vowels(&#39;gym&#39;) # 0</code></pre>
<p><strong>13. 首字母小写</strong></p>
<p>如下方法将令给定字符串的第一个字符统一为小写。</p>
<pre><code><code>def decapitalize(string):
    return str[:1].lower() + str[1:]


decapitalize(&#39;FooBar&#39;) # &#39;fooBar&#39;
decapitalize(&#39;FooBar&#39;) # &#39;fooBar&#39;</code></pre>
<p><strong>14. 展开列表</strong></p>
<p>该方法将通过递归的方式将列表的嵌套展开为单个列表。</p>
<pre><code><code>def spread(arg):
    ret = []
    for i in arg:
        if isinstance(i, list):
            ret.extend(i)
        else:
            ret.append(i)
    return ret

def deep_flatten(lst):
    result = []
    result.extend(
        spread(list(map(lambda x: deep_flatten(x) if type(x) == list else x, lst))))
    return result


deep_flatten([1, [2], [[3], 4], 5]) # [1,2,3,4,5]</code></pre>
<p><strong>15. 列表的差</strong></p>
<p>该方法将返回第一个列表的元素，其不在第二个列表内。如果同时要反馈第二个列表独有的元素，还需要加一句 set_b.difference(set_a)。</p>
<pre><code><code>def difference(a, b):
    set_a = set(a)
    set_b = set(b)
    comparison = set_a.difference(set_b)
    return list(comparison)


difference([1,2,3], [1,2,4]) # [3]</code></pre>
<p><strong>16. 通过函数取差</strong></p>
<p>如下方法首先会应用一个给定的函数，然后再返回应用函数后结果有差别的列表元素。</p>
<pre><code><code>def difference_by(a, b, fn):
    b = set(map(fn, b))
    return [item for item in a if fn(item) not in b]


from math import floor
difference_by([2.1, 1.2], [2.3, 3.4],floor) # [1.2]
difference_by([{ &#39;x&#39;: 2 }, { &#39;x&#39;: 1 }], [{ &#39;x&#39;: 1 }], lambda v : v[&#39;x&#39;])
# [ { x: 2 } ]</code></pre>
<p><strong>17. 链式函数调用</strong></p>
<p>你可以在一行代码内调用多个函数。</p>
<pre><code><code>def add(a, b):
    return a + b

def subtract(a, b):
    return a - b

a, b = 4, 5
print((subtract if a &gt; b else add)(a, b)) # 9 </code></pre>
<p><strong>18. 检查重复项</strong></p>
<p>如下代码将检查两个列表是不是有重复项。</p>
<pre><code><code>def has_duplicates(lst):
    return len(lst) != len(set(lst))


x = [1,2,3,4,5,5]
y = [1,2,3,4,5]
has_duplicates(x) # True
has_duplicates(y) # False</code></pre>
<p><strong>19. 合并两个字典</strong></p>
<p>下面的方法将用于合并两个字典。</p>
<pre><code><code>def merge_two_dicts(a, b):
    c = a.copy()   # make a copy of a 
    c.update(b)    # modify keys and values of a with the ones from b
    return c


a = { &#39;x&#39;: 1, &#39;y&#39;: 2}
b = { &#39;y&#39;: 3, &#39;z&#39;: 4}
print(merge_two_dicts(a, b))
# {&#39;y&#39;: 3, &#39;x&#39;: 1, &#39;z&#39;: 4}</code></pre>
<p>在 Python 3.5 或更高版本中，我们也可以用以下方式合并字典：</p>
<pre><code><code>def merge_dictionaries(a, b)
   return {**a, **b}


a = { &#39;x&#39;: 1, &#39;y&#39;: 2}
b = { &#39;y&#39;: 3, &#39;z&#39;: 4}
print(merge_dictionaries(a, b))
# {&#39;y&#39;: 3, &#39;x&#39;: 1, &#39;z&#39;: 4}</code></pre>
<p><strong>20. 将两个列表转化为字典</strong></p>
<p>如下方法将会把两个列表转化为单个字典。</p>
<pre><code><code>def to_dictionary(keys, values):
    return dict(zip(keys, values))


keys = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]    
values = [2, 3, 4]
print(to_dictionary(keys, values))
# {&#39;a&#39;: 2, &#39;c&#39;: 4, &#39;b&#39;: 3}</code></pre>
<p><strong>21. 使用枚举</strong></p>
<p>我们常用 For 循环来遍历某个列表，同样我们也能枚举列表的索引与值。</p>
<pre><code><code>list = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]
for index, element in enumerate(list): 
    print(&quot;Value&quot;, element, &quot;Index &quot;, index, )

# (&#39;Value&#39;, &#39;a&#39;, &#39;Index &#39;, 0)
# (&#39;Value&#39;, &#39;b&#39;, &#39;Index &#39;, 1)
#(&#39;Value&#39;, &#39;c&#39;, &#39;Index &#39;, 2)
# (&#39;Value&#39;, &#39;d&#39;, &#39;Index &#39;, 3)    </code></pre>
<p><strong>22. 执行时间</strong></p>
<p>如下代码块可以用来计算执行特定代码所花费的时间。</p>
<pre><code><code>import time

start_time = time.time()

a = 1
b = 2
c = a + b
print(c) #3

end_time = time.time()
total_time = end_time - start_time
print(&quot;Time: &quot;, total_time)

# (&#39;Time: &#39;, 1.1205673217773438e-05)  </code></pre>
<p><strong>23.Try else</strong></p>
<p>我们在使用 try/except 语句的时候也可以加一个 else 子句，如果没有触发错误的话，这个子句就会被运行。</p>
<pre><code><code>try:
    2*3
except TypeError:
    print(&quot;An exception was raised&quot;)
else:
    print(&quot;Thank God, no exceptions were raised.&quot;)

#Thank God, no exceptions were raised.</code></pre>
<p><strong>24. 元素频率</strong></p>
<p>下面的方法会根据元素频率取列表中最常见的元素。</p>
<pre><code><code>def most_frequent(list):
    return max(set(list), key = list.count)


list = [1,2,1,2,3,2,1,4,2]
most_frequent(list)  </code></pre>
<p><strong>25. 回文序列</strong></p>
<p>以下方法会检查给定的字符串是不是回文序列，它首先会把所有字母转化为小写，并移除非英文字母符号。最后，它会对比字符串与反向字符串是否相等，相等则表示为回文序列。</p>
<pre><code><code>def palindrome(string):
    from re import sub
    s = sub(&#39;[\W_]&#39;, &#39;&#39;, string.lower())
    return s == s[::-1]


palindrome(&#39;taco cat&#39;) # True</code></pre>
<p><strong>26. 不使用 if-else 的计算子</strong></p>
<p>这一段代码可以不使用条件语句就实现加减乘除、求幂操作，它通过字典这一数据结构实现：</p>
<pre><code><code>import operator
action = {
    &quot;+&quot;: operator.add,
    &quot;-&quot;: operator.sub,
    &quot;/&quot;: operator.truediv,
    &quot;*&quot;: operator.mul,
    &quot;**&quot;: pow
}
print(action[&#39;-&#39;](50, 25)) # 25</code></pre>
<p><strong>27.Shuffle</strong></p>
<p>该算法会打乱列表元素的顺序，它主要会通过 Fisher-Yates 算法对新列表进行排序：</p>
<pre><code><code>from copy import deepcopy
from random import randint

def shuffle(lst):
    temp_lst = deepcopy(lst)
    m = len(temp_lst)
    while (m):
        m -= 1
        i = randint(0, m)
        temp_lst[m], temp_lst[i] = temp_lst[i], temp_lst[m]
    return temp_lst


foo = [1,2,3]
shuffle(foo) # [2,3,1] , foo = [1,2,3]</code></pre>
<p><strong>28. 展开列表</strong></p>
<p>将列表内的所有元素，包括子列表，都展开成一个列表。</p>
<pre><code><code>def spread(arg):
    ret = []
    for i in arg:
        if isinstance(i, list):
            ret.extend(i)
        else:
            ret.append(i)
    return ret


spread([1,2,3,[4,5,6],[7],8,9]) # [1,2,3,4,5,6,7,8,9]</code></pre>
<p><strong>29. 交换值</strong></p>
<p>不需要额外的操作就能交换两个变量的值。</p>
<pre><code><code>def swap(a, b):
  return b, a

a, b = -1, 14
swap(a, b) # (14, -1)
spread([1,2,3,[4,5,6],[7],8,9]) # [1,2,3,4,5,6,7,8,9]</code></pre>
<p><strong>30. 字典默认值</strong></p>
<p>通过 Key 取对应的 Value 值，可以通过以下方式设置默认值。如果 get() 方法没有设置默认值，那么如果遇到不存在的 Key，则会返回 None。</p>
<pre><code><code>d = {&#39;a&#39;: 1, &#39;b&#39;: 2}

print(d.get(&#39;c&#39;, 3)) # 3</code></pre>
<p>参考链接：<a href="https://towardsdatascience.com/30-helpful-python-snippets-that-you-can-learn-in-30-seconds-or-less-69bb49204172" class="uri">https://towardsdatascience.com/30-helpful-python-snippets-that-you-can-learn-in-30-seconds-or-less-69bb49204172</a></p>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>