<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Python基础（八）' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Python基础（八）</center></div><div class='banquan'>原文出处:本文由博客园博主天狼大大提供。<br/>
原文连接:https://www.cnblogs.com/tianlangdada/p/11538462.html</div><br>
    <h1 id="今日主要内容">今日主要内容</h1>
<ul>
<li>文件操作
<ul>
<li>文件路径</li>
<li>打开方式</li>
<li>编码方式</li>
<li>文件句柄</li>
</ul></li>
<li>文件修改</li>
</ul>
<h1 id="一文件操作">一、文件操作</h1>
<h2 id="一文件操作的用途">（一）文件操作的用途</h2>
<ul>
<li>我们运行代码时产生的数据和记录，存储在内存中，当程序运行完，产生的数据和记录就会被释放掉，如果我们需要这个数据或记录以便下次使用，那就需要用文件存储起来（如商城的购买记录等）</li>
<li>文件操作用于：<strong>持久化存储数据</strong></li>
<li>文件操作的三步骤：
<ul>
<li>打开文件</li>
<li>操作文件</li>
<li>关闭文件</li>
</ul></li>
</ul>
<h2 id="二文件操作的格式">（二）文件操作的格式</h2>
<ul>
<li><p><code>f = open(文件路径, 打开方式, 编码方式)</code></p>
<pre><code><code>f = open(&quot;text.txt&quot;, mode=&quot;r&quot;, encoding=&quot;utf-8&quot;)
&quot;&quot;&quot;文件操作&quot;&quot;&quot;
f.close()</code></pre></li>
<li><p><code>with open(文件路径, 打开方式, 编码方式) as f:</code></p>
<ul>
<li>以此方式打开文件不需要手动关闭文件，自动关闭</li>
<li>可以打开多个文件
<ul>
<li><code>with open(...) as f1, open(...) as f2:</code></li>
</ul></li>
</ul>
<pre><code><code>with open(&quot;text.txt&quot;, mode=&quot;r&quot;, encoding=&quot;utf-8&quot;) as f:
  &quot;&quot;&quot;文件操作&quot;&quot;&quot;</code></pre></li>
</ul>
<h2 id="三文件路径">（三）文件路径</h2>
<ul>
<li>文件路径：文件所在的位置</li>
<li>分为 <strong>绝对路径</strong> 和 <strong>相对路径</strong></li>
</ul>
<ol>
<li><p>绝对路径：</p>
<ul>
<li>从磁盘根目录一直到文件名的路径</li>
</ul>
<pre><code><code>path = &quot;C:\Users\11582\Desktop\笔记\day08&quot;</code></pre></li>
<li><p>相对路径</p>
<ul>
<li>同一个文件夹下的文件，如果在同一个文件夹，那么相对路径就是这个文件名，如果在上一层文件夹则需要：<code>../</code></li>
</ul>
<pre><code><code>path = &quot;../装饰器/测试.txt&quot;</code></pre>
<p><img src="./images/Python基础（八）0.png" /></p></li>
<li><p>转义：</p>
<ul>
<li>用两个<code>\\</code>代表
</li>
<li><p>路径前加一个r</p>
<pre><code><code>path = r&quot;C:\Users\11582\Desktop\笔记\day08&quot;</code></pre></li>
</ul></li>
</ol>
<h2 id="四打开方式">（四）打开方式</h2>
<ul>
<li><p>mode可以省略，直接填入打开方式，若不填默认为只读&quot;r&quot;</p></li>
<li><table>
<thead>
<tr class="header">
<th><strong>r</strong></th>
<th><strong>只读</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>w</strong></td>
<td><strong>只写（清空写）</strong></td>
</tr>
<tr class="even">
<td><strong>a</strong></td>
<td><strong>追加（追加写）</strong></td>
</tr>
<tr class="odd">
<td><strong>rb</strong></td>
<td><strong>以字节方式打开文件用于只读</strong></td>
</tr>
<tr class="even">
<td><strong>wb</strong></td>
<td><strong>以字节方式打开文件用于只写（清空写）</strong></td>
</tr>
<tr class="odd">
<td><strong>ab</strong></td>
<td><strong>以字节方式打开文件用于追加（追加写）</strong></td>
</tr>
<tr class="even">
<td><strong>r+</strong></td>
<td><strong>读写</strong></td>
</tr>
<tr class="odd">
<td><strong>w+</strong></td>
<td><strong>写读（清空写）</strong></td>
</tr>
<tr class="even">
<td><strong>a+</strong></td>
<td><strong>追加写读（追加写）</strong></td>
</tr>
<tr class="odd">
<td><strong>r+b</strong></td>
<td><strong>以字节方式打开文件用于读写</strong></td>
</tr>
<tr class="even">
<td><strong>w+b</strong></td>
<td><strong>以字节方式打开文件用于写读（清空写）</strong></td>
</tr>
<tr class="odd">
<td><strong>a+b</strong></td>
<td><strong>以字节方式打开文件用于追加（追加写） </strong></td>
</tr>
</tbody>
</table></li>
</ul>
<ol>
<li><p><strong>mode=&quot;r&quot;</strong></p>
<ul>
<li>以只读方式打开文件</li>
<li>默认参数为只读&quot;r&quot;</li>
<li>文件读取得到的是字符串</li>
</ul>
<pre><code><code>f = open(&quot;text.txt&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;)
s = f.read()
f.close()
print(s)  # 打印文件内容</code></pre></li>
<li><p><strong>mode=&quot;w&quot;</strong></p>
<ul>
<li>以只写方式打开文件</li>
<li>文件打开时清空文件，之后写入内容</li>
<li>若文件不存在创建文件</li>
<li>只能写入字符串</li>
</ul>
<pre><code><code>f = open(&quot;text.txt&quot;, &quot;w&quot;, encoding=&quot;utf-8&quot;)
f.write(&quot;文件操作&quot;)
f.flush()
f.close()  # 写入&quot;文件操作&quot;</code></pre></li>
<li><p><strong>mode=&quot;a&quot;</strong></p>
<ul>
<li>以追加方式打开文件，可以在文件末尾追加写入内容</li>
</ul>
<pre><code><code>f = open(&quot;text.txt&quot;, &quot;a&quot;, encoding=&quot;utf-8&quot;)
f.write(&quot;文件操作&quot;)
f.flush()
f.close()  # 在文件末尾写入&quot;文件操作&quot;</code></pre></li>
<li><p><strong>mode=&quot;rb&quot;</strong></p>
<ul>
<li>以字节方式打开文件用于只读</li>
<li>一般用于打开非文本文件，如图片、音频、视频等</li>
<li>以&quot;rb&quot;方式打开文件不能输入编码方式，输入会报错</li>
</ul>
<pre><code><code>f = open(&quot;LOL.jpg&quot;, &quot;rb&quot;)
s = f.read()
f.close()
print(s)  # 打印文件内容(二进制码)
</code></pre></li>
<li><p><strong>mode=&quot;wb&quot;</strong></p>
<ul>
<li>以字节方式打开文件用于只写</li>
<li>文件打开时清空文件，之后写入内容</li>
<li>若文件不存在创建文件</li>
<li>只能写入字符串</li>
</ul>
<pre><code><code>f = open(&quot;LOL.jpg&quot;, &quot;rb&quot;)
s = f.read()
f.close()

f = open(&quot;皮肤.png&quot;, &quot;wb&quot;)
f.write(s)
f.flush()
f.close()
</code></pre></li>
<li><p><strong>mode=&quot;ab&quot;</strong></p>
<ul>
<li>以字节方式打开文件用于追加，可以在文件末尾追加写入内容</li>
</ul>
<pre><code><code>f = open(&quot;LOL.jpg&quot;, &quot;rb&quot;)
s = f.read()
f.close()

f = open(&quot;LOL.jpg&quot;, &quot;ab&quot;)
f.write(s)
f.flush()
f.close()
</code></pre></li>
<li><p><strong>mode=&quot;r+&quot;</strong></p>
<ul>
<li>以读写方式打开文件，先读后写</li>
<li>无论读到哪个字符，写都从文件最后开始写入</li>
<li>若先写入，则会覆盖文件不会清空，按照对应字节数覆盖</li>
</ul>
<pre><code><code>f = open(&quot;text.txt&quot;, &quot;r+&quot;, encoding=&quot;utf-8&quot;)
s = f.read()
f.write(&quot;文件操作&quot;)  # 在文件末尾追加&quot;文件操作&quot;
f.flush()
f.close()
print(s)  
</code></pre>
<pre><code><code>f = open(&quot;text.txt&quot;, &quot;r+&quot;, encoding=&quot;utf-8&quot;)
f.write(&quot;123&quot;)  # 将文件中的&quot;文&quot;替换成&quot;123&quot;  一个中文对应三个字节
f.flush()
f.close()
</code></pre></li>
<li><p><strong>mode=&quot;w+&quot;</strong></p>
<ul>
<li>以写读方式打开文件</li>
<li>因为打开的时候清空文件，无论先写后读，还是先读后写，都无法读到内容，所以一般很少用</li>
</ul>
<pre><code><code>f = open(&quot;text.txt&quot;, &quot;w+&quot;, encoding=&quot;utf-8&quot;)
f.write(&quot;文件操作&quot;)
f.flush()
f.close()
</code></pre></li>
<li><p><strong>mode=&quot;a+&quot;</strong></p>
<ul>
<li>以追加写读方式打开文件</li>
<li>在文件末尾追加</li>
</ul>
<pre><code><code>f = open(&quot;text.txt&quot;, &quot;a+&quot;, encoding=&quot;utf-8&quot;)
s.seek(0)
s = f.read()
f.write(&quot;文件操作&quot;)
f.flush()
f.close()
</code></pre></li>
<li><p><strong>mode=&quot;r+b&quot;</strong></p>
<ul>
<li>以字节方式打开文件用于读写</li>
</ul></li>
<li><p><strong>mode=&quot;w+b&quot;</strong></p>
<ul>
<li>以字节方式打开文件用于写读</li>
</ul></li>
<li><p><strong>mode=&quot;a+b&quot;</strong></p>
<ul>
<li>以字节方式打开文件用于追加写读</li>
</ul></li>
</ol>
<h2 id="五编码方式">（五）编码方式</h2>
<ul>
<li>编码方式决定文件的读写以何种方式进行编码</li>
<li>windows使用的编码方式是GBK（终端）</li>
<li>Pycharm使用的是编码方式是UTF-8</li>
<li>打开方式所有以<strong>字节打开</strong>打开的都不能填入编码方式</li>
</ul>
<h2 id="六文件句柄">（六）文件句柄</h2>
<ul>
<li><p>用来操作文件的媒介，文件操作的所有方法都针对于文件句柄</p></li>
<li><p>文件句柄是一个迭代器，可以进行for循环</p></li>
<li><table>
<thead>
<tr class="header">
<th><strong>f.read()</strong></th>
<th><strong>读取全部内容</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>f.readline()</strong></td>
<td><strong>读取一行内容</strong></td>
</tr>
<tr class="even">
<td><strong>f.readlines()</strong></td>
<td><strong>读取全部内容</strong></td>
</tr>
<tr class="odd">
<td><strong>f.close()</strong></td>
<td><strong>关闭文件</strong></td>
</tr>
<tr class="even">
<td><strong>f.write()</strong></td>
<td><strong>写入内容</strong></td>
</tr>
<tr class="odd">
<td><strong>f.flush()</strong></td>
<td><strong>刷新内容</strong></td>
</tr>
<tr class="even">
<td><strong>f.seek()</strong></td>
<td><strong>移动光标</strong></td>
</tr>
<tr class="odd">
<td><strong>f.tell()</strong></td>
<td><strong>获取光标位置</strong></td>
</tr>
<tr class="even">
<td><strong>f.truncate()</strong></td>
<td><strong>截断文件</strong></td>
</tr>
</tbody>
</table></li>
</ul>
<ol>
<li><p><strong>f.read()</strong></p>
<ul>
<li>读取文件全部内容</li>
<li>弊端：如果文件过大，导致内存崩溃</li>
<li><code>read(n)</code>方法可填入参数n，读取n个字符</li>
</ul>
<pre><code><code>f = open(&quot;text.txt&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;)
s = f.read(3)  # 读取前3个字符
s1 = f.read()  # 读取剩余全部内容
f.close()
</code></pre></li>
<li><p><strong>f.readline()</strong></p>
<ul>
<li>读取文件一行内容</li>
<li>末尾带一个换行符，可以利用<code>strip()</code>删除</li>
</ul>
<pre><code><code>f = open(&quot;text.txt&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;)
s = f.readline()  # 读取文件一行内容
f.close()
</code></pre></li>
<li><p><strong>f.readlines()</strong></p>
<ul>
<li>读取文件全部内容，将每一行的内容放在一个列表中</li>
<li>每一行内容为一个字符串，末尾带一个换行符</li>
</ul>
<pre><code><code>f = open(&quot;text.txt&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;)
s = f.readlines()  # 读取文件全部内容，得到一个列表
f.close()
</code></pre></li>
</ol>
<ul>
<li>注意：文件读取的结果为字符串类型</li>
</ul>
<ol>
<li><p><strong>f.close()</strong></p>
<ul>
<li>关闭文件</li>
<li>文件句柄在操作完一定要关闭</li>
</ul>
<pre><code><code>f = open(&quot;text.txt&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;)
s = f.read()  
f.close()  # 关闭文件句柄
</code></pre></li>
<li><p><strong>f.write()</strong></p>
<ul>
<li>向文件中写入内容</li>
<li>若文件存在，先清空文件后写入（执行open的时候就已经清空文件了）</li>
<li>若文件不存在，新建文件后写入</li>
</ul>
<pre><code><code>f = open(&quot;text.txt&quot;, &quot;w&quot;, encoding=&quot;utf-8&quot;)
f.write(&quot;文件操作&quot;)  # 写入&quot;文件操作&quot;
f.flush()
f.close()  
</code></pre></li>
</ol>
<ul>
<li>注意：文件只能写入字符串，写入其他类型数据会报错</li>
</ul>
<ol>
<li><p><strong>f.flush()</strong></p>
<ul>
<li>刷新缓冲区，立刻写入磁盘</li>
<li>延申：缓冲区与缓存
<ul>
<li>缓冲区：
<ul>
<li>首先缓冲区是内存空间的一部分，在内存空间中预留了一定的存储空间，这些空间用来暂时存储输入或输出的数据</li>
<li>缓冲区的存在是因为硬件间存在速度差（比如内存和CPU之间、CPU和硬盘之间）高速硬件会等待低速硬件，这时需要一个缓冲区来平衡</li>
</ul></li>
<li>缓存：
<ul>
<li>缓存存在于CPU中，由于CPU运行速度远大于内存的速度，为了避免频繁的向内存读取数据，将一部分数据存在缓存中，CPU需要使用的时候不需要再访问内存</li>
</ul></li>
<li>总结：缓冲区偏重于写，缓存偏重于读</li>
</ul></li>
</ul>
<pre><code><code>f = open(&quot;text.txt&quot;, &quot;w&quot;, encoding=&quot;utf-8&quot;)
f.write(&quot;文件操作&quot;)
f.flush()  # 刷新缓冲区
f.close()  
</code></pre></li>
<li><p><strong>f.seek()</strong></p>
<ul>
<li>移动光标，文件的读写依靠光标进行</li>
<li><code>seek()</code>方法有两个参数：
<ul>
<li>第一个参数为移动到的位置</li>
<li>第二个参数为光标从那个位置开始移动
<ul>
<li>0：同开头开始移动</li>
<li>1：从当前位置移动</li>
<li>2：从结尾开始移动</li>
</ul></li>
<li>当第二个参数不为0时，第一个参数必须为0</li>
</ul></li>
<li>光标移动的单位为字节，如果文本为中文，移动一个字符需要移动三个字节</li>
</ul>
<pre><code><code>f = open(&quot;text.txt&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;)
f.read()
f.seek(0)  # 光标移动到开头
f.read()
f.close()
</code></pre></li>
<li><p><strong>f.tell()</strong></p>
<ul>
<li>获取光标当前位置</li>
</ul>
<pre><code><code>f = open(&quot;text.txt&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;)
f.read()
f.seek(0)  # 光标移动到开头
s1 = f.tell()  # 开头位置
f.read()
s2 = f.tell()  # 结尾位置
f.close()
</code></pre></li>
<li><p><strong>f.truncate()</strong></p>
<ul>
<li>截断文件，删除光标后面所有内容</li>
<li>截断文件之前必须要移动光标，否以无法截断</li>
</ul>
<pre><code><code>f = open(&quot;text.txt&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;)
f.read()
f.seek(3)  
f.truncate()  # 第三个字符后面的内容全部被删除
f.close()
</code></pre></li>
</ol>
<h1 id="二文件修改">二、文件修改</h1>
<ul>
<li><p>文件修改只能将原文件内容读取到内存中，将信息修改完毕之后，写到新的文件中，将原文件删除，并将新文件重命名成原文件的名字</p></li>
<li><p>需要导入os模块用来删除文件和重命名文件</p>
<pre><code><code>import os

with open(&quot;text.txt&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f1,\
  open(&quot;text副本.txt&quot;, &quot;w&quot;, encoding=&quot;utf-8&quot;) as f2:
  for line in f1:
      new_line = line.replace(&quot;旧内容&quot;, &quot;新内容&quot;)
      f2.write(new_line)
os.remove(&quot;text.txt&quot;)  # 删除原文件
os.rename(&quot;text副本.txt&quot;, &quot;text.txt&quot;)  # 重名命成原文件
</code></pre></li>
</ul>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>