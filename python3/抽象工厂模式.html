<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='ç”µè„‘,ç”µè„‘è®²è§£,ç”µè„‘æŠ€æœ¯,ç¼–ç¨‹,ç”µè„‘æ•…éšœç»´ä¿®æŠ½è±¡å·¥å‚æ¨¡å¼' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>é¦–é¡µ</a></li>
</div><div onclick='hidden1()' >åˆ†äº«</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>æŠ½è±¡å·¥å‚æ¨¡å¼</center></div><div class='banquan'>åŸæ–‡å‡ºå¤„:æœ¬æ–‡ç”±åšå®¢å›­åšä¸»æµ·å‘æä¾›ã€‚<br/>
åŸæ–‡è¿æ¥:https://www.cnblogs.com/haixiang/p/12055272.html</div><br>
    <hr />
<p>ğŸ’›åŸæ–‡åœ°å€ä¸º<a href="https://www.cnblogs.com/haixiang/p/12055272.html" class="uri">https://www.cnblogs.com/haixiang/p/12055272.html</a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„!</p>
<h2 id="ç®€ä»‹">ç®€ä»‹</h2>
<p><strong>å·¥å‚æ–¹æ³•æ¨¡å¼</strong>ä¸­è€ƒè™‘çš„æ˜¯ä¸€ç±»äº§å“çš„ç”Ÿäº§ï¼Œå¦‚ç•œç‰§åœºåªå…»åŠ¨ç‰©ã€ç”µè§†æœºå‚åªç”Ÿäº§ç”µè§†æœºã€è®¡ç®—æœºè½¯ä»¶å­¦é™¢åªåŸ¹å…»è®¡ç®—æœºè½¯ä»¶ä¸“ä¸šçš„å­¦ç”Ÿç­‰ã€‚</p>
<p>åŒç§ç±»ç§°ä¸ºåŒç­‰çº§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šå·¥å‚æ–¹æ³•æ¨¡å¼åªè€ƒè™‘ç”Ÿäº§åŒç­‰çº§çš„äº§å“ï¼Œä½†æ˜¯åœ¨ç°å®ç”Ÿæ´»ä¸­è®¸å¤šå·¥å‚æ˜¯ç»¼åˆå‹çš„å·¥å‚ï¼Œèƒ½ç”Ÿäº§å¤šç­‰çº§ï¼ˆç§ç±»ï¼‰ çš„äº§å“ï¼Œå¦‚å†œåœºé‡Œæ—¢å…»åŠ¨ç‰©åˆç§æ¤ç‰©ï¼Œç”µå™¨å‚æ—¢ç”Ÿäº§ç”µè§†æœºåˆç”Ÿäº§æ´—è¡£æœºæˆ–ç©ºè°ƒï¼Œå¤§å­¦æ—¢æœ‰è½¯ä»¶ä¸“ä¸šåˆæœ‰ç”Ÿç‰©ä¸“ä¸šç­‰ã€‚</p>
<p>æœ¬èŠ‚è¦ä»‹ç»çš„æŠ½è±¡å·¥å‚æ¨¡å¼å°†è€ƒè™‘<strong>å¤šç­‰çº§äº§å“</strong>çš„ç”Ÿäº§ï¼Œå°†åŒä¸€ä¸ªå…·ä½“å·¥å‚æ‰€ç”Ÿäº§çš„ä½äºä¸åŒç­‰çº§çš„ä¸€ç»„äº§å“ç§°ä¸ºä¸€ä¸ªäº§å“æ—ï¼Œ</p>
<p>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰æ˜¯å›´ç»•ä¸€ä¸ªè¶…çº§å·¥å‚åˆ›å»ºå…¶ä»–å·¥å‚ã€‚è¯¥è¶…çº§å·¥å‚åˆç§°ä¸ºå…¶ä»–å·¥å‚çš„å·¥å‚ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚</p>
<p>åœ¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸­ï¼Œæ¥å£æ˜¯è´Ÿè´£åˆ›å»ºä¸€ä¸ªç›¸å…³å¯¹è±¡çš„å·¥å‚ï¼Œä¸éœ€è¦æ˜¾å¼æŒ‡å®šå®ƒä»¬çš„ç±»ã€‚æ¯ä¸ªç”Ÿæˆçš„å·¥å‚éƒ½èƒ½æŒ‰ç…§å·¥å‚æ¨¡å¼æä¾›å¯¹è±¡ã€‚</p>
<h2 id="ä¼˜ç¼ºç‚¹">ä¼˜ç¼ºç‚¹</h2>
<ul>
<li><p>äº§å“æ˜“æ‰©å±•ï¼ˆä¾‹å¦‚åé¢æ¡ˆä¾‹ä¸­æ‰©å±•æ–°çš„Mqã€æ•°æ®åº“ã€ç¼“å­˜ï¼‰</p></li>
<li><p>äº§å“æ—æ‰©å±•éå¸¸å›°éš¾ï¼ˆä¾‹å¦‚åé¢æ¡ˆä¾‹ä¸­æ–°å¢Serveräº§å“æ—ï¼‰ï¼Œè¦å¢åŠ ä¸€ä¸ªç³»åˆ—çš„æŸä¸€äº§å“ï¼Œæ—¢è¦åœ¨æŠ½è±¡å·¥å‚é‡ŒåŠ ä»£ç ï¼Œåˆè¦åœ¨å…·ä½“çš„å·¥å‚ç±»é‡Œé¢åŠ ä»£ç ã€‚</p></li>
</ul>
<h2 id="ä½¿ç”¨åœºæ™¯">ä½¿ç”¨åœºæ™¯</h2>
<ol>
<li>å½“éœ€è¦åˆ›å»ºçš„å¯¹è±¡æ˜¯ä¸€ç³»åˆ—ç›¸äº’å…³è”æˆ–ç›¸äº’ä¾èµ–çš„äº§å“æ—æ—¶ï¼Œå¦‚ç”µå™¨å·¥å‚ä¸­çš„ç”µè§†æœºã€æ´—è¡£æœºã€ç©ºè°ƒç­‰ã€‚</li>
<li>ç³»ç»Ÿä¸­æœ‰å¤šä¸ªäº§å“æ—ï¼Œä½†æ¯æ¬¡åªä½¿ç”¨å…¶ä¸­çš„æŸä¸€æ—äº§å“ã€‚å¦‚æœ‰äººåªå–œæ¬¢ç©¿æŸä¸€ä¸ªå“ç‰Œçš„è¡£æœå’Œé‹ã€‚</li>
<li>ç³»ç»Ÿä¸­æä¾›äº†äº§å“çš„ç±»åº“ï¼Œä¸”æ‰€æœ‰äº§å“çš„æ¥å£ç›¸åŒï¼Œå®¢æˆ·ç«¯ä¸ä¾èµ–äº§å“å®ä¾‹çš„åˆ›å»ºç»†èŠ‚å’Œå†…éƒ¨ç»“æ„ã€‚</li>
</ol>
<h2 id="å…·ä½“æ¡ˆä¾‹">å…·ä½“æ¡ˆä¾‹</h2>
<p>ä¸€ä¸ªå®Œæ•´æˆç†Ÿçš„ç³»ç»Ÿå¯ä»¥é‡‡ç”¨ä¸åŒçš„æŠ€æœ¯æ¥è§£å†³ä¸šåŠ¡å±‚é¢çš„é—®é¢˜ï¼Œä¾‹å¦‚æ•°æ®åº“å¯ä»¥ç”¨Mysqlä¹Ÿå¯ä»¥ç”¨Oracleã€‚æœ¬ä¾‹ä¸­æä¾›äº†ä¸‰ä¸ªäº§å“ï¼Œåˆ†åˆ«æ˜¯æ¶ˆæ¯é˜Ÿåˆ—Mqã€æ•°æ®åº“DataBaseä»¥åŠç¼“å­˜Mycacheä¸‰ä¸ªæ¥å£ï¼Œæ¯ä¸ªæ¥å£ä¸‹éƒ½æœ‰è‡ªå·±çš„å…·ä½“å®ç°ç±»ï¼Œä¹Ÿå°±æ˜¯å·¥å‚çš„äº§å“ã€‚<code>AbstractSystemFac</code>ä½œä¸ºæŠ½è±¡å·¥å‚ç±»ï¼Œè°ƒç”¨äº†ä¸Šè¿°çš„ä¸‰ä¸ªæ¥å£ï¼Œæ¥ç»„è£…ä¸‰ä¸ªä¸åŒçš„äº§å“ã€‚<code>SimpleSystemFac</code>ä¸<code>HugeSystemFac</code>æ˜¯ä¸¤ä¸ªå…·ä½“çš„å·¥å‚ç±»ï¼Œ<code>SimpleSystemFac</code>æ˜¯ä¸€ä¸ªæŠ€æœ¯è§£å†³æ–¹æ¡ˆï¼Œé€‰ç”¨MySQLæ•°æ®åº“ã€MemCacheã€RabbitMQä¸‰ç§äº§å“æ¥å®ç°è‡ªå·±çš„æŠ€æœ¯æ¶æ„ã€‚è€Œ<code>HugeSystemFac</code>é‡‡ç”¨Oracleæ•°æ®åº“ã€Redisã€Kafkaä¸‰ç§äº§å“ï¼Œè¿™ä¸¤ä¸ªå·¥å‚ç±»çš„æ–¹æ³•ä¸€è‡´ï¼Œåªä¸è¿‡å…·ä½“è°ƒç”¨çš„äº§å“ç±»å‹ä¸åŒã€‚</p>
<p><img src="./images/æŠ½è±¡å·¥å‚æ¨¡å¼0.png" /></p>
<p>æ•°æ®åº“æ¥å£åŠå®ç°ç±»</p>
<pre><code><code>/**
 * æ•°æ®åº“ç±»å‹
 * @author anqi
 */
public interface DataBase {
    /** åˆå§‹åŒ–æ•°æ®åº“ */
    void init();
}
public class Mysql implements DataBase {
    @Override
    public void init() {
        System.out.println(&quot;MySQLåˆå§‹åŒ–&quot;);
    }
}
public class Oracle implements DataBase{
    @Override
    public void init() {
        System.out.println(&quot;Oracleåˆå§‹åŒ–&quot;);
    }
}
public class OceanBase implements DataBase{
    @Override
    public void init() {
        System.out.println(&quot;OceanBaseåˆå§‹åŒ–&quot;);
    }
}</code></pre>
<p>æ¶ˆæ¯é˜Ÿåˆ—æ¥å£åŠå®ç°ç±»</p>
<pre><code><code>/**
 * æ¶ˆæ¯é˜Ÿåˆ—ç±»å‹
 * @author anqi
 */
public interface Mq {
    /** å‘é€æ¶ˆæ¯ */
    void sendMessage();
}
public class RabbitMQ implements Mq {
    @Override
    public void sendMessage() {
        System.out.println(&quot;ä½¿ç”¨RabbitMQå‘é€æ¶ˆæ¯&quot;);
    }
}
public class KafkaMQ implements Mq {
    @Override
    public void sendMessage() {
        System.out.println(&quot;ä½¿ç”¨kafkaå‘é€æ¶ˆæ¯&quot;);
    }
}</code></pre>
<p>ç¼“å­˜æ¥å£åŠå®ç°ç±»</p>
<pre><code><code>/**
 * ç¼“å­˜ç±»å‹
 * @author anqi
 */
public interface MyCache{
    /** ç¼“å­˜æ•°æ® */
    void cacheData();
}
public class MemCache implements MyCache {
    @Override
    public void cacheData() {
        System.out.println(&quot;ä½¿ç”¨MemCacheç¼“å­˜&quot;);
    }
}
public class RedisCache implements MyCache {
    @Override
    public void cacheData() {
        System.out.println(&quot;ä½¿ç”¨redisç¼“å­˜&quot;);
    }
}</code></pre>
<p>æŠ½è±¡å·¥å‚ç±»</p>
<pre><code><code>/**
 * æŠ½è±¡å·¥å‚ç±»
 */
public abstract class AbstractSystemFac {
    public abstract MyCache useCache();
    public abstract Mq useMq();
    public abstract DataBase useDataBase();
}</code></pre>
<p>å…·ä½“å·¥å‚</p>
<pre><code><code>public class SimpleSystemFac extends AbstractSystemFac {
    @Override
    public MyCache useCache() {
       return new MemCache();
    }

    @Override
    public Mq useMq() {
        return new RabbitMQ();
    }

    @Override
    public DataBase useDataBase() {
        return new Mysql();
    }
}</code></pre>
<p>å…·ä½“å·¥å‚</p>
<pre><code><code>public class HugeSystemFac extends AbstractSystemFac {
    @Override
    public MyCache useCache() {
        return new RedisCache();
    }

    @Override
    public Mq useMq() {
        return new KafkaMQ();
    }

    @Override
    public DataBase useDataBase() {
        return new Oracle();
    }
}</code></pre>
<p>æµ‹è¯•ç±»</p>
<pre><code><code>public class TestDemo {
    public static void main(String[] args) {
        AbstractSystemFac simpleFac = new SimpleSystemFac();
        MyCache memcache = simpleFac.useCache();
        DataBase mysql = simpleFac.useDataBase();
        Mq rabbitmq = simpleFac.useMq();
        memcache.cacheData();;
        mysql.init();
        rabbitmq.sendMessage();

        AbstractSystemFac hugeFac = new HugeSystemFac();
        MyCache redis = hugeFac.useCache();
        DataBase oracle = hugeFac.useDataBase();
        Mq kafka = hugeFac.useMq();
        redis.cacheData();
        oracle.init();
        kafka.sendMessage();
    }
}</code></pre>
<pre><code><code>ä½¿ç”¨MemCacheç¼“å­˜
MySQLåˆå§‹åŒ–
ä½¿ç”¨RabbitMQå‘é€æ¶ˆæ¯
ä½¿ç”¨redisç¼“å­˜
Oracleåˆå§‹åŒ–
ä½¿ç”¨kafkaå‘é€æ¶ˆæ¯</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çµæ´»åœ°æ‰©å……ä¸€ä¸ªæ–°çš„äº§å“<code>RocketMQ</code>ï¼Œæˆ–è€…ä¸€ä¸ªæ–°çš„å·¥å‚ç±»<code>NewSystemFac</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="./images/æŠ½è±¡å·¥å‚æ¨¡å¼1.png" /></p>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>