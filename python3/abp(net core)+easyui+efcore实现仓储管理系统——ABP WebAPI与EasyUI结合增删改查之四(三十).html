<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修abp(net core)+easyui+efcore实现仓储管理系统——ABP WebAPI与EasyUI结合增删改查之四(三十)' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>abp(net core)+easyui+efcore实现仓储管理系统——ABP WebAPI与EasyUI结合增删改查之四(三十)</center></div><div class='banquan'>原文出处:本文由博客园博主DotNet菜园提供。<br/>
原文连接:https://www.cnblogs.com/chillsrc/p/12048585.html</div><br>
    <h3><span style="font-family: 仿宋; color: #0000ff; font-size: 16px;"><a id="homepage1_HomePageDays_DaysList_ctl00_DayList_TitleUrl_0" class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11231284.html"><span style="color: #0000ff;">abp(net core)+easyui+efcore实现仓储管理系统目录</span></a></span></h3>
<div><span style="font-family: 宋体; color: #0000ff; font-size: 16px;"><a id="homepage1_HomePageDays_DaysList_ctl00_DayList_TitleUrl_0" href="https://www.cnblogs.com/chillsrc/p/10913047.html"><span style="color: #0000ff;">abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;ABP总体介绍(一）</span></a></span></div>
<div><span style="color: #0000ff; font-family: 宋体; font-size: 16px;"><a id="homepage1_HomePageDays_DaysList_ctl00_DayList_TitleUrl_0" class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/10944870.html"><span style="color: #0000ff;">abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;解决方案介绍(二)</span></a></span></div>
<div><span style="color: #0000ff; font-size: 16px;"><a id="homepage1_HomePageDays_DaysList_ctl00_DayList_TitleUrl_0" class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/10980974.html"><span style="color: #0000ff;">abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;领域层创建实体(三)</span></a></span></div>
<div><span style="color: #0000ff; font-size: 16px;">&nbsp;<a id="homepage1_HomePageDays_DaysList_ctl00_DayList_TitleUrl_0" class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11024357.html"><span style="color: #0000ff;">abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;定义仓储并实现 (四)</span></a></span></div>
<p align="left"><span style="color: #0000ff; font-size: 16px;"><a id="homepage1_HomePageDays_DaysList_ctl00_DayList_TitleUrl_0" class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11065667.html"><span style="color: #0000ff;">abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;创建应用服务（五）</span></a></span></p>
<div align="left"><span style="color: #0000ff; font-size: 16px;"><a id="homepage1_HomePageDays_DaysList_ctl00_DayList_TitleUrl_0" class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11096690.html"><span style="color: #0000ff;">abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;展现层实现增删改查之控制器（六）</span></a></span></div>
<div><span style="color: #0000ff; font-size: 16px;"><a id="homepage1_HomePageDays_DaysList_ctl00_DayList_TitleUrl_0" class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11124614.html"><span style="color: #0000ff;">abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;展现层实现增删改查之列表视图（七）</span></a></span></div>
<div><span style="color: #0000ff; font-size: 16px;"><a id="homepage1_HomePageDays_DaysList_ctl00_DayList_TitleUrl_0" class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11159642.html"><span style="color: #0000ff;">abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;展现层实现增删改查之增删改视图（八）</span></a></span></div>
<div><span style="color: #0000ff; font-size: 16px;"><a id="homepage1_HomePageDays_DaysList_ctl00_DayList_TitleUrl_0" class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11195189.html"><span style="color: #0000ff;">abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;展现层实现增删改查之菜单与测试（九）</span></a></span></div>
<div><span style="color: #0000ff; font-size: 16px;"><a id="homepage1_HomePageDays_DaysList_ctl00_DayList_TitleUrl_1" class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11269737.html"><span style="color: #0000ff;">abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;多语言（十）</span></a></span></div>
<div><span style="color: #0000ff; font-size: 16px;"><a id="homepage1_HomePageDays_DaysList_ctl00_DayList_TitleUrl_1" class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11269737.html"><span style="color: #0000ff;">abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;使用 WEBAPI实现CURD (十一)</span></a></span></div>
<div align="left"><span style="font-size: 16px;"><a class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11448287.html"><span style="color: #0000ff;">abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;菜单-上 (十六) </span></a></span></div>
<p align="left"><span style="color: #0000ff; font-size: 16px;"><a class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11533414.html"><span style="color: #0000ff;"> abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;EasyUI前端页面框架 (十八) </span></a></span></p>
<div align="left"><span style="color: #0000ff; font-size: 16px;"><a class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11573043.html"><span style="color: #0000ff;">abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;EasyUI之货物管理一 (十九) </span></a></span></div>
<div><span style="color: #0000ff; font-size: 16px;"><a class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11770233.html"><span style="color: #0000ff;"> abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;EasyUI之货物管理六(二十四) </span></a></span></div>
<div><span style="color: #0000ff; font-size: 16px;"><a class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11804797.html"><span style="color: #0000ff;"> abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;EasyUI之货物管理七(二十五) </span></a></span></div>
<div><span style="color: #0000ff; font-size: 16px;"><a class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11842320.html"><span style="color: #0000ff;"> abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;EasyUI之货物管理八(二十六) </span></a></span></div>
<div><span style="color: #0000ff; font-size: 16px;">&nbsp;<a class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11899403.html"><span style="color: #0000ff;">abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;ABP WebAPI与EasyUI结合增删改查之一(二十七) </span></a></span></div>
<div align="left"><span style="color: #0000ff; font-size: 16px;"><a class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11935424.html"><span style="color: #0000ff;">abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;ABP WebAPI与EasyUI结合增删改查之二(二十八)</span></a></span></div>
<div align="left">
<div><span style="color: #0000ff; font-size: 16px;"><a class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11975823.html"><span style="color: #0000ff;"> abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;ABP WebAPI与EasyUI结合增删改查之三(二十九) </span></a></span></div>
</div>
<div align="left">&nbsp;</div>
<div align="left">&nbsp;</div>
<div align="left">
<p align="left"><span style="font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在上一篇文章<span style="color: #0000ff;"><a class="postTitle2" href="https://www.cnblogs.com/chillsrc/p/11975823.html"><span style="color: #0000ff;">abp(net core)+easyui+efcore实现仓储管理系统&mdash;&mdash;ABP WebAPI与EasyUI结合增删改查之三(二十九) </span></a></span>中实现了组织管理的列表页面。在今天我们学习如何新增组织部门信息。</span></p>
<p align="left"><span style="font-size: 16px;"><strong>九、新增组织部门信息</strong></span></p>
<p align="left"><span style="font-size: 16px;">1. 在Visual Studio 2017的&ldquo;解决方案资源管理器&rdquo;中，左键单击在展现层的&ldquo;ABP.TPLMS.Web.MVC&rdquo;项目中的Views目录。找到Index.cshmtl文件。在此文件中添加视图代码。代码如下。</span></p>
<div class="cnblogs_code">
<pre><code><span style="font-size: 16px;">&lt;div id=<span style="color: #800000;">"</span><span style="color: #800000;">divAddUpdOrg</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">easyui-dialog</span><span style="color: #800000;">"</span> closed=<span style="color: #800000;">"</span><span style="color: #800000;">true</span><span style="color: #800000;">"</span> data-options=<span style="color: #800000;">"</span><span style="color: #800000;">buttons: '#dlg-buttons'</span><span style="color: #800000;">"</span>&gt;
    &lt;form name=<span style="color: #800000;">"</span><span style="color: #800000;">OrgEditForm</span><span style="color: #800000;">"</span> role=<span style="color: #800000;">"</span><span style="color: #800000;">form</span><span style="color: #800000;">"</span> novalidate <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-validation</span><span style="color: #800000;">"</span>&gt;
        &lt;table&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;input type=<span style="color: #800000;">"</span><span style="color: #800000;">hidden</span><span style="color: #800000;">"</span> name=<span style="color: #800000;">"</span><span style="color: #800000;">Id</span><span style="color: #800000;">"</span> id=<span style="color: #800000;">"</span><span style="color: #800000;">IDUpdate</span><span style="color: #800000;">"</span> /&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;组织名称：&lt;/td&gt;
                &lt;td&gt;
                    &lt;input type=<span style="color: #800000;">"</span><span style="color: #800000;">text</span><span style="color: #800000;">"</span> id=<span style="color: #800000;">"</span><span style="color: #800000;">NameUpdate</span><span style="color: #800000;">"</span> name=<span style="color: #800000;">"</span><span style="color: #800000;">Name</span><span style="color: #800000;">"</span> <br /><span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-control input-sm</span><span style="color: #800000;">"</span> /&gt;

                &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt; 组织代码：&lt;/td&gt;
                &lt;td&gt;&lt;input type=<span style="color: #800000;">"</span><span style="color: #800000;">text</span><span style="color: #800000;">"</span> id=<span style="color: #800000;">"</span><span style="color: #800000;">UpdBizCode</span><span style="color: #800000;">"</span> name=<span style="color: #800000;">"</span><span style="color: #800000;">BizCode</span><span style="color: #800000;">"</span> <br /><span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-control input-sm</span><span style="color: #800000;">"</span> /&gt;&lt;/td&gt;

            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;类型：&lt;/td&gt;
                &lt;td&gt;
                    &lt;input type=<span style="color: #800000;">"</span><span style="color: #800000;">text</span><span style="color: #800000;">"</span> id=<span style="color: #800000;">"</span><span style="color: #800000;">UpdType</span><span style="color: #800000;">"</span> name=<span style="color: #800000;">"</span><span style="color: #800000;">Type</span><span style="color: #800000;">"</span> <br /><span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-control input-sm</span><span style="color: #800000;">"</span> /&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt; 关区代码：&lt;/td&gt;

                &lt;td&gt;&lt;input type=<span style="color: #800000;">"</span><span style="color: #800000;">text</span><span style="color: #800000;">"</span> id=<span style="color: #800000;">"</span><span style="color: #800000;">UpdCustomCode</span><span style="color: #800000;">"</span> name=<span style="color: #800000;">"</span><span style="color: #800000;">CustomCode</span><span style="color: #800000;">"</span> <br /><span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-control input-sm</span><span style="color: #800000;">"</span> /&gt;&lt;/td&gt;

            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;自动展开：&lt;/td&gt;
                &lt;td&gt;
                   &lt;input type=<span style="color: #800000;">"</span><span style="color: #800000;">checkbox</span><span style="color: #800000;">"</span> id=<span style="color: #800000;">"</span><span style="color: #800000;">UpdIsAutoExpand</span><span style="color: #800000;">"</span> name=<span style="color: #800000;">"</span><span style="color: #800000;">IsAutoExpand</span><span style="color: #800000;">"<br /></span> <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-control input-sm</span><span style="color: #800000;">"</span> /&gt;      
                &lt;/td&gt;
            &lt;/tr&gt;

            &lt;tr&gt;
                &lt;td&gt;子级：&lt;/td&gt;
                &lt;td&gt;
                  &lt;input type=<span style="color: #800000;">"</span><span style="color: #800000;">checkbox</span><span style="color: #800000;">"</span> id=<span style="color: #800000;">"</span><span style="color: #800000;">UpdIsLeaf</span><span style="color: #800000;">"</span> name=<span style="color: #800000;">"</span><span style="color: #800000;">IsLeaf</span><span style="color: #800000;">"</span> <br /><span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-control input-sm</span><span style="color: #800000;">"</span> /&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;状态：&lt;/td&gt;
                &lt;td&gt;
                    &lt;input type=<span style="color: #800000;">"</span><span style="color: #800000;">text</span><span style="color: #800000;">"</span> id=<span style="color: #800000;">"</span><span style="color: #800000;">UpdStatus</span><span style="color: #800000;">"</span> name=<span style="color: #800000;">"</span><span style="color: #800000;">Status</span><span style="color: #800000;">"</span> <br /><span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-control input-sm</span><span style="color: #800000;">"</span> /&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;

                &lt;td&gt;上级组织：&lt;/td&gt;
                &lt;td&gt;
           &lt;<span style="color: #0000ff;">select</span> id=<span style="color: #800000;">"</span><span style="color: #800000;">AddTree</span><span style="color: #800000;">"</span> name=<span style="color: #800000;">"</span><span style="color: #800000;">ParentName</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">easyui-combotree</span><span style="color: #800000;">"</span> &gt;&lt;/<span style="color: #0000ff;">select</span>&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;

                &lt;td&gt;热键：&lt;/td&gt;
                &lt;td&gt;
                    &lt;input id=<span style="color: #800000;">"</span><span style="color: #800000;">UpdHotKey</span><span style="color: #800000;">"</span> name=<span style="color: #800000;">"</span><span style="color: #800000;">HotKey</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-control input-sm</span><span style="color: #800000;">"</span> /&gt;

                &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;图标：&lt;/td&gt;
                &lt;td&gt;

                    &lt;input id=<span style="color: #800000;">"</span><span style="color: #800000;">UpdIconName</span><span style="color: #800000;">"</span> name=<span style="color: #800000;">"</span><span style="color: #800000;">IconName</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-control input-sm</span><span style="color: #800000;">"</span> /&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;
                    &lt;input id=<span style="color: #800000;">"</span><span style="color: #800000;">UpdParentId</span><span style="color: #800000;">"</span> name=<span style="color: #800000;">"</span><span style="color: #800000;">ParentId</span><span style="color: #800000;">"</span> type=<span style="color: #800000;">"</span><span style="color: #800000;">hidden</span><span style="color: #800000;">"</span> /&gt;
                &lt;/td&gt;
            &lt;/tr&gt;

            &lt;tr&gt;
                &lt;td&gt;备注：&lt;/td&gt;
                &lt;td&gt;
                    &lt;input type=<span style="color: #800000;">"</span><span style="color: #800000;">text</span><span style="color: #800000;">"</span> id=<span style="color: #800000;">"</span><span style="color: #800000;">RemarkUpdate</span><span style="color: #800000;">"</span> name=<span style="color: #800000;">"</span><span style="color: #800000;">URemark</span><span style="color: #800000;">"</span> <br /><span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-control input-sm</span><span style="color: #800000;">"</span> /&gt;

                &lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt;
    &lt;/form&gt;
&lt;/div&gt;
 

&lt;div id=<span style="color: #800000;">"</span><span style="color: #800000;">dlg-buttons</span><span style="color: #800000;">"</span>&gt;
    &lt;input type=<span style="color: #800000;">"</span><span style="color: #800000;">submit</span><span style="color: #800000;">"</span> id=<span style="color: #800000;">"</span><span style="color: #800000;">btnSave</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">保存</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">btn btn-primary</span><span style="color: #800000;">"</span> /&gt;
    &lt;input type=<span style="color: #800000;">"</span><span style="color: #800000;">submit</span><span style="color: #800000;">"</span> id=<span style="color: #800000;">"</span><span style="color: #800000;">btnCancle</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">取消</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">btn btn-info</span><span style="color: #800000;">"</span> /&gt;
&lt;/div&gt;</span></pre>
</div>
<p align="left"><span style="font-size: 16px;">2. 在Visual Studio 2017的&ldquo;解决方案资源管理器&rdquo;中，找到领域层&ldquo;ABP.TPLMS.Web.Mvc&rdquo;项目中的wwwroot\view-resources\Orgs目录。</span></p>
<p align="left"><span style="font-size: 16px;">3. 在Orgs目录中找到Index.js文件。添加新增组织信息与加载树的代码。代码如下。</span></p>
<p align="left"><span style="font-size: 16px;">&nbsp;</span></p>
<div class="cnblogs_code">
<pre><code><span style="font-size: 16px;"><span style="color: #008000;">//</span><span style="color: #008000;">清空文本框</span>

<span style="color: #0000ff;">function</span><span style="color: #000000;"> clearAll() {
    $(</span>"#IDUpdate").val(""<span style="color: #000000;">);
    $(</span>"#UpdBizCode").val(""<span style="color: #000000;">);
    $(</span>':disabled[name]', <span style="color: #0000ff;">this</span>).each(<span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
            $(</span><span style="color: #0000ff;">this</span>).val(""<span style="color: #000000;">);
        });
}

</span><span style="color: #0000ff;">var</span> _orgService =<span style="color: #000000;"> abp.services.app.org;
</span><span style="color: #0000ff;">var</span> _$modal = $('#divAddUpdOrg'<span style="color: #000000;">);
</span><span style="color: #0000ff;">var</span> _$form = _$modal.find('form'<span style="color: #000000;">);

</span><span style="color: #008000;">//</span><span style="color: #008000;">弹出 添加货物信息的对话框</span>
<span style="color: #0000ff;">function</span><span style="color: #000000;"> showOrgDialog() {   

    $(</span>"#add").click(<span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
        clearAll();   
       BindTree();

        $(</span>"#divAddUpdOrg"<span style="color: #000000;">).dialog({
            closed: </span><span style="color: #0000ff;">false</span><span style="color: #000000;">,

            title: </span>"添加组织信息"<span style="color: #000000;">,
            modal: </span><span style="color: #0000ff;">true</span><span style="color: #000000;">,
            width: </span>600<span style="color: #000000;">,
            height: </span>450<span style="color: #000000;">,

            collapsible: </span><span style="color: #0000ff;">true</span><span style="color: #000000;">,
            minimizable: </span><span style="color: #0000ff;">true</span><span style="color: #000000;">,
            maximizable: </span><span style="color: #0000ff;">true</span><span style="color: #000000;">,
            resizable: </span><span style="color: #0000ff;">true</span><span style="color: #000000;">

        });
    });

 

    $(</span>"#btnSave").click(<span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">  alert('1');</span>
        <span style="color: #008000;">//</span><span style="color: #008000;">启用       </span>
        <span style="color: #008000;">//</span><span style="color: #008000;">保存</span>
        <span style="color: #0000ff;">if</span> (!<span style="color: #000000;">_$form.valid()) {
            </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
        }
    

        </span><span style="color: #0000ff;">var</span> id = $("#IDUpdate"<span style="color: #000000;">).val();
        </span><span style="color: #0000ff;">if</span> (id == "" || id == undefined || id=="0"<span style="color: #000000;">) {

            </span><span style="color: #008000;">//</span><span style="color: #008000;">验证</span>
            $.messager.confirm('确认', '您确认要保存吗？', <span style="color: #0000ff;">function</span><span style="color: #000000;"> (r) {
                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (r) {

                    $(</span>"#IDUpdate").val("0"<span style="color: #000000;">);
              </span><span style="color: #0000ff;">var</span> postData = _$form.serializeFormToObject(); <br /><span style="color: #008000;">//</span><span style="color: #008000;">serializeFormToObject is defined in main.js</span>
                    <span style="color: #0000ff;">if</span> (postData == <span style="color: #0000ff;">null</span> || postData == undefined || postData.Name == "" <br />|| postData.BizCode == ""<span style="color: #000000;">) {
                        $.messager.alert(</span>'提示', ' 请填写相关必填项！', 'warning'<span style="color: #000000;">);
                        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
                    }

                    abp.ui.setBusy(_$modal);
                    _orgService.create(postData).done(</span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {                                                               
                        $(</span>"#IDUpdate").val(""<span style="color: #000000;">);
                        _$modal.modal(</span>'hide'<span style="color: #000000;">);
                        $(</span>"#divAddUpdOrg").dialog("close"<span style="color: #000000;">);
                        initable(); </span><span style="color: #008000;">//</span><span style="color: #008000;">reload page to see new user!</span>
                    }).always(<span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                        abp.ui.clearBusy(_$modal);
                        });
                  }
            })
        }
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
            saveDetail();
        }
    });

}

 

</span><span style="color: #0000ff;">function</span><span style="color: #000000;"> saveDetail() { 

    $.messager.confirm(</span>'确认', '您确认要修改吗？', <span style="color: #0000ff;">function</span><span style="color: #000000;"> (r) {            

            </span><span style="color: #0000ff;">var</span> postData =<span style="color: #000000;"> GetOrg();
            </span><span style="color: #0000ff;">if</span> (postData==<span style="color: #0000ff;">null</span> || postData==undefined || postData.BizCode == "" <br />|| postData.Name == ""<span style="color: #000000;">) {
                $.messager.alert(</span>'提示', ' 请填写相关必填项！', 'warning'<span style="color: #000000;">);
                </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
            }          

            $.post(</span>"/Orgs/Update", postData, <span style="color: #0000ff;">function</span><span style="color: #000000;"> (data) {
               </span><span style="color: #008000;">//</span><span style="color: #008000;"> alert(data);</span>
                <span style="color: #0000ff;">if</span> (data=="OK"<span style="color: #000000;">) {
                    $.messager.alert(</span>"提示", "修改成功！"<span style="color: #000000;">);                
                    $(</span>"#divAddUpdOrg").dialog("close"<span style="color: #000000;">);               
                    initable();                }

                </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                    $.messager.alert(</span>"提示"<span style="color: #000000;">, data.msg);
                    </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
                }           

            });   
        })   
}

</span><span style="color: #0000ff;">function</span><span style="color: #000000;"> BindTree() {

    $(</span>'#AddTree'<span style="color: #000000;">).combotree({
        url: </span>'/Orgs/GetJsonTree'<span style="color: #000000;">,
        valueField: </span>'Id'<span style="color: #000000;">,
        textField: </span>'Name'<span style="color: #000000;">,

        multiple: </span><span style="color: #0000ff;">false</span><span style="color: #000000;">,
        editable: </span><span style="color: #0000ff;">false</span><span style="color: #000000;">,
        method: </span>'get'<span style="color: #000000;">,

        panelHeight: </span>'auto'<span style="color: #000000;">,
        checkbox: </span><span style="color: #0000ff;">false</span><span style="color: #000000;">,

        </span><span style="color: #008000;">//</span><span style="color: #008000;">required: true,</span>
        <span style="color: #008000;">//</span><span style="color: #008000;">全部折叠</span>
<span style="color: #000000;">
        onLoadSuccess: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (node, data) {
            $(</span>'#AddTree').combotree('tree').tree("expandAll"); <span style="color: #008000;">//</span><span style="color: #008000;">collapseAll</span>
<span style="color: #000000;">
        },
        onSelect: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (node) {
            $(</span>'#UpdParentId'<span style="color: #000000;">).val(node.id);
           </span><span style="color: #008000;">//</span><span style="color: #008000;"> alert(node.id);</span>
<span style="color: #000000;">        }
    });

}</span></span></pre>
</div>
<p>&nbsp;</p>
</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>