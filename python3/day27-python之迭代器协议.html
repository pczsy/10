<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修day27-python之迭代器协议' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>day27-python之迭代器协议</center></div><div class='banquan'>原文出处:本文由博客园博主有猿人提供。<br/>
原文连接:https://www.cnblogs.com/sqy-yyr/p/11371660.html</div><br>
    <p>1.item系列方法</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> class Foo:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __getitem__(self, item):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('getitem',item)</span><span style="color: #008000;">
#</span><span style="color: #008000;">         return self.__dict__[item]</span><span style="color: #008000;">
#
#</span><span style="color: #008000;">     def __setitem__(self, key, value):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('setitem')</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self.__dict__[key]=value</span><span style="color: #008000;">
#
#</span><span style="color: #008000;">     def __delitem__(self, key):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('delitem')</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self.__dict__.pop(key)</span><span style="color: #008000;">
#
</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Foo:
    </span><span style="color: #0000ff;">def</span>  <span style="color: #800080;">__getitem__</span><span style="color: #000000;">(self, item):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">getitem</span><span style="color: #800000;">'</span><span style="color: #000000;">,item)
        </span><span style="color: #0000ff;">return</span> self.<span style="color: #800080;">__dict__</span><span style="color: #000000;">[item]

    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__setitem__</span><span style="color: #000000;">(self, key, value):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">setitem</span><span style="color: #800000;">'</span><span style="color: #000000;">)
        self.</span><span style="color: #800080;">__dict__</span>[key] =<span style="color: #000000;"> value

    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__delitem__</span><span style="color: #000000;">(self, key):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">delitem</span><span style="color: #800000;">'</span><span style="color: #000000;">)
        self.</span><span style="color: #800080;">__dict__</span><span style="color: #000000;">.pop(key)

f1 </span>=<span style="color: #000000;"> Foo()
</span><span style="color: #0000ff;">print</span>(f1.<span style="color: #800080;">__dict__</span><span style="color: #000000;">)
f1.name </span>= <span style="color: #800000;">'</span><span style="color: #800000;">egon</span><span style="color: #800000;">'</span>
<span style="color: #008000;">#</span><span style="color: #008000;"> f1['name'] = 'egon'</span>
f1[<span style="color: #800000;">'</span><span style="color: #800000;">age</span><span style="color: #800000;">'</span>] = 18
<span style="color: #008000;">#</span><span style="color: #008000;"> print(f1.__dict__)</span>


<span style="color: #008000;">#</span><span style="color: #008000;"> del f1.name</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(f1.age)</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> del f1['name']</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(f1.__dict__)</span>
<span style="color: #0000ff;">print</span>(f1[<span style="color: #800000;">'</span><span style="color: #800000;">age</span><span style="color: #800000;">'</span><span style="color: #000000;">])
</span><span style="color: #0000ff;">raise</span><span style="color: #000000;">  StopAsyncIteration
</span><span style="color: #008000;">#</span><span style="color: #008000;"> f1=Foo()</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(f1.__dict__)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> # f1.name='egon'  #----&gt;setattr--------&gt;f1.__dict__['name']='egon'</span><span style="color: #008000;">
#</span><span style="color: #008000;"> f1['name']='egon'#---&gt;setitem---------&gt;f1.__dict__['name']='egon'</span><span style="color: #008000;">
#</span><span style="color: #008000;"> f1['age']=18</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> print('===&gt;',f1.__dict__)</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> # del f1.name</span><span style="color: #008000;">
#</span><span style="color: #008000;"> # print(f1.__dict__)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> #</span><span style="color: #008000;">
#</span><span style="color: #008000;"> # print(f1.age)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> del f1['name']</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(f1.__dict__)</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> print(f1['age'])</span><span style="color: #008000;">
#</span><span style="color: #008000;"> raise S</span></pre>
</div>
<p>2.slots属性</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> Foo:
    </span><span style="color: #800080;">__slots__</span> = [<span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">age</span><span style="color: #800000;">'</span><span style="color: #000000;">]

f1 </span>=<span style="color: #000000;"> Foo()
f1.name </span>= <span style="color: #800000;">'</span><span style="color: #800000;">egon</span><span style="color: #800000;">'</span>
<span style="color: #0000ff;">print</span><span style="color: #000000;">(f1.name)


</span><span style="color: #008000;">#</span><span style="color: #008000;"> class Foo:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     __slots__=['name','age']  #{'name':None,'age':None}</span>
    <span style="color: #008000;">#</span><span style="color: #008000;"> __slots__='name' #{'name':None,'age':None}</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> f1=Foo()</span><span style="color: #008000;">
#</span><span style="color: #008000;"> f1.name='egon'</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(f1.name)</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> f1.age=18  #---&gt;setattr-----&gt;f1.__dict__['age']=18</span>
<span style="color: #000000;">

f1.age </span>= 18
<span style="color: #008000;">#</span><span style="color: #008000;"> print(f1.__dict__)</span>
<span style="color: #0000ff;">print</span>(Foo.<span style="color: #800080;">__slots__</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(f1.<span style="color: #800080;">__slots__</span><span style="color: #000000;">)

f1.name </span>= <span style="color: #800000;">'</span><span style="color: #800000;">egon</span><span style="color: #800000;">'</span><span style="color: #000000;">
f1.age </span>= 17
<span style="color: #0000ff;">print</span><span style="color: #000000;">(f1.name)
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(f1.age)
</span><span style="color: #008000;">#</span><span style="color: #008000;"> print(f1.__dict__)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(Foo.__slots__)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(f1.__slots__)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> f1.name='egon'</span><span style="color: #008000;">
#</span><span style="color: #008000;"> f1.age=17</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(f1.name)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(f1.age)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> f1.gender='male'</span>


<span style="color: #008000;">#</span><span style="color: #008000;"> f1.gender = 'male'</span>
<span style="color: #000000;">
f2 </span>=<span style="color: #000000;"> Foo()
</span><span style="color: #0000ff;">print</span>(f2.<span style="color: #800080;">__slots__</span><span style="color: #000000;">)
f2.name </span>= <span style="color: #800000;">'</span><span style="color: #800000;">alex</span><span style="color: #800000;">'</span><span style="color: #000000;">
f2.age </span>= 18
<span style="color: #0000ff;">print</span><span style="color: #000000;">(f2.name)
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(f2.age)

</span><span style="color: #008000;">#</span><span style="color: #008000;"> f2=Foo()</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(f2.__slots__)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> f2.name='alex'</span><span style="color: #008000;">
#</span><span style="color: #008000;"> f2.age=18</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(f2.name)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(f2.age)</span></pre>
</div>
<p>3.内置方法</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> Foo:
    x </span>= 1
    <span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,y):
        self.y </span>=<span style="color: #000000;"> y

    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__getattr__</span><span style="color: #000000;">(self, item):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">------&gt; from getattr:你找的属性不存在</span><span style="color: #800000;">'</span><span style="color: #000000;">)

    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__setattr__</span><span style="color: #000000;">(self, key, value):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">-----&gt; from setattr</span><span style="color: #800000;">'</span><span style="color: #000000;">)
        self.</span><span style="color: #800080;">__dict__</span>[key] =<span style="color: #000000;"> value

    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__delattr__</span><span style="color: #000000;">(self, item):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">-----&gt; from delattr</span><span style="color: #800000;">'</span><span style="color: #000000;">)
        self.</span><span style="color: #800080;">__dict__</span><span style="color: #000000;">.pop(item)


f1 </span>= Foo(10<span style="color: #000000;">)

</span><span style="color: #008000;">#</span><span style="color: #008000;"> class Foo:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     x=1</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __init__(self,y):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self.y=y</span><span style="color: #008000;">
#
#</span><span style="color: #008000;">     def __getattr__(self, item):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('----&gt; from getattr:你找的属性不存在')</span><span style="color: #008000;">
#
#
#</span><span style="color: #008000;">     def __setattr__(self, key, value):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('----&gt; from setattr')</span><span style="color: #008000;">
#</span><span style="color: #008000;">         # self.key=value #这就无限递归了,你好好想想</span><span style="color: #008000;">
#</span><span style="color: #008000;">         # self.__dict__[key]=value #应该使用它</span><span style="color: #008000;">
#
#</span><span style="color: #008000;">     def __delattr__(self, item):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('----&gt; from delattr')</span><span style="color: #008000;">
#</span><span style="color: #008000;">         # del self.item #无限递归了</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self.__dict__.pop(item)</span><span style="color: #008000;">
#
#
#</span><span style="color: #008000;"> f1=Foo(10)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> f1.x</span></pre>
</div>
<p>4.描述符</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> class Foo:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __get__(self, instance, owner):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('===&gt;get方法')</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __set__(self, instance, value):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('===&gt;set方法',instance,value)</span><span style="color: #008000;">
#</span><span style="color: #008000;">         instance.__dict__['x']=value #b1.__dict__</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __delete__(self, instance):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('===&gt;delete方法')</span>


<span style="color: #0000ff;">class</span><span style="color: #000000;"> Foo:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__get__</span><span style="color: #000000;">(self, instance, owner):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">===&gt;get方法</span><span style="color: #800000;">'</span><span style="color: #000000;">)

    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__set__</span><span style="color: #000000;">(self, instance, value):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">===&gt;set方法</span><span style="color: #800000;">'</span><span style="color: #000000;">,instance,value)
        instance.</span><span style="color: #800080;">__dict__</span>[<span style="color: #800000;">'</span><span style="color: #800000;">x</span><span style="color: #800000;">'</span>] =<span style="color: #000000;"> value
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__delete__</span><span style="color: #000000;">(self, instance):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">===&gt;delete方法</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Bar:
    x </span>=<span style="color: #000000;"> Foo()
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,n):
        self.x </span>=<span style="color: #000000;"> n
b1 </span>= Bar(10<span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(b1.<span style="color: #800080;">__dict__</span><span style="color: #000000;">)
b1.x </span>= 11111111111
<span style="color: #0000ff;">print</span>(b1.<span style="color: #800080;">__dict__</span><span style="color: #000000;">)

</span><span style="color: #008000;">#</span><span style="color: #008000;"> class Bar:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     x=Foo() #在何地？</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __init__(self,n):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self.x=n #b1.x=10</span><span style="color: #008000;">
#</span><span style="color: #008000;"> b1=Bar(10)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(b1.__dict__)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> b1.x=11111111111111111</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(b1.__dict__)</span><span style="color: #008000;">
#
</span>b1.y = 111111111111111111111111
<span style="color: #0000ff;">print</span>(b1.<span style="color: #800080;">__dict__</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(Bar.<span style="color: #800080;">__dict__</span><span style="color: #000000;">)

</span><span style="color: #008000;">#</span><span style="color: #008000;"> b1.y=11111111111111111111111111111111111111</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(b1.__dict__)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(Bar.__dict__)</span>
<span style="color: #000000;">
b1 </span>=<span style="color: #000000;"> Bar()
b1.x </span>= 1
<span style="color: #008000;">#</span><span style="color: #008000;"> del  b1.x</span>
<span style="color: #0000ff;">print</span><span style="color: #000000;">(b1.x)
</span><span style="color: #008000;">#</span><span style="color: #008000;">在何时？</span><span style="color: #008000;">
#</span><span style="color: #008000;"> b1=Bar()</span><span style="color: #008000;">
#</span><span style="color: #008000;"> b1.x</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> b1.x=1</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> del b1.x</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> print(b1.x)</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> b1.x=1</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(b1.__dict__)</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> del b1.x</span></pre>
</div>
<p>5.描述符优先级</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> class Foo:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def  __get__(self, instance, owner):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('===&gt;get方法')</span><span style="color: #008000;">
#
#</span><span style="color: #008000;">     def __set__(self, instance, value):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('===&gt;set方法',instance,value)</span><span style="color: #008000;">
#
#</span><span style="color: #008000;">     def __delete__(self, instance):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('===&gt;delete方法')</span>



<span style="color: #008000;">#</span><span style="color: #008000;"> class Foo:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __get__(self, instance, owner):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('===&gt;get方法')</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __set__(self, instance, value):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('===&gt;set方法',instance,value)</span><span style="color: #008000;">
#</span><span style="color: #008000;">         # instance.__dict__['x']=value #b1.__dict__</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __delete__(self, instance):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('===&gt;delete方法')</span><span style="color: #008000;">
#
#
</span>


<span style="color: #008000;">#</span><span style="color: #008000;"> class Bar:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     x=Foo() #在何地？</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> print(Bar.x)</span>


<span style="color: #008000;">#</span><span style="color: #008000;"> Bar.x=1</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(Bar.__dict__)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(Bar.x)</span>




<span style="color: #008000;">#</span><span style="color: #008000;"> print(Bar.__dict__)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> b1=Bar()</span><span style="color: #008000;">
#</span><span style="color: #008000;"> b1.x   #get</span><span style="color: #008000;">
#</span><span style="color: #008000;"> b1.x=1 # set</span><span style="color: #008000;">
#</span><span style="color: #008000;"> del b1.x # delete</span>




<span style="color: #008000;">#</span><span style="color: #008000;"> b1=Bar()</span><span style="color: #008000;">
#</span><span style="color: #008000;"> Bar.x=111111111111111111111111111111111111111</span><span style="color: #008000;">
#</span><span style="color: #008000;"> b1.x</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> del Bar.x</span><span style="color: #008000;">
#</span><span style="color: #008000;"> b1.x</span>

<span style="color: #0000ff;">class</span><span style="color: #000000;"> Foo:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__get__</span><span style="color: #000000;">(self, instance, owner):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">===&gt;get方法</span><span style="color: #800000;">'</span><span style="color: #000000;">)

    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__delete__</span><span style="color: #000000;">(self, instance):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">===&gt;delete方法</span><span style="color: #800000;">'</span><span style="color: #000000;">)



</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Bar:
    x </span>=<span style="color: #000000;"> Foo()
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__getattr__</span><span style="color: #000000;">(self, item):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">--------&gt;</span><span style="color: #800000;">'</span><span style="color: #000000;">)

b1 </span>=<span style="color: #000000;"> Bar()
</span><span style="color: #008000;">#</span><span style="color: #008000;"> b1.x = 1</span>
<span style="color: #0000ff;">print</span>(b1.<span style="color: #800080;">__dict__</span><span style="color: #000000;">)
</span><span style="color: #008000;">#</span><span style="color: #008000;"> class Foo:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __get__(self, instance, owner):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('===&gt;get方法')</span><span style="color: #008000;">
#
#
#</span><span style="color: #008000;">     # def __delete__(self, instance):</span><span style="color: #008000;">
#</span><span style="color: #008000;">     #     print('===&gt;delete方法')</span><span style="color: #008000;">
#
#
#</span><span style="color: #008000;"> class Bar:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     x=Foo() #在何地？</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def  __getattr__(self, item):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('-----&gt;')</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> b1=Bar()</span><span style="color: #008000;">
#</span><span style="color: #008000;"> b1.x=1</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(b1.__dict__)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> b1.xxxxxxxxxxxxxxxxxxxxxxx</span></pre>
</div>
<p>6.改变对象的字符串显示</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> l=list('hello')</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> print(l)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> file=open('test.txt','w')</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(file)</span>



<span style="color: #008000;">#</span><span style="color: #008000;"> class Foo:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __init__(self,name,age):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self.name=name</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self.age=age</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __str__(self):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         return '名字是%s 年龄是%s' %(self.name,self.age)</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> f1=Foo('egon',18)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(f1) #str(f1)---&gt;f1.__str__()</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> x=str(f1)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(x)</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> y=f1.__str__()</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(y)</span>

<span style="color: #0000ff;">class</span><span style="color: #000000;"> Foo:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,age):
        self.name </span>=<span style="color: #000000;"> name
        self.age </span>=<span style="color: #000000;"> age

    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__str__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span>  <span style="color: #800000;">'</span><span style="color: #800000;">折是str</span><span style="color: #800000;">'</span>

    <span style="color: #0000ff;">def</span> <span style="color: #800080;">__repr__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span>  <span style="color: #800000;">'</span><span style="color: #800000;">名字是%s 年龄是%s</span><span style="color: #800000;">'</span> %<span style="color: #000000;">(self.name,self.age)

f1 </span>= Foo(<span style="color: #800000;">'</span><span style="color: #800000;">as</span><span style="color: #800000;">'</span>,12<span style="color: #000000;">)
f1.</span><span style="color: #800080;">__repr__</span><span style="color: #000000;">()

</span><span style="color: #008000;">#</span><span style="color: #008000;"> class Foo:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __init__(self,name,age):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self.name=name</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self.age=age</span><span style="color: #008000;">
#</span><span style="color: #008000;">     # def __str__(self):</span><span style="color: #008000;">
#</span><span style="color: #008000;">     #     return '折是str'</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __repr__(self):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         return '名字是%s 年龄是%s' %(self.name,self.age)</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> f1=Foo('egon',19)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> #repr(f1)----&gt;f1.__repr__()</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(f1) #str（f1）---》f1.__str__()------&gt;f1.__repr__()</span></pre>
</div>
<p>7.析构方法</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> class Foo:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __init__(self,name):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self.name=name</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __del__(self):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('我执行啦')</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> f1=Foo('alex')</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> # del f1    #删除实例会触发__del__</span><span style="color: #008000;">
#</span><span style="color: #008000;"> del f1.name #删除实例的属性不会触发__del__</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print('---------------------&gt;')</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> #程序运行完毕会自动回收内存，触发__del__</span>

<span style="color: #0000ff;">class</span><span style="color: #000000;"> Foo:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name):
        self.name </span>=<span style="color: #000000;"> name

    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__del__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">我执行啦</span><span style="color: #800000;">'</span><span style="color: #000000;">)

f1 </span>= Foo(<span style="color: #800000;">'</span><span style="color: #800000;">andy</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #008000;">#</span><span style="color: #008000;"> del f1.name</span></pre>
</div>
<p>8.自定义格式化方法format</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> x='{0}{0}{0}'.format('dog')</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> print(x)</span>


<span style="color: #008000;">#</span><span style="color: #008000;"> class Date:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __init__(self,year,mon,day):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self.year=year</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self.mon=mon</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self.day=day</span><span style="color: #008000;">
#</span><span style="color: #008000;"> d1=Date(2016,12,26)</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> x='{0.year}{0.mon}{0.day}'.format(d1)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> y='{0.year}:{0.mon}:{0.day}'.format(d1)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> z='{0.mon}-{0.day}-{0.year}'.format(d1)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(x)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(y)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(z)</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> x='{0.year}{0.mon}{0.day}'.format(d1)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> y='{0.year}:{0.mon}:{0.day}'</span><span style="color: #008000;">
#</span><span style="color: #008000;"> z='{0.mon}-{0.day}-{0.year}'</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> format_dic={</span><span style="color: #008000;">
#</span><span style="color: #008000;">     'ymd':'{0.year}{0.mon}{0.day}',</span><span style="color: #008000;">
#</span><span style="color: #008000;">     'm-d-y':'{0.mon}-{0.day}-{0.year}',</span><span style="color: #008000;">
#</span><span style="color: #008000;">     'y:m:d':'{0.year}:{0.mon}:{0.day}'</span><span style="color: #008000;">
#</span><span style="color: #008000;"> }</span>
format_dic =<span style="color: #000000;"> {
    </span><span style="color: #800000;">'</span><span style="color: #800000;">ymd</span><span style="color: #800000;">'</span>:<span style="color: #800000;">'</span><span style="color: #800000;">{0.year}{0.mon}{0.day}</span><span style="color: #800000;">'</span><span style="color: #000000;">,
    </span><span style="color: #800000;">'</span><span style="color: #800000;">m-d-y</span><span style="color: #800000;">'</span>:<span style="color: #800000;">'</span><span style="color: #800000;">{0.mon}-{0.day}-{0.year}</span><span style="color: #800000;">'</span><span style="color: #000000;">,
    </span><span style="color: #800000;">'</span><span style="color: #800000;">y:m:d</span><span style="color: #800000;">'</span>:<span style="color: #800000;">'</span><span style="color: #800000;">{0.year}:{0.mon}:{0.day}</span><span style="color: #800000;">'</span><span style="color: #000000;">
}
</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Date:
    </span><span style="color: #0000ff;">def</span>  <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,year,mon,day):
        self.year </span>=<span style="color: #000000;"> year
        self.mon </span>=<span style="color: #000000;"> mon
        self.day </span>=<span style="color: #000000;"> day

    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__format__</span><span style="color: #000000;">(self, format_spec):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">我执行啦</span><span style="color: #800000;">'</span><span style="color: #000000;">)
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">---&gt;</span><span style="color: #800000;">'</span><span style="color: #000000;">,format_spec)
        </span><span style="color: #0000ff;">if</span> <span style="color: #0000ff;">not</span> format_spec <span style="color: #0000ff;">or</span> format_spec <span style="color: #0000ff;">not</span> <span style="color: #0000ff;">in</span><span style="color: #000000;"> format_dic:
            format_spec </span>= <span style="color: #800000;">'</span><span style="color: #800000;">ymd</span><span style="color: #800000;">'</span><span style="color: #000000;">
        fm </span>=<span style="color: #000000;"> format_dic[format_spec]
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">  fm.format(self)

d1 </span>= Date(2016,12,13<span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(format(d1,<span style="color: #800000;">'</span><span style="color: #800000;">ymd</span><span style="color: #800000;">'</span><span style="color: #000000;">))
</span><span style="color: #0000ff;">print</span>(format(d1,<span style="color: #800000;">'</span><span style="color: #800000;">y:m:d</span><span style="color: #800000;">'</span><span style="color: #000000;">))
</span><span style="color: #0000ff;">print</span>(format(d1,<span style="color: #800000;">'</span><span style="color: #800000;">m-d-y</span><span style="color: #800000;">'</span><span style="color: #000000;">))
</span><span style="color: #0000ff;">print</span>(format(d1,<span style="color: #800000;">'</span><span style="color: #800000;">m-d:y</span><span style="color: #800000;">'</span><span style="color: #000000;">))
</span><span style="color: #008000;">#</span><span style="color: #008000;"> class Date:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __init__(self,year,mon,day):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self.year=year</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self.mon=mon</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self.day=day</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __format__(self, format_spec):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('我执行啦')</span><span style="color: #008000;">
#</span><span style="color: #008000;">         print('---&gt;',format_spec)</span><span style="color: #008000;">
#</span><span style="color: #008000;">         if not format_spec or format_spec not in format_dic:</span><span style="color: #008000;">
#</span><span style="color: #008000;">             format_spec='ymd'</span><span style="color: #008000;">
#</span><span style="color: #008000;">         fm=format_dic[format_spec]</span><span style="color: #008000;">
#</span><span style="color: #008000;">         return fm.format(self)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> d1=Date(2016,12,26)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> # format(d1) #d1.__format__()</span><span style="color: #008000;">
#</span><span style="color: #008000;"> # print(format(d1))</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(format(d1,'ymd'))</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(format(d1,'y:m:d'))</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(format(d1,'m-d-y'))</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(format(d1,'m-d:y'))</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print('===========&gt;',format(d1,'asdfasdfsadfasdfasdfasdfasdfasdfasdfasdfasdfasdfasd'))</span>

<span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">=============&gt;</span><span style="color: #800000;">'</span>,format(d1,<span style="color: #800000;">'</span><span style="color: #800000;">assddd</span><span style="color: #800000;">'</span>))</pre>
</div>
<p>9.迭代器协议</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> class Foo:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __init__(self,n):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self.n=n</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __iter__(self):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         return self</span><span style="color: #008000;">
#
#</span><span style="color: #008000;">     def __next__(self):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         if self.n == 13:</span><span style="color: #008000;">
#</span><span style="color: #008000;">             raise StopIteration('终止了')</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self.n+=1</span><span style="color: #008000;">
#</span><span style="color: #008000;">         return self.n</span>

<span style="color: #0000ff;">class</span><span style="color: #000000;"> Foo:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,n):
        self.n </span>=<span style="color: #000000;"> n
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__iter__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">  self

    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__next__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">if</span> self.n == 13<span style="color: #000000;">:
            </span><span style="color: #0000ff;">raise</span> StopIteration(<span style="color: #800000;">'</span><span style="color: #800000;">终止了</span><span style="color: #800000;">'</span><span style="color: #000000;">)

        self.n</span>+=1
        <span style="color: #0000ff;">return</span><span style="color: #000000;"> self.n
f1 </span>= Foo(10<span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(f1.<span style="color: #800080;">__next__</span><span style="color: #000000;">())
</span><span style="color: #0000ff;">print</span>(f1.<span style="color: #800080;">__next__</span><span style="color: #000000;">())

</span><span style="color: #008000;">#</span><span style="color: #008000;"> l=list('hello')</span><span style="color: #008000;">
#</span><span style="color: #008000;"> for i in l:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     print(i)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> f1=Foo(10)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> # print(f1.__next__())</span><span style="color: #008000;">
#</span><span style="color: #008000;"> # print(f1.__next__())</span><span style="color: #008000;">
#</span><span style="color: #008000;"> # print(f1.__next__())</span><span style="color: #008000;">
#</span><span style="color: #008000;"> # print(f1.__next__())</span><span style="color: #008000;">
#
#</span><span style="color: #008000;"> for i in f1:  # obj=iter(f1)------------&gt;f1.__iter__()</span><span style="color: #008000;">
#</span><span style="color: #008000;">      print(i)  #obj.__next_()</span>

<span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> f1:
    </span><span style="color: #0000ff;">print</span>(i)</pre>
</div>
<p>10.迭代器协议实现斐波那契数列</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> class Fib:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __init__(self):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self._a=1</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self._b=1</span><span style="color: #008000;">
#
#</span><span style="color: #008000;">     def __iter__(self):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         return self</span><span style="color: #008000;">
#</span><span style="color: #008000;">     def __next__(self):</span><span style="color: #008000;">
#</span><span style="color: #008000;">         if self._a &gt; 100:</span><span style="color: #008000;">
#</span><span style="color: #008000;">             raise StopIteration('终止了')</span><span style="color: #008000;">
#</span><span style="color: #008000;">         self._a,self._b=self._b,self._a + self._b</span><span style="color: #008000;">
#</span><span style="color: #008000;">         return self._a</span>
<span style="color: #0000ff;">class</span><span style="color: #000000;"> Fib:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self):
        self._a </span>= 1<span style="color: #000000;">
        self._b </span>= 1

    <span style="color: #0000ff;">def</span> <span style="color: #800080;">__iter__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">  self

    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__next__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">if</span> self._a &gt; 100<span style="color: #000000;">:
            </span><span style="color: #0000ff;">raise</span>  StopIteration(<span style="color: #800000;">'</span><span style="color: #800000;">终止了</span><span style="color: #800000;">'</span><span style="color: #000000;">)

        self._a,self._b</span>=self._b,self._a+<span style="color: #000000;">self._b
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> self._a

f1 </span>=<span style="color: #000000;"> Fib()

</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(next(f1))
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(next(f1))
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(next(f1))
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(next(f1))
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(next(f1))
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(next(f1))
</span><span style="color: #008000;">#</span><span style="color: #008000;"> f1=Fib()</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(next(f1))</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(next(f1))</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(next(f1))</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(next(f1))</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(next(f1))</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print('==================================')</span><span style="color: #008000;">
#</span><span style="color: #008000;"> for i in f1:</span><span style="color: #008000;">
#</span><span style="color: #008000;">     print(i)</span>

 </pre>
</div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>