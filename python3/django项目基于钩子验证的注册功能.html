<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修django项目基于钩子验证的注册功能' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>django项目基于钩子验证的注册功能</center></div><div class='banquan'>原文出处:本文由博客园博主记住我忘记我提供。<br/>
原文连接:https://www.cnblogs.com/nmsghgnv/p/11360214.html</div><br>
    <p>&nbsp;前端html</p>
<div class="cnblogs_code">
<pre><code>&lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">agile-row</span><span style="color: #800000;">"</span>&gt;
                &lt;h3&gt;注册&lt;/h3&gt;<span style="color: #000000;">
{</span><span style="color: #008000;">#</span><span style="color: #008000;">                注册的开始#}</span>
                &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">login-agileits-top</span><span style="color: #800000;">"</span>&gt;
                    &lt;div <span style="color: #0000ff;">class</span>=row&gt;
                        &lt;form <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-horizontal col-md-8 form-padding</span><span style="color: #800000;">"</span> role=form id=registerForm method=<span style="color: #000000;">post
                              onsubmit</span>=<span style="color: #800000;">"</span><span style="color: #800000;">return false</span><span style="color: #800000;">"</span>&gt;<span style="color: #000000;">
                            {</span>% csrf_token %<span style="color: #000000;">}
                            </span>&lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-space-top d-none d-sm-block</span><span style="color: #800000;">"</span>&gt;&lt;/div&gt;
                            &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-group form-row</span><span style="color: #800000;">"</span>&gt;
                                &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">col-sm-2 control-label</span><span style="color: #800000;">"</span>&gt;&lt;label <span style="color: #0000ff;">class</span>=w4-2 <span style="color: #0000ff;">for</span>=Email&gt;&lt;/label&gt;&lt;/div&gt;
                                &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">col-sm-10 has-feedback</span><span style="color: #800000;">"</span>&gt;&lt;input <span style="color: #0000ff;">class</span>=form-control placeholder=<span style="color: #000000;">邮箱：可通过邮箱找回密码
                                                                           type</span>=<span style="color: #000000;">email
                                                                           data</span>-val=<span style="color: #000000;">true
                                                                           data</span>-val-checkemailpostfix=<span style="color: #000000;">不支持该邮箱后缀
                                                                           data</span>-val-email=<span style="color: #000000;">邮箱格式错误
                                                                           data</span>-val-length=<span style="color: #000000;">邮箱地址不能超过120个字符
                                                                           data</span>-val-length-max=120<span style="color: #000000;">
                                                                           data</span>-val-regex=<span style="color: #000000;">邮箱地址错误或不支持
                                                                           data</span>-val-regex-pattern=<span style="color: #800000;">"</span><span style="color: #800000;">[\w!#\$%&amp;amp;'\*\+\-\/=\^_`{\|}~.]+@([\w-]+\.)+(com|net|cn|org|me|cc|biz)$</span><span style="color: #800000;">"</span><span style="color: #000000;">
                                                                           data</span>-val-remote=<span style="color: #800000;">"</span><span style="color: #800000;">'邮箱' is invalid.</span><span style="color: #800000;">"</span><span style="color: #000000;">
                                                                           data</span>-val-remote-additionalfields=*<span style="color: #000000;">.Email
                                                                           data</span>-val-remote-url=/Account/<span style="color: #000000;">CheckEmail
                                                                           data</span>-val-required=请输入邮箱地址 id=<span style="color: #000000;">Email
                                                                           name</span>=member_email&gt; &lt;<span style="color: #000000;">span
                                        </span><span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">text-danger field-validation-valid</span><span style="color: #800000;">"</span> data-valmsg-<span style="color: #0000ff;">for</span>=<span style="color: #000000;">Email
                                        data</span>-valmsg-replace=true&gt;&lt;/span&gt;&lt;/div&gt;
                            &lt;/div&gt;
                            &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-group form-row</span><span style="color: #800000;">"</span>&gt;
                                &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">col-sm-2 control-label</span><span style="color: #800000;">"</span>&gt;&lt;label <span style="color: #0000ff;">class</span>=w4-4 <span style="color: #0000ff;">for</span>=PhoneNum&gt;手机号码&lt;/label&gt;&lt;/div&gt;
                                &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">col-sm-10 has-feedback</span><span style="color: #800000;">"</span>&gt;
                                    &lt;div <span style="color: #0000ff;">class</span>=mobile-control-wrap&gt;&lt;input style=<span style="color: #800000;">"</span><span style="color: #800000;">display: none;</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-control country-code</span><span style="color: #800000;">"</span> type=text data-val=<span style="color: #000000;">true
                                                              data</span>-val-maxlength=国家代码格式错误 data-val-maxlength-max=4<span style="color: #000000;">
                                                              data</span>-val-regex=国家代码格式错误 data-val-regex-pattern=^\+\d{1,3<span style="color: #000000;">}$
                                                              data</span>-val-required=请输入国家代码 id=CountryCode name=<span style="color: #000000;">CountryCode
                                                              value</span>=+86&gt; &lt;input <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-control mobile-num</span><span style="color: #800000;">"</span><span style="color: #000000;">
                                                          placeholder</span>=绑定你的手机号 type=<span style="color: #000000;">text
                                                          data</span>-val=true data-val-regex=<span style="color: #000000;">手机号码有误
                                                          data</span>-val-regex-pattern=^\d{4,13<span style="color: #000000;">}$
                                                          data</span>-val-remote=<span style="color: #800000;">"</span><span style="color: #800000;">'手机号码' is invalid.</span><span style="color: #800000;">"</span><span style="color: #000000;">
                                                          data</span>-val-remote-additionalfields=*<span style="color: #000000;">.PhoneNum
                                                          data</span>-val-remote-url=/Account/<span style="color: #000000;">CheckPhoneNum
                                                          data</span>-val-required=请输入手机号码 id=<span style="color: #000000;">PhoneNum
                                                          name</span>=member_tel&gt;&lt;/div&gt;
                                    &lt;span <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">text-danger field-validation-valid</span><span style="color: #800000;">"</span> data-valmsg-<span style="color: #0000ff;">for</span>=<span style="color: #000000;">CountryCode
                                          data</span>-valmsg-replace=true&gt;&lt;/span&gt; &lt;<span style="color: #000000;">span
                                        </span><span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">text-danger field-validation-valid</span><span style="color: #800000;">"</span><span style="color: #000000;">
                                        data</span>-valmsg-<span style="color: #0000ff;">for</span>=<span style="color: #000000;">PhoneNum
                                        data</span>-valmsg-replace=true&gt;&lt;/span&gt;&lt;/div&gt;
                            &lt;/div&gt;
                            &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-group form-row</span><span style="color: #800000;">"</span>&gt;
                                &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">col-sm-2 control-label</span><span style="color: #800000;">"</span>&gt;&lt;label <span style="color: #0000ff;">class</span>=w4-4 <span style="color: #0000ff;">for</span>=LoginName&gt;登录名称&lt;/label&gt;&lt;/div&gt;
                                &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">col-sm-10 has-feedback</span><span style="color: #800000;">"</span>&gt;&lt;input <span style="color: #0000ff;">class</span>=form-control placeholder=<span style="color: #000000;">登录用户名，不少于4个字符
                                                                           type</span>=<span style="color: #000000;">text
                                                                           data</span>-val=<span style="color: #000000;">true
                                                                           data</span>-val-length=<span style="color: #000000;">不合要求，至少2个字符，最多30个字符
                                                                           data</span>-val-length-max=30 data-val-length-min=2<span style="color: #000000;">
                                                                           data</span>-val-nospace=<span style="color: #000000;">登录用户名不能包含空格
                                                                           data</span>-val-remote=<span style="color: #800000;">"</span><span style="color: #800000;">'登录名称' is invalid.</span><span style="color: #800000;">"</span><span style="color: #000000;">
                                                                           data</span>-val-remote-additionalfields=*<span style="color: #000000;">.LoginName
                                                                           data</span>-val-remote-url=/Account/<span style="color: #000000;">CheckLoginName
                                                                           data</span>-val-required=请输入登录用户名 id=<span style="color: #000000;">LoginName
                                                                           name</span>=member_name&gt;
                                    &lt;span <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">text-danger field-validation-valid</span><span style="color: #800000;">"</span> data-valmsg-<span style="color: #0000ff;">for</span>=<span style="color: #000000;">LoginName
                                          data</span>-valmsg-replace=true&gt;&lt;/span&gt;&lt;/div&gt;
                            &lt;/div&gt;
                            &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-group form-row</span><span style="color: #800000;">"</span>&gt;
                                &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">col-sm-2 control-label</span><span style="color: #800000;">"</span>&gt;&lt;label <span style="color: #0000ff;">class</span>=w4-4 <span style="color: #0000ff;">for</span>=DisplayName&gt;显示名称&lt;/label&gt;&lt;/div&gt;
                                &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">col-sm-10 has-feedback</span><span style="color: #800000;">"</span>&gt;&lt;input <span style="color: #0000ff;">class</span>=form-control placeholder=<span style="color: #000000;">即昵称，不少于2个字符
                                                                           type</span>=<span style="color: #000000;">text
                                                                           data</span>-val=<span style="color: #000000;">true
                                                                           data</span>-val-length=<span style="color: #000000;">不合要求，至少2个字符，最多20个字符
                                                                           data</span>-val-length-max=20 data-val-length-min=2<span style="color: #000000;">
                                                                           data</span>-val-regex=<span style="color: #000000;">不能包含空格、@、:和，不能以._结尾
                                                                           data</span>-val-regex-pattern=^(?!.*[@:：\s]).*[^<span style="color: #000000;">._]$
                                                                           data</span>-val-remote=<span style="color: #800000;">"</span><span style="color: #800000;">'显示名称' is invalid.</span><span style="color: #800000;">"</span><span style="color: #000000;">
                                                                           data</span>-val-remote-additionalfields=*<span style="color: #000000;">.DisplayName
                                                                           data</span>-val-remote-url=/Account/<span style="color: #000000;">CheckDisplayName
                                                                           data</span>-val-required=请输入显示名称 id=<span style="color: #000000;">DisplayName
                                                                           name</span>=member_nickname&gt; &lt;<span style="color: #000000;">span
                                        </span><span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">text-danger field-validation-valid</span><span style="color: #800000;">"</span> data-valmsg-<span style="color: #0000ff;">for</span>=<span style="color: #000000;">DisplayName
                                        data</span>-valmsg-replace=true&gt;&lt;/span&gt;&lt;/div&gt;
                            &lt;/div&gt;
                            &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-group form-row</span><span style="color: #800000;">"</span>&gt;
                                &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">col-sm-2 control-label</span><span style="color: #800000;">"</span>&gt;&lt;label <span style="color: #0000ff;">class</span>=w4-2 <span style="color: #0000ff;">for</span>=Password&gt;密码&lt;/label&gt;&lt;/div&gt;
                                &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">col-sm-10 has-feedback</span><span style="color: #800000;">"</span>&gt;&lt;input <span style="color: #0000ff;">class</span>=form-<span style="color: #000000;">control
                                                                           placeholder</span>=<span style="color: #000000;">至少8位，必须包含字母、数字、特殊字符
                                                                           type</span>=password data-val=<span style="color: #000000;">true
                                                                           data</span>-val-length=不合要求，密码长度要求8-<span style="color: #000000;">30位
                                                                           data</span>-val-length-max=30<span style="color: #000000;">
                                                                           data</span>-val-length-min=8<span style="color: #000000;">
                                                                           data</span>-val-nospace=<span style="color: #000000;">密码不能包含空格
                                                                           data</span>-val-regex=<span style="color: #000000;">密码必须包含字母、数字和特殊字符的组合
                                                                           data</span>-val-regex-pattern=<span style="color: #800000;">"</span><span style="color: #800000;">^(?=.*[0-9])(?=.*[a-zA-Z])(?=.*[^a-zA-Z0-9])[-0-9a-zA-Z~!@#$%^&amp;amp;*`_=+\]\[{}:;\\|:;&amp;#34;'/?&gt;.&amp;lt;,\(\)]{8,30}$</span><span style="color: #800000;">"</span><span style="color: #000000;">
                                                                           data</span>-val-required=请输入密码 id=<span style="color: #000000;">Password
                                                                           name</span>=member_pwd&gt; &lt;<span style="color: #000000;">span
                                        </span><span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">text-danger field-validation-valid</span><span style="color: #800000;">"</span> data-valmsg-<span style="color: #0000ff;">for</span>=<span style="color: #000000;">Password
                                        data</span>-valmsg-replace=true&gt;&lt;/span&gt;&lt;/div&gt;
                            &lt;/div&gt;
                            &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-group form-row</span><span style="color: #800000;">"</span>&gt;
                                &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">col-sm-2 control-label</span><span style="color: #800000;">"</span>&gt;&lt;label <span style="color: #0000ff;">class</span>=w4-4 <span style="color: #0000ff;">for</span>=ConfirmPassword&gt;确认密码&lt;/label&gt;
                                &lt;/div&gt;
                                &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">col-sm-10 has-feedback</span><span style="color: #800000;">"</span>&gt;&lt;input <span style="color: #0000ff;">class</span>=form-control placeholder=<span style="color: #000000;">请输入确认密码
                                                                           type</span>=<span style="color: #000000;">password
                                                                           data</span>-val=true data-val-equalto=<span style="color: #000000;">确认密码错误
                                                                           data</span>-val-equalto-other=*<span style="color: #000000;">.Password
                                                                           id</span>=<span style="color: #000000;">ConfirmPassword
                                                                           name</span>=r_pwd&gt; &lt;<span style="color: #000000;">span
                                        </span><span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">text-danger field-validation-valid</span><span style="color: #800000;">"</span> data-valmsg-<span style="color: #0000ff;">for</span>=<span style="color: #000000;">ConfirmPassword
                                        data</span>-valmsg-replace=true&gt;&lt;/span&gt;&lt;/div&gt;
                            &lt;/div&gt;
                            &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-group form-row</span><span style="color: #800000;">"</span>&gt;

                            &lt;/div&gt;
                            &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">form-group form-row</span><span style="color: #800000;">"</span>&gt;
                                &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">offset-sm-2 col-sm-10</span><span style="color: #800000;">"</span>&gt;&lt;span <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">col-sm-12 ajax-error</span><span style="color: #800000;">"</span>&gt;&lt;/span&gt;

                                    &lt;button id=submitBtn type=<span style="color: #000000;">submit
                                            </span><span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">btn ladda-button mx-auto d-block cnblogs-btn-blue</span><span style="color: #800000;">"</span><span style="color: #000000;">
                                            data</span>-style=zoom-<span style="color: #0000ff;">in</span>&gt;&lt;span <span style="color: #0000ff;">class</span>=ladda-label&gt;注册&lt;/span&gt;&lt;/button&gt;

                                &lt;/div&gt;
                            &lt;/div&gt;

                            &lt;div <span style="color: #0000ff;">class</span>=<span style="color: #800000;">"</span><span style="color: #800000;">offset-sm-2 register-sign</span><span style="color: #800000;">"</span>&gt;&lt;span <span style="color: #0000ff;">class</span>=asterisk&gt;*&lt;/span&gt;<span style="color: #000000;"> 点击 &ldquo;注册&rdquo; 按钮，即表示您同意并愿意遵守
                                </span>&lt;<span style="color: #000000;">a
                                        </span><span style="color: #0000ff;">class</span>=look-agreeon target=<span style="color: #000000;">_blank
                                        href</span>=//passport.cnblogs.com/agreement.html&gt;用户协议&lt;/a&gt;<span style="color: #000000;">。
                            </span>&lt;/div&gt;

                        &lt;/form&gt;
                    &lt;/div&gt;
                &lt;/div&gt;<span style="color: #000000;">
                {</span><span style="color: #008000;">#</span><span style="color: #008000;">注册的表单结束#}</span>
            &lt;/div&gt;</pre>
</div>
<p>前端jquery</p>
<div class="cnblogs_code">
<pre><code>{<span style="color: #008000;">#</span><span style="color: #008000;">注册的jquery#}</span>
<span style="color: #000000;">$(document).ready(function () {
    </span>//<span style="color: #000000;">当点击注册按钮时候，把form表单里的内容提交到后台
    $(</span><span style="color: #800000;">"</span><span style="color: #800000;">#submitBtn</span><span style="color: #800000;">"</span><span style="color: #000000;">).click(function () {
        $.post(</span><span style="color: #800000;">"</span><span style="color: #800000;">/blog/regist/</span><span style="color: #800000;">"</span>, $(<span style="color: #800000;">'</span><span style="color: #800000;">#registerForm</span><span style="color: #800000;">'</span><span style="color: #000000;">).serialize(), function (data) {
            </span><span style="color: #0000ff;">if</span> (data.status ==<span style="color: #000000;"> 0) {
                arr </span>=<span style="color: #000000;"> {
                    </span><span style="color: #800000;">'</span><span style="color: #800000;">member_name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">登录名称</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                    </span><span style="color: #800000;">'</span><span style="color: #800000;">member_nickname</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">显示名称</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                    </span><span style="color: #800000;">'</span><span style="color: #800000;">member_pwd</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">密码</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                    </span><span style="color: #800000;">'</span><span style="color: #800000;">r_pwd</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">确认密码</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                    </span><span style="color: #800000;">'</span><span style="color: #800000;">member_email</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">邮箱</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                    </span><span style="color: #800000;">'</span><span style="color: #800000;">member_tel</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">手机号码</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                    </span><span style="color: #800000;">'</span><span style="color: #800000;">__all__</span><span style="color: #800000;">'</span>: <span style="color: #800000;">''</span><span style="color: #000000;">
                };
                $.each(data[</span><span style="color: #800000;">'</span><span style="color: #800000;">info</span><span style="color: #800000;">'</span>], function (key, value) {  //<span style="color: #000000;">遍历键值对
                    console.log(key);
                    console.log(value[0]);
                    layer.msg(arr[key] </span>+<span style="color: #000000;"> value[0]);
                    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> false;
                    layer.msg(arr[key] </span>+ data[<span style="color: #800000;">'</span><span style="color: #800000;">info</span><span style="color: #800000;">'</span><span style="color: #000000;">][key]);
                    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> false;
                });
            } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (data.status == 1<span style="color: #000000;">) {
                layer.msg(data[</span><span style="color: #800000;">'</span><span style="color: #800000;">info</span><span style="color: #800000;">'</span><span style="color: #000000;">], function () {
                    location.href </span>= <span style="color: #800000;">"</span><span style="color: #800000;">{% url 'index' %}</span><span style="color: #800000;">"</span><span style="color: #000000;">;
                });
            } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                layer.msg(data[</span><span style="color: #800000;">'</span><span style="color: #800000;">info</span><span style="color: #800000;">'</span><span style="color: #000000;">]);
            }

        }, </span><span style="color: #800000;">'</span><span style="color: #800000;">json</span><span style="color: #800000;">'</span><span style="color: #000000;">);
    });
});
{</span><span style="color: #008000;">#</span><span style="color: #008000;">注册的jquery结束#}</span></pre>
</div>
<p>后台路由</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> 注册</span>
path(<span style="color: #800000;">'</span><span style="color: #800000;">regist/</span><span style="color: #800000;">'</span>, login.regist,name=<span style="color: #800000;">'</span><span style="color: #800000;">regist</span><span style="color: #800000;">'</span>),</pre>
</div>
<p>写钩子验证：项目目录下创建my_forms.py文件</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">from</span> django <span style="color: #0000ff;">import</span> forms  <span style="color: #008000;">#</span><span style="color: #008000;">自动验证 # forms组件</span>
<span style="color: #0000ff;">from</span> django.forms <span style="color: #0000ff;">import</span><span style="color: #000000;"> widgets
</span><span style="color: #0000ff;">from</span> django.core.exceptions <span style="color: #0000ff;">import</span><span style="color: #000000;"> ValidationError
</span><span style="color: #0000ff;">from</span> django.core.validators <span style="color: #0000ff;">import</span><span style="color: #000000;"> RegexValidator

</span><span style="color: #0000ff;">from</span> blog.models <span style="color: #0000ff;">import</span><span style="color: #000000;"> Member
</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> UserForm(forms.Form):
    wid_01 </span>= widgets.TextInput(attrs={<span style="color: #800000;">"</span><span style="color: #800000;">class</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">form-control</span><span style="color: #800000;">"</span>})<span style="color: #008000;">#</span><span style="color: #008000;">&lt;input type='text' class="form-control"&gt;</span>
    wid_02 = widgets.PasswordInput(attrs={<span style="color: #800000;">"</span><span style="color: #800000;">class</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">form-control</span><span style="color: #800000;">"</span>})<span style="color: #008000;">#</span><span style="color: #008000;">&lt;input type='password' class="form-control"&gt;</span>
    member_name=forms.CharField(max_length=60,min_length=4,label=<span style="color: #800000;">"</span><span style="color: #800000;">用户名</span><span style="color: #800000;">"</span>,widget=wid_01,error_messages={<span style="color: #800000;">"</span><span style="color: #800000;">required</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">该字段必填</span><span style="color: #800000;">"</span><span style="color: #000000;">})
    member_nickname </span>= forms.CharField(max_length=60, min_length=2, label=<span style="color: #800000;">"</span><span style="color: #800000;">显示名称</span><span style="color: #800000;">"</span>, widget=<span style="color: #000000;">wid_01,
                                  error_messages</span>={<span style="color: #800000;">"</span><span style="color: #800000;">required</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">该字段必填</span><span style="color: #800000;">"</span><span style="color: #000000;">})
    member_pwd</span>=forms.CharField(max_length=30,min_length=8,label=<span style="color: #800000;">"</span><span style="color: #800000;">密码</span><span style="color: #800000;">"</span>,widget=wid_02,validators=[RegexValidator(<span style="color: #800000;">'</span><span style="color: #800000;">\d+</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">只能是数字</span><span style="color: #800000;">'</span>) ],error_messages={<span style="color: #800000;">'</span><span style="color: #800000;">required</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">密码不能为空</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">min_length</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">密码长度不能小于8</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">max_length</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">密码长度不能大于18</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">invalid</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">密码格式错误</span><span style="color: #800000;">'</span><span style="color: #000000;">,})
    r_pwd</span>=forms.CharField(max_length=30,min_length=8,label=<span style="color: #800000;">"</span><span style="color: #800000;">确认密码</span><span style="color: #800000;">"</span>,widget=wid_02,validators=[RegexValidator(<span style="color: #800000;">'</span><span style="color: #800000;">\d+</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">只能是数字</span><span style="color: #800000;">'</span>) ],error_messages={<span style="color: #800000;">'</span><span style="color: #800000;">required</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">密码不能为空</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">min_length</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">密码长度不能小于8</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">max_length</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">密码长度不能大于18</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">invalid</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">密码格式错误</span><span style="color: #800000;">'</span>,}) <span style="color: #008000;">#</span><span style="color: #008000;">/(?=.*[a-z])(?=.*\d)(?=.*[#@!~%^&amp;*])[a-z\d#@!~%^&amp;*]{8,16}/i</span>
    member_email = forms.EmailField(label=<span style="color: #800000;">"</span><span style="color: #800000;">邮箱</span><span style="color: #800000;">"</span>,widget=wid_01,error_messages={<span style="color: #800000;">"</span><span style="color: #800000;">required</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">该字段必填</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">invalid</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">格式不正确</span><span style="color: #800000;">"</span><span style="color: #000000;">})
    member_tel </span>= forms.CharField(max_length=11, widget=wid_01,label=<span style="color: #800000;">"</span><span style="color: #800000;">电话号码</span><span style="color: #800000;">"</span><span style="color: #000000;">,)

    </span><span style="color: #008000;">#</span><span style="color: #008000;"> 局部钩子</span>
    <span style="color: #0000ff;">def</span><span style="color: #000000;"> clean_member_name(self):
        val </span>= self.cleaned_data.get(<span style="color: #800000;">"</span><span style="color: #800000;">member_name</span><span style="color: #800000;">"</span><span style="color: #000000;">)
        res </span>= Member.objects.filter(member_name=<span style="color: #000000;">val)
        </span><span style="color: #0000ff;">if</span> <span style="color: #0000ff;">not</span><span style="color: #000000;"> res:
            </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> val
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">:
            </span><span style="color: #0000ff;">raise</span> ValidationError(<span style="color: #800000;">"</span><span style="color: #800000;">用户名已存在!</span><span style="color: #800000;">"</span><span style="color: #000000;">)
    </span><span style="color: #008000;">#</span><span style="color: #008000;"> 全局钩子</span>
    <span style="color: #0000ff;">def</span><span style="color: #000000;"> clean(self):
        member_pwd</span>=self.cleaned_data.get(<span style="color: #800000;">"</span><span style="color: #800000;">member_pwd</span><span style="color: #800000;">"</span><span style="color: #000000;">)
        r_pwd</span>=self.cleaned_data.get(<span style="color: #800000;">"</span><span style="color: #800000;">r_pwd</span><span style="color: #800000;">"</span><span style="color: #000000;">)
        </span><span style="color: #0000ff;">if</span> member_pwd <span style="color: #0000ff;">and</span><span style="color: #000000;"> r_pwd:
            </span><span style="color: #0000ff;">if</span> member_pwd==<span style="color: #000000;">r_pwd:
                </span><span style="color: #008000;">#</span><span style="color: #008000;"> print(self.cleaned_data)</span>
                <span style="color: #0000ff;">return</span><span style="color: #000000;"> self.cleaned_data
            </span><span style="color: #0000ff;">else</span><span style="color: #000000;">:
                </span><span style="color: #0000ff;">raise</span> ValidationError(<span style="color: #800000;">'</span><span style="color: #800000;">两次密码不一致!</span><span style="color: #800000;">'</span><span style="color: #000000;">)
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">:
            </span><span style="color: #0000ff;">return</span> self.cleaned_data</pre>
</div>
<p>后台方法</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">from</span> blog.my_forms <span style="color: #0000ff;">import</span> *

<span style="color: #008000;">#</span><span style="color: #008000;"> 注册页</span>
<span style="color: #0000ff;">def</span><span style="color: #000000;"> regist(request):
    res </span>= {<span style="color: #800000;">'</span><span style="color: #800000;">status</span><span style="color: #800000;">'</span>: None, <span style="color: #800000;">'</span><span style="color: #800000;">info</span><span style="color: #800000;">'</span><span style="color: #000000;">: None}
    </span><span style="color: #0000ff;">if</span> request.method == <span style="color: #800000;">"</span><span style="color: #800000;">POST</span><span style="color: #800000;">"</span><span style="color: #000000;">:
        form </span>=<span style="color: #000000;"> UserForm(request.POST)
        </span><span style="color: #0000ff;">if</span> <span style="color: #0000ff;">not</span><span style="color: #000000;"> form.is_valid():
            res[</span><span style="color: #800000;">'</span><span style="color: #800000;">status</span><span style="color: #800000;">'</span>] =<span style="color: #000000;"> 0
            res[</span><span style="color: #800000;">'</span><span style="color: #800000;">info</span><span style="color: #800000;">'</span>] =<span style="color: #000000;"> form.errors
            </span><span style="color: #0000ff;">return</span> HttpResponse(json.dumps(res))  <span style="color: #008000;">#</span><span style="color: #008000;"> 把这个结果告诉给前台，ajax</span>
<span style="color: #000000;">
        member_name </span>= request.POST.get(<span style="color: #800000;">"</span><span style="color: #800000;">member_name</span><span style="color: #800000;">"</span><span style="color: #000000;">)
        member_nickname </span>= request.POST.get(<span style="color: #800000;">"</span><span style="color: #800000;">member_nickname</span><span style="color: #800000;">"</span><span style="color: #000000;">)
        member_pwd </span>= make_password(request.POST.get(<span style="color: #800000;">"</span><span style="color: #800000;">member_pwd</span><span style="color: #800000;">"</span><span style="color: #000000;">))
        member_email </span>= request.POST.get(<span style="color: #800000;">"</span><span style="color: #800000;">member_email</span><span style="color: #800000;">"</span><span style="color: #000000;">)
        member_tel </span>= request.POST.get(<span style="color: #800000;">"</span><span style="color: #800000;">member_tel</span><span style="color: #800000;">"</span><span style="color: #000000;">)
        old_member_obj </span>= Member.objects.filter(member_tel=<span style="color: #000000;">member_tel)
        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> old_member_obj:
            res[</span><span style="color: #800000;">'</span><span style="color: #800000;">status</span><span style="color: #800000;">'</span>] = 3<span style="color: #000000;">
            res[</span><span style="color: #800000;">'</span><span style="color: #800000;">info</span><span style="color: #800000;">'</span>] = <span style="color: #800000;">'</span><span style="color: #800000;">手机号已注册</span><span style="color: #800000;">'</span>
            <span style="color: #0000ff;">return</span><span style="color: #000000;"> HttpResponse(json.dumps(res))
        member_obj </span>= Member.objects.create(member_name=member_name, member_nickname=<span style="color: #000000;">member_nickname,
                                           member_pwd</span>=member_pwd, member_email=member_email, member_tel=<span style="color: #000000;">member_tel)

        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> member_obj:
            </span><span style="color: #008000;">#</span><span style="color: #008000;"> res = {'status': 1, 'info': '登录成功'}</span>
            res[<span style="color: #800000;">'</span><span style="color: #800000;">status</span><span style="color: #800000;">'</span>] = 1<span style="color: #000000;">
            res[</span><span style="color: #800000;">'</span><span style="color: #800000;">info</span><span style="color: #800000;">'</span>] = <span style="color: #800000;">'</span><span style="color: #800000;">注册成功，即将跳转至首页</span><span style="color: #800000;">'</span>
        <span style="color: #0000ff;">else</span><span style="color: #000000;">:
            res[</span><span style="color: #800000;">'</span><span style="color: #800000;">status</span><span style="color: #800000;">'</span>] = 2<span style="color: #000000;">
            res[</span><span style="color: #800000;">'</span><span style="color: #800000;">info</span><span style="color: #800000;">'</span>] = <span style="color: #800000;">'</span><span style="color: #800000;">发生了一个意料之外的错误，注册失败</span><span style="color: #800000;">'</span><span style="color: #000000;">

        response_new </span>= HttpResponse(json.dumps(res))  <span style="color: #008000;">#</span><span style="color: #008000;"> 把这个结果告诉给前台，ajax</span>
        <span style="color: #008000;">#</span><span style="color: #008000;"> response_new.set_cookie("member_id",member_obj.member_id)#设置cookie</span>
        <span style="color: #008000;">#</span><span style="color: #008000;"> response_new.set_cookie("member_name", member_obj.member_name)</span>

        <span style="color: #008000;">#</span><span style="color: #008000;"> session</span>
        request.session[<span style="color: #800000;">'</span><span style="color: #800000;">member_id</span><span style="color: #800000;">'</span>] =<span style="color: #000000;"> member_obj.member_id
        request.session[</span><span style="color: #800000;">'</span><span style="color: #800000;">member_name</span><span style="color: #800000;">'</span>] =<span style="color: #000000;"> member_obj.member_name

        </span><span style="color: #008000;">#</span><span style="color: #008000;"> response_new.set_cookie("member_id", member_obj.member_id, expires = 60 * 60 * 24 * 7)</span>

        <span style="color: #0000ff;">return</span><span style="color: #000000;"> response_new
    </span><span style="color: #0000ff;">return</span> render(request, <span style="color: #800000;">'</span><span style="color: #800000;">blog/regist.html</span><span style="color: #800000;">'</span>)</pre>
</div>
<p>页面效果</p>
<p><img src="./images/django项目基于钩子验证的注册功能0.png" alt="" /></p>
<p>done。</p>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>