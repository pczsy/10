<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修《手把手教你》系列进阶篇之3-python+ selenium自动化测试 - python几种骚操作你都知道吗？（详细教程）' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>《手把手教你》系列进阶篇之3-python+ selenium自动化测试 - python几种骚操作你都知道吗？（详细教程）</center></div><div class='banquan'>原文出处:本文由博客园博主北京-宏哥提供。<br/>
原文连接:https://www.cnblogs.com/du-hong/p/12030143.html</div><br>
    <h3>1. 简介</h3>
<p>&nbsp;　　这篇文章主要是给小伙伴或者童鞋们介绍和分享&nbsp;python几种骚操：读取配置文件、获取根目录的相对路径、获取系统时间和格式化时间显示、字符串切割等等操作。为后边的自动化框架打下一个结实的基础。</p>
<h3 class="title-article">2. Python读取配置文件内容</h3>
<p>　　本文来介绍下Python中如何读取配置文件。任何一个项目，都涉及到了配置文件和管理和读写，Python支持很多配置文件的读写，这里我们就介绍一种配置文件格式的读取数据，叫ini文件。Python中有一个类ConfigParser支持读ini文件。</p>
<h4>2.1 新建一个文件夹</h4>
<p>　　首先我们紧接着前边的内容，在项目下，新建一个文件夹，叫config，然后在这个文件夹下新建一个file类型的文件:config.ini</p>
<h5>2.1.1 代码实现：</h5>
<p><img src="./images/《手把手教你》系列进阶篇之3-python+ selenium自动化测试 - python几种骚操作你都知道吗？（详细教程）0.png" alt="" /></p>
<h5>2.1.2 参考代码：</h5>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> this is config file, only store browser type and server URL</span>
<span style="color: #000000;">
[browserType]
</span><span style="color: #008000;">#</span><span style="color: #008000;">browserName = Firefox</span>
browserName =<span style="color: #000000;"> Chrome
</span><span style="color: #008000;">#</span><span style="color: #008000;">browserName = IE</span>
<span style="color: #000000;">
[testServer]
URL </span>= https://<span style="color: #000000;">www.baidu.com
</span><span style="color: #008000;">#</span><span style="color: #008000;">URL = http://www.google.com</span></pre>
</div>
<h4>2.2&nbsp;获取当前项目的根目录的相对路径</h4>
<p>　　然后百度搜索一下，python中如何获取当前项目的根目录的相对路径这里采用：</p>
<div class="cnblogs_code">
<pre><code>os.path.dirname(os.path.abspath(<span style="color: #800000;">'</span><span style="color: #800000;">.</span><span style="color: #800000;">'</span>))</pre>
</div>
<h4>2.3 新建测试类</h4>
<p>　　最后，在另外一个包下新建一个测试类，用来测试读取配置文件是否正常。</p>
<h5>2.3.1 代码实现：</h5>
<p><img src="./images/《手把手教你》系列进阶篇之3-python+ selenium自动化测试 - python几种骚操作你都知道吗？（详细教程）1.png" alt="" /></p>
<h5>2.3.2 参考代码：</h5>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> coding=utf-8🔥</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> 1.先设置编码，utf-8可支持中英文，如上，一般放在第一行</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> 2.注释：包括记录创建时间，创建人，项目名称。</span>
<span style="color: #800000;">'''</span><span style="color: #800000;">
Created on 2019-12-13
@author: 北京-宏哥   QQ交流群：705269076
Project: 《手把手教你》系列进阶篇之3-python+ selenium自动化测试 - python基础扫盲
</span><span style="color: #800000;">'''</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> 3.导入模块</span>

<span style="color: #0000ff;">import</span><span style="color: #000000;"> configparser
</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> os


</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> TestReadConfigFile(object):

    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> get_value(self):
        root_dir </span>= os.path.dirname(os.path.abspath(<span style="color: #800000;">'</span><span style="color: #800000;">.</span><span style="color: #800000;">'</span>)) <span style="color: #008000;">#</span><span style="color: #008000;"> 获取项目根目录的相对路径</span>
        <span style="color: #0000ff;">print</span><span style="color: #000000;"> (root_dir)

        config </span>=<span style="color: #000000;"> configparser.ConfigParser()
        file_path </span>= os.path.dirname(os.path.abspath(<span style="color: #800000;">'</span><span style="color: #800000;">.</span><span style="color: #800000;">'</span>)) + <span style="color: #800000;">'</span><span style="color: #800000;">/config/config.ini</span><span style="color: #800000;">'</span><span style="color: #000000;">
        config.read(file_path)

        browser </span>= config.get(<span style="color: #800000;">"</span><span style="color: #800000;">browserType</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">browserName</span><span style="color: #800000;">"</span><span style="color: #000000;">)
        url </span>= config.get(<span style="color: #800000;">"</span><span style="color: #800000;">testServer</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">URL</span><span style="color: #800000;">"</span><span style="color: #000000;">)

        </span><span style="color: #0000ff;">return</span>(browser,url) <span style="color: #008000;">#</span><span style="color: #008000;"> 返回的是一个元组</span>
<span style="color: #000000;">
trcf </span>=<span style="color: #000000;"> TestReadConfigFile()
</span><span style="color: #0000ff;">print</span> (trcf.get_value())</pre>
</div>
<h5>2.3.3 运行结果：</h5>
<p>你可以试试更改config.ini的内容，看看测试打印出来是不是你更改的东西，在配置文件一般#表示注释，你想要哪行配置代码起作用，你就把前面的#去除，并且在注释其他同一个区域。在ini文件中 中括号包裹起来的部分叫section，了解一下就可以。</p>
<p>修改成如下图：</p>
<p><img src="./images/《手把手教你》系列进阶篇之3-python+ selenium自动化测试 - python几种骚操作你都知道吗？（详细教程）2.png" alt="" /></p>
<p>&nbsp;运行代码后，控制台打印如下图的结果</p>
<p><img src="./images/《手把手教你》系列进阶篇之3-python+ selenium自动化测试 - python几种骚操作你都知道吗？（详细教程）3.png" alt="" /></p>
<h3 class="title-article">3. Python获取系统时间和格式化时间显示</h3>
<p>前面一篇文章介绍了，Python如何读取config.ini文件，还有如何获取当前项目根目录相对路径写法。在实际项目的开发，获取项目根路径的相对路径写法是很有必要的，不要去是绝对路径。因为，你自己开发的一个项目，如果拷贝到别的电脑里，发现运行不了，需要更改很多文件的路径，那是不是很失败。本篇文章介绍如何去获取和打印格式化系统时间，我们很多时候，看到一些日志，前面都会记录年月日，时分秒，甚至毫秒，然后才是日志描述。这一篇文章，介绍时间获取和格式化时间，就是为了后面，如何写一个简单的日志类做铺垫的。</p>
<p>在PyCharm下的一个包，右键，新建一个get_time.py文件，输入一下代码：</p>
<p>这里提醒一个小技巧：在输入导入包的时候，有些包你没有安装，不是系统自带的，可能会遇到红色下划线，你需要鼠标悬停在这个红色下划线，然后在这行的左侧有一个小灯泡，鼠标点击这个小灯泡，一般会有import this xxx 或者install xxx，根据提示来导入包或者安装第三方插件。</p>
<h4>3.1 代码实现：</h4>
<p><img src="./images/《手把手教你》系列进阶篇之3-python+ selenium自动化测试 - python几种骚操作你都知道吗？（详细教程）4.png" alt="" /></p>
<h4>3.2 参考代码：</h4>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> coding=utf-8🔥</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> 1.先设置编码，utf-8可支持中英文，如上，一般放在第一行</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> 2.注释：包括记录创建时间，创建人，项目名称。</span>
<span style="color: #800000;">'''</span><span style="color: #800000;">
Created on 2019-12-13
@author: 北京-宏哥   QQ交流群：705269076
Project: 《手把手教你》系列进阶篇之3-python+ selenium自动化测试 - python基础扫盲
</span><span style="color: #800000;">'''</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> 3.导入模块</span>

<span style="color: #0000ff;">import</span><span style="color: #000000;"> time


</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> GetTime(object):

    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> get_system_time(self):
        </span><span style="color: #0000ff;">print</span> (time.time()) <span style="color: #008000;">#</span><span style="color: #008000;"> time.time()获取的是从1970年到现在的间隔，单位是秒</span>
        <span style="color: #0000ff;">print</span><span style="color: #000000;"> (time.localtime())
        new_time </span>= time.strftime(<span style="color: #800000;">'</span><span style="color: #800000;">%Y-%m-%d %H:%M:%S</span><span style="color: #800000;">'</span>, time.localtime()) <span style="color: #008000;">#</span><span style="color: #008000;"> 格式化时间，按照 2019-12-13 13:46:32的格式打印出来</span>
        <span style="color: #0000ff;">print</span><span style="color: #000000;"> (new_time)

gettime </span>=<span style="color: #000000;"> GetTime()
gettime.get_system_time()</span></pre>
</div>
<h4>3.3 运行结果：</h4>
<p>运行代码后，控制台打印如下图的结果</p>
<p><img src="./images/《手把手教你》系列进阶篇之3-python+ selenium自动化测试 - python几种骚操作你都知道吗？（详细教程）5.png" alt="" /></p>
<p><strong><span style="font-size: 14pt;">！！！</span></strong>你自己试试如何打印出这样的效果： 20191213134750的效果。答案自己在文章最后查找。</p>
<h3 class="title-article">4. Python中字符串切割操作</h3>
<p>本文来介绍Python中字符串切割操作，在Python中自带的一个切割方法split(),这个方法不带参数，就默认按照空格去切割字段，如果带参数，就按照参数去切割。为了演示切割效果，我们用百度搜索一个关键字，然后去找一共找到了多个结果的数字。</p>
<p>&nbsp; &nbsp; &nbsp; 例如，百度搜索&ldquo;selenium&rdquo;，查看找到了多少个结果，我们需要单独摘取出这个数字。</p>
<p><img src="./images/《手把手教你》系列进阶篇之3-python+ selenium自动化测试 - python几种骚操作你都知道吗？（详细教程）6.png" alt="" /></p>
<p>相关脚本代码如下：</p>
<h4>4.1 代码实现：</h4>
<p><img src="./images/《手把手教你》系列进阶篇之3-python+ selenium自动化测试 - python几种骚操作你都知道吗？（详细教程）7.png" alt="" /></p>
<h4>4.2 参考代码：</h4>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> coding=utf-8🔥</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> 1.先设置编码，utf-8可支持中英文，如上，一般放在第一行</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> 2.注释：包括记录创建时间，创建人，项目名称。</span>
<span style="color: #800000;">'''</span><span style="color: #800000;">
Created on 2019-12-13
@author: 北京-宏哥   QQ交流群：705269076
Project: 《手把手教你》系列进阶篇之3-python+ selenium自动化测试 - python基础扫盲
</span><span style="color: #800000;">'''</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> 3.导入模块</span>

<span style="color: #0000ff;">import</span><span style="color: #000000;"> time
</span><span style="color: #0000ff;">from</span> selenium <span style="color: #0000ff;">import</span><span style="color: #000000;"> webdriver


</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> GetSubString(object):

    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> get_search_result(self):
        driver </span>=<span style="color: #000000;"> webdriver.Chrome()
        driver.maximize_window()
        driver.implicitly_wait(</span>8<span style="color: #000000;">)

        driver.get(</span><span style="color: #800000;">'</span><span style="color: #800000;">https://www.baidu.com</span><span style="color: #800000;">'</span><span style="color: #000000;">)
        driver.find_element_by_id(</span><span style="color: #800000;">'</span><span style="color: #800000;">kw</span><span style="color: #800000;">'</span>).send_keys(<span style="color: #800000;">'</span><span style="color: #800000;">selenium</span><span style="color: #800000;">'</span><span style="color: #000000;">)
        time.sleep(</span>1<span style="color: #000000;">)
        driver.find_element_by_id(</span><span style="color: #800000;">'</span><span style="color: #800000;">su</span><span style="color: #800000;">'</span><span style="color: #000000;">).click()
        time.sleep(</span>1<span style="color: #000000;">)
        search_result_string </span>= driver.find_element_by_xpath(<span style="color: #800000;">"</span><span style="color: #800000;">//*/div[@class='nums']</span><span style="color: #800000;">"</span><span style="color: #000000;">).text
        </span><span style="color: #0000ff;">print</span><span style="color: #000000;"> (search_result_string)

        new_string </span>= search_result_string.split(<span style="color: #800000;">'</span><span style="color: #800000;">约</span><span style="color: #800000;">'</span>)[1] <span style="color: #008000;">#</span><span style="color: #008000;"> 第一次切割得到 xxxx个，[1]代表切割右边部分</span>
        <span style="color: #0000ff;">print</span><span style="color: #000000;"> (new_string)
        last_result </span>= new_string.split(<span style="color: #800000;">'</span><span style="color: #800000;">个</span><span style="color: #800000;">'</span>)[0] <span style="color: #008000;">#</span><span style="color: #008000;"> 第二次切割，得到我们想要的数字 [0]代表切割参照参数的左边部分</span>
        <span style="color: #0000ff;">print</span><span style="color: #000000;"> (last_result)


getstring </span>=<span style="color: #000000;"> GetSubString()
getstring.get_search_result()</span></pre>
</div>
<h4>4.3 运行结果：</h4>
<p>运行代码后，控制台打印如下图的结果</p>
<p><img src="./images/《手把手教你》系列进阶篇之3-python+ selenium自动化测试 - python几种骚操作你都知道吗？（详细教程）8.png" alt="" /></p>
<h3>5. 小结&nbsp;</h3>
<h4>5.1答案揭晓</h4>
<h5>5.1.1参考代码</h5>
<p>首先把上面的提问在这里把答案公布一下，其实很简单的，只需要修改一处地方即可以实现宏哥说的那种效果，聪明的你答对了没？？？</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> coding=utf-8🔥</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> 1.先设置编码，utf-8可支持中英文，如上，一般放在第一行</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> 2.注释：包括记录创建时间，创建人，项目名称。</span>
<span style="color: #800000;">'''</span><span style="color: #800000;">
Created on 2019-12-13
@author: 北京-宏哥   QQ交流群：705269076
Project: 《手把手教你》系列进阶篇之3-python+ selenium自动化测试 - python基础扫盲
</span><span style="color: #800000;">'''</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> 3.导入模块</span>

<span style="color: #0000ff;">import</span><span style="color: #000000;"> time


</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> GetTime(object):

    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> get_system_time(self):
        </span><span style="color: #0000ff;">print</span> (time.time()) <span style="color: #008000;">#</span><span style="color: #008000;"> time.time()获取的是从1970年到现在的间隔，单位是秒</span>
        <span style="color: #0000ff;">print</span><span style="color: #000000;"> (time.localtime())
        new_time </span>= time.strftime(<span style="color: #800000;">'</span><span style="color: #800000;">%Y%m%d%H%M%S</span><span style="color: #800000;">'</span>, time.localtime()) <span style="color: #008000;">#</span><span style="color: #008000;"> 格式化时间，按照 2017-04-15 13:46:32的格式打印出来</span>
        <span style="color: #0000ff;">print</span><span style="color: #000000;"> (new_time)

gettime </span>=<span style="color: #000000;"> GetTime()
gettime.get_system_time()</span></pre>
</div>
<h5>&nbsp;5.1.2 代码运行效果</h5>
<p>将上述代码运行后看一下是不是宏哥说的那种效果</p>
<p><img src="./images/《手把手教你》系列进阶篇之3-python+ selenium自动化测试 - python几种骚操作你都知道吗？（详细教程）9.png" alt="" /></p>
<p>好了，今天的分享就到这里吧！！！谢谢各位的耐心阅读。</p>
<p>&nbsp;</p>
<p style="text-align: center;"><span style="font-size: 18px;"><strong><strong>您的肯定就是我进步的动力。</strong>如果你感觉还不错，就请鼓励一下吧！记得随手点波&nbsp;<span style="font-size: 18pt;">推荐</span>&nbsp;不要忘记哦！！！</strong></span></p>
<p style="text-align: center;"><span style="font-size: 18px; color: #ff0000;"><strong>别忘了点推荐留下您来过痕迹</strong></span></p>
<p>&nbsp;</p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" src="./images/《手把手教你》系列进阶篇之3-python+ selenium自动化测试 - python几种骚操作你都知道吗？（详细教程）10.png" alt="" /></p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>