<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Python 入门之  内置模块 -- re模块' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Python 入门之  内置模块 -- re模块</center></div><div class='banquan'>原文出处:本文由博客园博主永亮提供。<br/>
原文连接:https://www.cnblogs.com/caiyongliang/p/11539822.html</div><br>
    <h1 id="python-入门之-内置模块----re模块">Python 入门之 内置模块 -- re模块</h1>
<h2 id="re-模块">1、re 模块</h2>
<h3 id="什么是正则">（1）什么是正则？</h3>
<p>　<strong>正则就是用一些具有特殊含义的符号组合到一起（称为正则表达式）来描述字符或者字符串的方法。或者说：正则就是用来描述一类事物的规则。</strong>（在Python中）它内嵌在Python中，并通过 re 模块实现。正则表达式模式被编译成一系列的字节码，然后由用 C 编写的匹配引擎执行。</p>
<table>
<thead>
<tr class="header">
<th>元字符</th>
<th>匹配内容</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>\w</td>
<td>匹配字母（包含中文）或数字或下划线</td>
</tr>
<tr class="even">
<td>\W</td>
<td>匹配非字母（包含中文）或数字或下划线</td>
</tr>
<tr class="odd">
<td>\s</td>
<td>匹配任意的空白符</td>
</tr>
<tr class="even">
<td>\S</td>
<td>匹配任意非空白符</td>
</tr>
<tr class="odd">
<td>\d</td>
<td>匹配数字</td>
</tr>
<tr class="even">
<td>\D</td>
<td>匹配非数字</td>
</tr>
<tr class="odd">
<td>\A</td>
<td>从字符串开头匹配</td>
</tr>
<tr class="even">
<td>\z</td>
<td>匹配字符串的结束，如果是换行，只匹配到换行前的结果</td>
</tr>
<tr class="odd">
<td>\n</td>
<td>匹配一个换行符</td>
</tr>
<tr class="even">
<td>\t</td>
<td>匹配一个制表符</td>
</tr>
<tr class="odd">
<td>^</td>
<td>匹配字符串的开始</td>
</tr>
<tr class="even">
<td>$</td>
<td>匹配字符串的结尾</td>
</tr>
<tr class="odd">
<td>.</td>
<td>匹配任意字符，除了换行符，当re.DOTALL标记被指定时，则可以匹配包括换行符的任意字符。</td>
</tr>
<tr class="even">
<td>[...]</td>
<td>匹配字符组中的字符</td>
</tr>
<tr class="odd">
<td><a href="https://guobaoyuan.gitee.io/book/19-0%20re.html#fn_...">...</a></td>
<td>匹配除了字符组中的字符的所有字符</td>
</tr>
<tr class="even">
<td>*</td>
<td>匹配0个或者多个左边的字符。</td>
</tr>
<tr class="odd">
<td>+</td>
<td>匹配一个或者多个左边的字符。</td>
</tr>
<tr class="even">
<td>？</td>
<td>匹配0个或者1个左边的字符，非贪婪方式。</td>
</tr>
<tr class="odd">
<td>{n}</td>
<td>精准匹配n个前面的表达式。</td>
</tr>
<tr class="even">
<td>{n,m}</td>
<td>匹配n到m次由前面的正则表达式定义的片段，贪婪方式</td>
</tr>
<tr class="odd">
<td>ab</td>
<td>匹配a或者b</td>
</tr>
<tr class="even">
<td>()</td>
<td>匹配括号内的表达式，也表示一个组</td>
</tr>
</tbody>
</table>
<p><strong>---------------------------------------------------------------------匹配模式-------------------------------------------------------------------------</strong></p>
<pre><code><code>import  re </code></pre>
<h4 id="w-字母数字下划线中文">&lt;1&gt; \w 字母，数字，下划线，中文</h4>
<pre><code><code>print(re.findall(&quot;\w&quot;,&quot;小明-Marry_dsb123啸天吃D早餐&quot;))   # \w 字母.数字.下划线.中文 </code></pre>
<h4 id="w-不是字母数字下划线中文">&lt;2&gt; \W 不是字母，数字，下划线，中文</h4>
<pre><code><code>print(re.findall(&quot;\W&quot;,&quot;小明-Marry_dsb123啸天吃D早餐&quot;))   # \w 不是字母.数字.下划线.中文 </code></pre>
<h4 id="d-匹配数字">&lt;3&gt; \d 匹配数字</h4>
<pre><code><code>print(re.findall(&quot;\d&quot;,&quot;十10⑩&quot;))                       #  \d 匹配数字   </code></pre>
<h4 id="d-匹配非数字">&lt;4&gt; \D 匹配非数字</h4>
<pre><code><code>print(re.findall(&quot;\D&quot;,&quot;十10⑩&quot;))                       # \D 匹配非数字</code></pre>
<h4 id="a-从字符串开头匹配-以什么开头-常用-a">&lt;5&gt; \A 从字符串开头匹配 以什么开头 常用 ^a</h4>
<pre><code><code>print(re.findall(&quot;\Aa&quot;,&quot;asfdasdfasdfalex&quot;))</code></pre>
<pre><code><code>print(re.findall(&quot;^a&quot;,&quot;alex&quot;))                        # 以什么开头  </code></pre>
<h4 id="z-从字符串结尾匹配-以什么结尾-常用">&lt;6&gt; \Z 从字符串结尾匹配 以什么结尾 常用 $</h4>
<pre><code><code>print(re.findall(&quot;d\Z&quot;,&quot;asfdasdfasdfalex&quot;))</code></pre>
<pre><code><code>print(re.findall(&quot;x$&quot;,&quot;alex&quot;))                        # 匹配什么结尾  
</code></pre>
<h4 id="n-匹配换行符">&lt;7&gt; \n 匹配换行符</h4>
<pre><code><code>print(re.findall(&quot;\n&quot;,&quot;alex\nwusir&quot;))
</code></pre>
<h4 id="t-匹配制表符">&lt;8&gt; \t 匹配制表符</h4>
<pre><code><code>print(re.findall(&quot;\t&quot;,&quot;alex\twusir&quot;))
</code></pre>
<h4 id="字符串-匹配相应的字符串">&lt;9&gt; 字符串 匹配相应的字符串</h4>
<pre><code><code>print(re.findall(&quot;alex&quot;,&quot;alex\twusiralex&quot;))
</code></pre>
<h4 id="匹配字符组中的字符">&lt;10&gt; [...] 匹配字符组中的字符</h4>
<pre><code><code>print(re.findall(&#39;[0-9]&#39;,&quot;小明-Marry_dsb123啸天吃D早餐&quot;))                 
print(re.findall(&#39;[a-z]&#39;,&quot;小明-Marry_dsb123啸天吃D早餐&quot;))
print(re.findall(&#39;[A-Z]&#39;,&quot;小明-Marry_dsb123啸天吃D早餐&quot;))
</code></pre>
<h4 id="匹配非字符组中的字符">&lt;11&gt; ^[ ] 匹配非字符组中的字符</h4>
<pre><code><code>print(re.findall(&quot;[^0-9a-z]&quot;,&quot;123alex456&quot;))  
</code></pre>
<h4 id="匹配0个或多个左边的字符-贪婪匹配">&lt;12&gt; *匹配0个或多个左边的字符 贪婪匹配</h4>
<pre><code><code>print(re.findall(&quot;a*&quot;,&quot;marry,aa,aaaa,bbbbaaa,aaabbbaaa&quot;))    # 匹配*左侧字符串0次或多次  贪婪匹配
</code></pre>
<h4 id="匹配1个或多个左边的字符-贪婪匹配">&lt;13&gt; +匹配1个或多个左边的字符 贪婪匹配</h4>
<pre><code><code>print(re.findall(&quot;a+&quot;,&quot;alex,aa,aaaa,bbbbaaa,aaabbbaaa&quot;))  匹配左侧字符串一次或多次  贪婪匹配 
</code></pre>
<h4 id="匹配0个或1个左边的字符-非贪婪匹配">&lt;14&gt; ?匹配0个或1个左边的字符 非贪婪匹配</h4>
<pre><code><code>print(re.findall(&quot;a?&quot;,&quot;alex,aa,aaaa,bbbbaaa,aaabbbaaa&quot;))  # 匹配?号左侧0个或1个 非贪婪匹配
</code></pre>
<h4 id="n-精准匹配左边n个前面的表达式">&lt;15&gt; {n} 精准匹配左边n个前面的表达式</h4>
<pre><code><code>print(re.findall(&quot;[0-9]{11}&quot;,&quot;18612239999,18612239998,136133333323&quot;)) # 指定查找的元素个数 
</code></pre>
<h4 id="nm-匹配n到m次前面的正则表达式定义的片段">&lt;16&gt; {n,m} 匹配n到m次前面的正则表达式定义的片段</h4>
<pre><code><code>print(re.findall(&quot;a{3,8}&quot;,&quot;alex,aaaabbbaaaaabbbbbbaaa,aaaaaaaaabb,ccccddddaaaaaaaa&quot;)) 
</code></pre>
<h4 id="ab-匹配a或b">&lt;17&gt; a|b 匹配a或b</h4>
<pre><code><code>print(re.findall(&quot;a|b&quot;,&quot;alexdsb&quot;))
</code></pre>
<h4 id="匹配括号内的表达式也表示一组">&lt;18&gt; () 匹配括号内的表达式，也表示一组</h4>
<pre><code><code>print(re.findall(&quot;&lt;a&gt;(.+)&lt;/a&gt;&quot;,&quot;&lt;a&gt;alex&lt;/a&gt; &lt;a&gt;wusir&lt;/a&gt;&quot;))     #分组  
print(re.findall(&quot;&lt;a&gt;(.+?)&lt;/a&gt;&quot;,&quot;&lt;a&gt;alex&lt;/a&gt; &lt;a&gt;wusir&lt;/a&gt;&quot;))   #控制贪婪匹配 
</code></pre>
<h4 id="匹配任意字符除了换行符-当定义re.dotall时可以匹配换行符">&lt;19&gt; . 匹配任意字符，除了换行符 当定义re.DOTALL时，可以匹配换行符</h4>
<pre><code><code>print(re.findall(&quot;a.c&quot;,&quot;abc,aec,a\nc,a,c&quot;))           # 匹配任意一个字符串(\n除外) 
</code></pre>
<pre><code><code>print(re.findall(&quot;a.c&quot;,&quot;abc,aec,a\nc,a,c&quot;,re.DOTALL))
</code></pre>
<h4 id="就没有任意功能了">&lt;20&gt;  . 就没有任意功能了</h4>
<pre><code><code>print(re.findall(&quot;-\d+\.\d+|-[0-9]|\d+&quot;,s))
</code></pre>
<h4 id="s-匹配空格">&lt;21&gt; \s 匹配空格</h4>
<pre><code><code>print(re.findall(&quot;\s&quot;,&quot;alex\tdsbrimocjb&quot;))            # \s 匹配空格
</code></pre>
<h4 id="s-匹配非空格">&lt;22&gt; \S 匹配非空格</h4>
<pre><code><code>print(re.findall(&quot;\S&quot;,&quot;alex\tdsbrimocjb&quot;))            # \s 匹配非空格
</code></pre>
<p>试题：</p>
<pre><code><code>有如下字符串:&#39;alex_sb ale123_sb wu12sir_sb wusir_sb ritian_sb&#39; 的 alex wusir &#39;找到所有带_sb的内容
</code></pre>
<p>答案：</p>
<pre><code><code>s = &#39;alex_sb ale123_sb wu12sir_sb wusir_sb ritian_sb&#39;print(re.findall(&quot;(.+?)_sb&quot;,s))
</code></pre>
<p><strong>-------------------------------------------------------------------常用方法----------------------------------------------------------------</strong></p>
<h3 id="findall-全部找到返回的是一个列表">（1）findall 全部找到返回的是一个列表</h3>
<pre><code><code>print(re.findall(&quot;alex&quot;,&quot;alexdsb,alex_sb,alexnb,al_ex&quot;))
</code></pre>
<h3 id="search-从字符串中任意位置进行匹配查找到一个就停止了返回的是一个对象.-获取匹配的内容必须使用.group进行获取">（2）<strong>search</strong> 从字符串中任意位置进行匹配查找到一个就停止了,返回的是一个对象. 获取匹配的内容必须使用.group()进行获取</h3>
<pre><code><code>print(re.search(&quot;a.+&quot;,&quot;lexaaaa,bssssaaaasa,saaasaasa&quot;).group())
</code></pre>
<h3 id="match-从字符串开始位置进行匹配"><strong>（3）match</strong> 从字符串开始位置进行匹配</h3>
<pre><code><code>print(re.match(&quot;a.+&quot;,&quot;alexalexaaa,bssssaaaasa,saaasaasa&quot;).group())
</code></pre>
<p>试题</p>
<p>search 和 match 的区别</p>
<p>search 从任意位置开始查找</p>
<p>match 从头开始查找，如果不符合就不继续查找了</p>
<p>都用group()进行查看</p>
<h3 id="split----分割-必须要有">（4）split -- 分割 必须要有[ ]</h3>
<pre><code><code>print(re.split(&quot;[:;,.!#]&quot;,&quot;alex:dsb#wusir.djb&quot;))
</code></pre>
<h3 id="sub----替换">（5）sub -- 替换</h3>
<pre><code><code>s = &quot;alex:dsb#wusir.djb&quot;
print(re.sub(&quot;d&quot;,&quot;e&quot;,s,count=1))
</code></pre>
<h3 id="complie----定义匹配规则">（6）complie -- 定义匹配规则</h3>
<pre><code><code>s = re.compile(&quot;\w&quot;)
print(s.findall(&quot;alex:dsb#wusir.djb&quot;))
</code></pre>
<h3 id="finditer----返回一个迭代器">（7）finditer -- 返回一个迭代器</h3>
<pre><code><code>s = re.finditer(&quot;\w&quot;,&quot;alex:dsb#wusir.djb&quot;)   # 返回的就是一个迭代器
print(next(s).group())
print(next(s).group())
for i in s:
    print(i.group())
</code></pre>
<h3 id="search----给分组命名-p">（8）search -- 给分组命名 ?P</h3>
<pre><code><code>ret = re.search(&quot;&lt;(?P&lt;tag_name&gt;\w+)&gt;\w+&lt;/\w+&gt;&quot;,&quot;&lt;h1&gt;hello&lt;/h1&gt;&quot;)
ret = re.search(&quot;&lt;(?P&lt;tag_name&gt;\w+)&gt;(?P&lt;content&gt;\w+)&lt;/\w+&gt;&quot;,&quot;&lt;h1&gt;hello&lt;/h1&gt;&quot;)
print(ret.group(&quot;tag_name&quot;))
print(ret.group(&quot;content&quot;))
</code></pre>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>