<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修测试类——python编程从入门到实践' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>测试类——python编程从入门到实践</center></div><div class='banquan'>原文出处:本文由博客园博主Shirley-Yang提供。<br/>
原文连接:https://www.cnblogs.com/shirley-yang/p/11191629.html</div><br>
    <h4>1.各种断言方法</h4>
<p>　　常用断言方法：</p>
<table style="width: 356px; height: 155px;" border="0">
<tbody>
<tr>
<td style="text-align: center;">
<p><strong>方法</strong></p>
</td>
<td style="text-align: center;">
<p><strong>用途</strong></p>
</td>
</tr>
<tr>
<td style="text-align: center;">
<p>assertEqual(a, b)</p>
</td>
<td style="text-align: center;">
<p>核实a == b</p>
</td>
</tr>
<tr>
<td style="text-align: center;">
<p>assertNotEqual(a, b)</p>
</td>
<td style="text-align: center;">
<p>核实a != b</p>
</td>
</tr>
<tr>
<td style="text-align: center;">
<p>assertTrue(x)</p>
</td>
<td style="text-align: center;">
<p>核实x为True</p>
</td>
</tr>
<tr>
<td style="text-align: center;">
<p>assertFalse(x)</p>
</td>
<td style="text-align: center;">
<p>核实x为False</p>
</td>
</tr>
<tr>
<td style="text-align: center;">
<p>asseertIn(item, list)</p>
</td>
<td style="text-align: center;">
<p>核实item在list中</p>
</td>
</tr>
<tr>
<td style="text-align: center;">
<p>assertNotIn(item, list)</p>
</td>
<td style="text-align: center;">
<p>核实item不在list中</p>
</td>
</tr>
</tbody>
</table>
<h4>2.一个要测试的类</h4>
<p>　　首先编写一个类：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">survey.py</span></pre>
<hr />
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> AnonymousSurvey:
    </span><span style="color: #800000;">"""</span><span style="color: #800000;">收集匿名调查问卷的答案</span><span style="color: #800000;">"""</span>

    <span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self, question):
        </span><span style="color: #800000;">"""</span><span style="color: #800000;">存储一个问题，并为存储答案做准备</span><span style="color: #800000;">"""</span><span style="color: #000000;">
        self.question </span>=<span style="color: #000000;"> question
        self.responses </span>=<span style="color: #000000;"> []

    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> show_quetion(self):
        </span><span style="color: #800000;">"""</span><span style="color: #800000;">显示调查问卷</span><span style="color: #800000;">"""</span>
        <span style="color: #0000ff;">print</span><span style="color: #000000;">(self.question)

    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> store_response(self, new_response):
        </span><span style="color: #800000;">"""</span><span style="color: #800000;">存储单份调查答案</span><span style="color: #800000;">"""</span><span style="color: #000000;">
        self.responses.append(new_response)

    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> show_result(self):
        </span><span style="color: #800000;">"""</span><span style="color: #800000;">显示收集到的所有答卷</span><span style="color: #800000;">"""</span>
        <span style="color: #0000ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">Survey result:</span><span style="color: #800000;">"</span><span style="color: #000000;">)
        </span><span style="color: #0000ff;">for</span> response <span style="color: #0000ff;">in</span><span style="color: #000000;"> self.responses:
            </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">- </span><span style="color: #800000;">'</span> + response)</pre>
</div>
<p>　　为证明AnonymousSurvey类可以正确的工作，编写一个使用它的程序：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">language_survey.py</span></pre>
<hr />
<pre><code><span style="color: #0000ff;">from</span> survey <span style="color: #0000ff;">import</span><span style="color: #000000;"> AnonymousSurvey

</span><span style="color: #008000;">#</span><span style="color: #008000;"> 定义一个问题，并创建一个表示调查的AnonymousSurvey对象</span>
question = <span style="color: #800000;">"</span><span style="color: #800000;">What language did you first learn to speak?</span><span style="color: #800000;">"</span><span style="color: #000000;">
my_survey </span>=<span style="color: #000000;"> AnonymousSurvey(question)

</span><span style="color: #008000;">#</span><span style="color: #008000;"> 显示并存储问题的答案</span>
<span style="color: #000000;">my_survey.show_quetion()
</span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">Enter 'q' at any time to quit.\n</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">while</span><span style="color: #000000;"> True:
    response </span>= input(<span style="color: #800000;">"</span><span style="color: #800000;">Language: </span><span style="color: #800000;">"</span><span style="color: #000000;">)
    </span><span style="color: #0000ff;">if</span> response == <span style="color: #800000;">'</span><span style="color: #800000;">q</span><span style="color: #800000;">'</span><span style="color: #000000;">:
        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">
    my_survey.store_response(response)

</span><span style="color: #008000;">#</span><span style="color: #008000;"> 显示调查结果</span>
<span style="color: #0000ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">\nThank you to everyone who participated in survey!</span><span style="color: #800000;">"</span><span style="color: #000000;">)
my_survey.show_result()</span></pre>
</div>
<p>　　运行结果：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">What language did you first learn to speak?
Enter </span><span style="color: #800000;">'</span><span style="color: #800000;">q</span><span style="color: #800000;">'</span><span style="color: #000000;"> at any time to quit.

Language: English
Language: Spanish
Language: English
Language: Mandarin
Language: q

Thank you to everyone who participated </span><span style="color: #0000ff;">in</span><span style="color: #000000;"> survey!
Survey result:
</span>-<span style="color: #000000;"> English
</span>-<span style="color: #000000;"> Spanish
</span>-<span style="color: #000000;"> English
</span>- Mandarin</pre>
</div>
<h4>3.测试AnonymousSurvey类</h4>
<p>　　对AnonymousSurvey类行为的一个方面进行验证：如果用户面对调查问题时只提供了一个答案，这个答案也能被妥善地存储。使用方法assertIn()来核实它包含在答案列表中：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">test_survey.py</span></pre>
<hr />
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> unittest
</span><span style="color: #0000ff;">from</span> survey <span style="color: #0000ff;">import</span><span style="color: #000000;"> AnonymousSurvey


</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> TestAnonymousSurvey(unittest.TestCase):
    </span><span style="color: #800000;">"""</span><span style="color: #800000;">针对AnonymousSurvey类的测试</span><span style="color: #800000;">"""</span>

    <span style="color: #0000ff;">def</span><span style="color: #000000;"> test_store_single_response(self):
        </span><span style="color: #800000;">"""</span><span style="color: #800000;">测试单个答案会被妥善地存储</span><span style="color: #800000;">"""</span><span style="color: #000000;">
        question </span>= <span style="color: #800000;">"</span><span style="color: #800000;">What language did you first learn to speak?</span><span style="color: #800000;">"</span><span style="color: #000000;">
        my_survey </span>=<span style="color: #000000;"> AnonymousSurvey(question)
        my_survey.store_response(</span><span style="color: #800000;">'</span><span style="color: #800000;">English</span><span style="color: #800000;">'</span><span style="color: #000000;">)

        self.assertIn(</span><span style="color: #800000;">'</span><span style="color: #800000;">English</span><span style="color: #800000;">'</span><span style="color: #000000;">, my_survey.responses)


</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:
    unittest.main()</span></pre>
</div>
<p>　　运行test_survey.py时，测试通过了：</p>
<div class="cnblogs_code">
<pre><code>Ran 1 test <span style="color: #0000ff;">in</span><span style="color: #000000;"> 0.010s

OK</span></pre>
</div>
<p>　　只能收集一个答案的调查用途不大。下面核实用户提供三个答案时，它们也将被妥善地存储。为此，在AnonymousSurvey中再添加一个方法：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> unittest
</span><span style="color: #0000ff;">from</span> survey <span style="color: #0000ff;">import</span><span style="color: #000000;"> AnonymousSurvey


</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> TestAnonymousSurvey(unittest.TestCase):
    </span><span style="color: #800000;">"""</span><span style="color: #800000;">针对AnonymousSurvey类的测试</span><span style="color: #800000;">"""</span>

    <span style="color: #0000ff;">def</span><span style="color: #000000;"> test_store_single_response(self):
        ...

    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> test_store_three_response(self):
        </span><span style="color: #800000;">"""</span><span style="color: #800000;">测试三个答案会被妥善地存储</span><span style="color: #800000;">"""</span><span style="color: #000000;">
        question </span>= <span style="color: #800000;">"</span><span style="color: #800000;">What language did you first learn to speak?</span><span style="color: #800000;">"</span><span style="color: #000000;">
        my_survey </span>=<span style="color: #000000;"> AnonymousSurvey(question)
        responses </span>= [<span style="color: #800000;">'</span><span style="color: #800000;">English</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">Spanish</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">Mandarin</span><span style="color: #800000;">'</span><span style="color: #000000;">]
        </span><span style="color: #0000ff;">for</span> response <span style="color: #0000ff;">in</span><span style="color: #000000;"> responses:
            my_survey.store_response(response)

        </span><span style="color: #0000ff;">for</span> response <span style="color: #0000ff;">in</span><span style="color: #000000;"> responses:
            self.assertIn(response, my_survey.responses)


</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:
    unittest.main()        </span></pre>
</div>
<p>　　再次运行test_survey.py时，两个测试都通过了：</p>
<div class="cnblogs_code">
<pre><code>Ran 2 tests <span style="color: #0000ff;">in</span><span style="color: #000000;"> 0.002s

OK</span></pre>
</div>
<p>　　这些还有些重复的地方，怎么更简洁呢？</p>
<h4>4.方法setUp()</h4>
<p>　　unittest.TestCase类包含方法setUp()，只需创建这些对象一次，并在每个测试方法中使用它们。如果在TestCase类中包含了方法setUp()，Python将先运行它，再运行各个以test_打头的方法。这样，在编写的每个测试方法中都可使用方法setUp()中创建的对象。</p>
<p>　　使用setUp()来创建一个调查对象和一组答案，供方法test_store_single_response()和test_store_three_responses()使用：</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> unittest
</span><span style="color: #0000ff;">from</span> survey <span style="color: #0000ff;">import</span><span style="color: #000000;"> AnonymousSurvey


</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> TestAnonymousSurvey(unittest.TestCase):
    </span><span style="color: #800000;">"""</span><span style="color: #800000;">针对AnonymousSurvey类的测试</span><span style="color: #800000;">"""</span>

    <span style="color: #0000ff;">def</span><span style="color: #000000;"> setUp(self):
        </span><span style="color: #800000;">"""</span><span style="color: #800000;">
        创建一个调查对象和一组答案，供使用的测试方法使用
        </span><span style="color: #800000;">"""</span><span style="color: #000000;">
        question </span>= <span style="color: #800000;">"</span><span style="color: #800000;">What language did you first learn to speak?</span><span style="color: #800000;">"</span><span style="color: #000000;">
        self.my_survey </span>=<span style="color: #000000;"> AnonymousSurvey(question)
        self.responses </span>= [<span style="color: #800000;">'</span><span style="color: #800000;">English</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">Spanish</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">Mandarin</span><span style="color: #800000;">'</span><span style="color: #000000;">]

    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> test_store_single_response(self):
        </span><span style="color: #800000;">"""</span><span style="color: #800000;">测试单个答案会被妥善地存储</span><span style="color: #800000;">"""</span><span style="color: #000000;">
        self.my_survey.store_response(self.responses[0])
        self.assertIn(self.responses[0], self.my_survey.responses)

    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> test_store_three_response(self):
        </span><span style="color: #800000;">"""</span><span style="color: #800000;">测试三个答案会被妥善地存储</span><span style="color: #800000;">"""</span>
        <span style="color: #0000ff;">for</span> response <span style="color: #0000ff;">in</span><span style="color: #000000;"> self.responses:
            self.my_survey.store_response(response)
        </span><span style="color: #0000ff;">for</span> response <span style="color: #0000ff;">in</span><span style="color: #000000;"> self.responses:
            self.assertIn(response, self.my_survey.responses)


</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:
    unittest.main()</span></pre>
</div>
<p>　　方法setUp()做了两件事：创建一个调查对象；创建一个答案列表。存储这两样东西的变量名包含前缀self，因此可以在这个类中的任何地方使用。这个让两个测试方法都更加简单，不用创建调查对象和答案。</p>
<p>　　测试自己编写的类时，方法setUp()让测试方法编写起来更容易：可在setUp中创建一系列实例并设置它们的属性，再在测试方法中直接使用这些实例。相比于每个测试方法中都创建实例并设置其属性要容易得多。</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>