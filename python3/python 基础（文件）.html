<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修python 基础（文件）' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>python 基础（文件）</center></div><div class='banquan'>原文出处:本文由博客园博主年过二十梦方醒提供。<br/>
原文连接:https://www.cnblogs.com/planBinary/p/11703360.html</div><br>
    <p>文件句柄：可简单理解为应该内存对象</p>
<p>open()函数&nbsp;&nbsp;<span style="font-size: 16px;">参考 https://www.runoob.com/python3/python3-file-methods.html</span></p>
<p><span style="font-size: 16px;">读、写、追加</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #800000;">'''</span>
<span style="color: #008080;"> 2</span> <span style="color: #800000;">txt文件内容：
</span><span style="color: #008080;"> 3</span> <span style="color: #800000;">I
</span><span style="color: #008080;"> 4</span> <span style="color: #800000;">am
</span><span style="color: #008080;"> 5</span> <span style="color: #800000;">very
</span><span style="color: #008080;"> 6</span> <span style="color: #800000;">handsome
</span><span style="color: #008080;"> 7</span> <span style="color: #800000;">'''</span>
<span style="color: #008080;"> 8</span> <span style="color: #008000;">#</span><span style="color: #008000;">读（mode = r）</span>
<span style="color: #008080;"> 9</span> f = open(<span style="color: #800000;">'</span><span style="color: #800000;">test.txt</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">r</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #008080;">10</span> x = f.readline() <span style="color: #008000;">#</span><span style="color: #008000;">读取文件的一行，这时文件句柄移动到下一行的位置</span>
<span style="color: #008080;">11</span> x = f.readlines() <span style="color: #008000;">#</span><span style="color: #008000;">从文件句柄位置开始读取整个文件内容，并将每一行作为一个元素添加到一个列表</span>
<span style="color: #008080;">12</span>                   <span style="color: #008000;">#</span><span style="color: #008000;">当一个文件很大时readlines()是行不通的，他会把整个文件加载到内存，再执行后面的代码</span>
<span style="color: #008080;">13</span>                 <span style="color: #008000;">#</span><span style="color: #008000;">这回耗费很多时间和消耗大量的内存</span>
<span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span> <span style="color: #008000;">#</span><span style="color: #008000;"> 可以用读一行打印一行的方式加快文件的读取</span>
<span style="color: #008080;">16</span> f.seek(0)  <span style="color: #008000;">#</span><span style="color: #008000;">将文件句柄挪到文件的开始位置</span>
<span style="color: #008080;">17</span> <span style="color: #0000ff;">for</span> l <span style="color: #0000ff;">in</span><span style="color: #000000;"> f:
</span><span style="color: #008080;">18</span>     <span style="color: #0000ff;">print</span>(l.strip(),end=<span style="color: #800000;">'</span> <span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #008080;">19</span>                                 <span style="color: #008000;">#</span><span style="color: #008000;">结果 I am very handsome</span>
<span style="color: #008080;">20</span> 
<span style="color: #008080;">21</span> <span style="color: #008000;">#</span><span style="color: #008000;">这个方法在一边读文件一边写文件是很有用的</span>
<span style="color: #008080;">22</span> <span style="color: #008000;">#</span><span style="color: #008000;">写（mode = w） 如果目标文件不存在会创建一个，但是如果存在的话会把原文件内容删除，慎用！！！</span>
<span style="color: #008080;">23</span> <span style="color: #008000;">#</span><span style="color: #008000;"> 备份一个test.txt，名为test_bak.txt</span>
<span style="color: #008080;">24</span> <span style="color: #000000;">f.seek(0)
</span><span style="color: #008080;">25</span> f_w = open(<span style="color: #800000;">'</span><span style="color: #800000;">test_bak.txt</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">w</span><span style="color: #800000;">'</span>)  <span style="color: #008000;">#</span><span style="color: #008000;">encoding 默认utf-8</span>
<span style="color: #008080;">26</span> <span style="color: #0000ff;">for</span> l <span style="color: #0000ff;">in</span><span style="color: #000000;"> f:
</span><span style="color: #008080;">27</span> <span style="color: #000000;">    f_w.write(l)
</span><span style="color: #008080;">28</span> <span style="color: #008000;">#</span><span style="color: #008000;">完成备份</span>
<span style="color: #008080;">29</span> <span style="color: #008000;">#</span><span style="color: #008000;">追加 （mode = a）在原文件的后面追加内容，是不可读的，如果文件不存在会创建一个</span>
<span style="color: #008080;">30</span> f_a = open(<span style="color: #800000;">'</span><span style="color: #800000;">test.txt</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">a</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #008080;">31</span> f_a.write(<span style="color: #800000;">'</span><span style="color: #800000;">lalala</span><span style="color: #800000;">'</span>)    <span style="color: #008000;">#</span><span style="color: #008000;">'lalala' 被添加到了test.txt的末尾</span>
<span style="color: #008080;">32</span> <span style="color: #000000;">f_a.close()
</span><span style="color: #008080;">33</span> <span style="color: #000000;">f_w.close()
</span><span style="color: #008080;">34</span> f.close()</pre>
</div>
<p>读写、写读、追加读写<span style="font-size: 16px;"><br /></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #800000;">'''</span>
<span style="color: #008080;"> 2</span> <span style="color: #800000;">txt文件内容：
</span><span style="color: #008080;"> 3</span> <span style="color: #800000;">I
</span><span style="color: #008080;"> 4</span> <span style="color: #800000;">am
</span><span style="color: #008080;"> 5</span> <span style="color: #800000;">very
</span><span style="color: #008080;"> 6</span> <span style="color: #800000;">handsome
</span><span style="color: #008080;"> 7</span> <span style="color: #800000;">'''</span>
<span style="color: #008080;"> 8</span> <span style="color: #008000;">#</span><span style="color: #008000;">读写（mode = r+）</span>
<span style="color: #008080;"> 9</span> with open(<span style="color: #800000;">'</span><span style="color: #800000;">test.txt</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">r+</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f_r_p,\
</span><span style="color: #008080;">10</span>     open(<span style="color: #800000;">'</span><span style="color: #800000;">test_bak.txt</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">w+</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f_w_p,\
</span><span style="color: #008080;">11</span>     open(<span style="color: #800000;">'</span><span style="color: #800000;">test_a.txt</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">a+</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f_a_p:
</span><span style="color: #008080;">12</span>     <span style="color: #800000;">'''</span>
<span style="color: #008080;">13</span> <span style="color: #800000;">    用with语法可以省略最后的文件关闭操作,同时可以打开多个文件
</span><span style="color: #008080;">14</span> <span style="color: #800000;">    1.w+,还是会将原文件内容删除然后在进行写读等操作，慎用！！！
</span><span style="color: #008080;">15</span> <span style="color: #800000;">    2.r+，非常实用，但如果要对原文件直接更改是不行的，比如有'I am very handsome'这么一个
</span><span style="color: #008080;">16</span> <span style="color: #800000;">    字符串,如果想把'I'改为'You',见下面代码21-24行，发现打印的结果还是'I'，没有变为想要替换
</span><span style="color: #008080;">17</span> <span style="color: #800000;">    的'You'，因为在硬盘里的文件已经写死了，硬盘里的后面数据是不会随着前面的数据的变化而前
</span><span style="color: #008080;">18</span> <span style="color: #800000;">    后挪动的，所以要修改文件可以采用复制的方法，就是在创建一个文件，并将修改的内容写入新的
</span><span style="color: #008080;">19</span> <span style="color: #800000;">    文件。
</span><span style="color: #008080;">20</span>     <span style="color: #800000;">'''</span>
<span style="color: #008080;">21</span>     x =<span style="color: #000000;"> f_r_p.readline()
</span><span style="color: #008080;">22</span>     x.replace(<span style="color: #800000;">'</span><span style="color: #800000;">I\n</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">You\n</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #008080;">23</span> <span style="color: #000000;">    f_r_p.seek(0)
</span><span style="color: #008080;">24</span>     <span style="color: #0000ff;">print</span><span style="color: #000000;">(f_r_p.readline())
</span><span style="color: #008080;">25</span>     <span style="color: #008000;">#</span><span style="color: #008000;">将test.txt文件，第一行改为'You',并写入test_a.txt</span>
<span style="color: #008080;">26</span> <span style="color: #000000;">    f_r_p.seek(0)
</span><span style="color: #008080;">27</span>     <span style="color: #0000ff;">for</span> l <span style="color: #0000ff;">in</span><span style="color: #000000;"> f_r_p:
</span><span style="color: #008080;">28</span>         <span style="color: #0000ff;">print</span>(l,end=<span style="color: #800000;">''</span><span style="color: #000000;">)
</span><span style="color: #008080;">29</span>         <span style="color: #0000ff;">if</span> l==<span style="color: #800000;">'</span><span style="color: #800000;">I\n</span><span style="color: #800000;">'</span><span style="color: #000000;">:
</span><span style="color: #008080;">30</span>             f_a_p.write(<span style="color: #800000;">'</span><span style="color: #800000;">You\n</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #008080;">31</span>         <span style="color: #0000ff;">else</span><span style="color: #000000;">:
</span><span style="color: #008080;">32</span>             f_a_p.write(l)</pre>
</div>
<p>&nbsp;二进制</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;">1</span> <span style="color: #008000;">#</span><span style="color: #008000;">二进制写（mode = wb）</span>
<span style="color: #008080;">2</span> with open(<span style="color: #800000;">'</span><span style="color: #800000;">bin.txt</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">wb</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f_wb:
</span><span style="color: #008080;">3</span>     f_wb.write(b<span style="color: #800000;">'</span><span style="color: #800000;">i am bin</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #008080;">4</span> <span style="color: #008000;">#</span><span style="color: #008000;">二进制读（mode = rb）</span>
<span style="color: #008080;">5</span> with open(<span style="color: #800000;">'</span><span style="color: #800000;">bin.txt</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">rb</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f_rb:
</span><span style="color: #008080;">6</span>     <span style="color: #0000ff;">print</span>(f_rb.readline())</pre>
</div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>