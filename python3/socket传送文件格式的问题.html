<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修socket传送文件格式的问题' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>socket传送文件格式的问题</center></div><div class='banquan'>原文出处:本文由博客园博主Cachec提供。<br/>
原文连接:https://www.cnblogs.com/cache0715/p/11285457.html</div><br>
    <p>在python3中socket传送文件只能传送&lsquo;bytes'类型，如下例子：</p>
<pre><code><span style="color: #000080; font-weight: bold; --darkreader-inline-color: #000073;" data-darkreader-inline-color="">import socket<br /><br />client = socket.socket()<br />client.connect((<span style="color: #008080; font-weight: bold; --darkreader-inline-color: #007373;" data-darkreader-inline-color="">"localhost",<span style="color: #0000ff; --darkreader-inline-color: #0000e6;" data-darkreader-inline-color="">8808))<br />client.send(<span style="color: #008000; font-weight: bold; --darkreader-inline-color: #007300;" data-darkreader-inline-color="">b"Hello world!")<br /><br />在例子中&ldquo;hello world"为字符串类型，所以要转换成&rdquo;bytes"类型，所以前面加一个&ldquo;b"就行了，<br />但是，如何将&ldquo;Hello world"改成中文就就会出错，因为这种形式只能将存在于Ascii码编码内的字<br />符串和符号进行转换，当一个字符串不在Ascii码编码范围内例如中文，则用这种形式就会报错，所以<br />当出现中文字符串时，要用encode进行编码，编码后字符串会变成为字节类型(bytes)，如下所示：</span></span></span></span></pre>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; decode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; encode</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bytes ------&gt; str(unicode)------&gt;bytes</p>
<pre><code><span style="color: #000000; --darkreader-inline-color: #000000;" data-darkreader-inline-color=""><span style="--darkreader-inline-color: #000073;"><span style="--darkreader-inline-color: #007373;"><span style="--darkreader-inline-color: #0000e6;"><span style="--darkreader-inline-color: #007300;">这样之后，发送端就可以将信息以&ldquo;bytes"类型发送，服务器接收到的也是编码后的二进制信息，要显<br />示中文必须要采用decode解码。所以，如何是中文要采用如下形式：<br /><br /></span></span></span></span></span></pre>
<pre><code><span style="color: #000080; font-weight: bold; --darkreader-inline-color: #000073;" data-darkreader-inline-color="">import socket<br /><br />client = socket.socket()<br />client.connect((<span style="color: #008080; font-weight: bold; --darkreader-inline-color: #007373;" data-darkreader-inline-color="">"localhost",<span style="color: #0000ff; --darkreader-inline-color: #0000e6;" data-darkreader-inline-color="">8808))<br />client.send(<span style="color: #008000; font-weight: bold; --darkreader-inline-color: #007300;" data-darkreader-inline-color="">"你好世界!".encode("utf-8"))</span></span></span></span></pre>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>