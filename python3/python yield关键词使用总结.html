<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修python yield关键词使用总结' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>python yield关键词使用总结</center></div><div class='banquan'>原文出处:本文由博客园博主授客提供。<br/>
原文连接:https://www.cnblogs.com/shouke/p/11676978.html</div><br>
    <p align="center"><span style="font-family: 'courier new', courier; font-size: 16px;"><strong>python yield</strong><strong>关键词使用总结</strong></span></p>
<p align="right"><span style="font-family: 'courier new', courier; font-size: 16px;"><strong>by:</strong><strong>授客</strong><strong> QQ</strong><strong>：</strong><strong>1033553122</strong></span></p>
<h1><span style="font-family: 'courier new', courier; font-size: 16px;">测试环境</span></h1>
<p><span style="font-family: 'courier new', courier; font-size: 16px;">win10</span></p>
<p><span style="font-family: 'courier new', courier; font-size: 16px;">python 3.5</span></p>
<h1><span style="font-family: 'courier new', courier; font-size: 16px;">yield功能简介</span></h1>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier; font-size: 16px;">简单来说，yield 的作用就是把一个函数变成一个 generator，带有 yield 的函数不再是一个普通函数，Python 解释器会将其视为一个 generator</span></p>
<h1><span style="font-family: 'courier new', courier; font-size: 16px;">代码演示</span></h1>
<h2><span style="font-family: 'courier new', courier; font-size: 16px;">例子1： 输出斐波那契數列前 N 个数</span></h2>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;"><em>#!/usr/bin/env python</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;"><em># -*- coding:utf-8 -*-</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;"><em>&nbsp;</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">__author__ = <strong>'shouke'</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;"><strong>&nbsp;</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;"><strong>&nbsp;</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;"><strong>def </strong>fab(max):</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp; n, a, b = 0, 0, 1</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp; result = []</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp; <strong>while </strong>n &lt; max:</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result.append(b)</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a, b = b, a + b</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; n = n + 1</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp; <strong>return </strong>result</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;"><strong>for </strong>n <strong>in </strong>fab(5):</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp; print(n)</span></p>
<pre><code><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 16px;">以上代码虽然可以满足需求，但是存在的问题：该函数在运行中占用的内存会随着参数 max 的增大而增大，如果要控制内存占用，最好不要用 List</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 16px;">改进 使用yield</span></pre>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;"><strong>def </strong>fab(max):</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp; n, a, b = 0, 0, 1</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp; <strong>while </strong>n &lt; max:</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>yield </strong>b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em># </em><em>使用</em><em> yield</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>a, b = b, a + b</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; n = n + 1</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;"><strong>for </strong>n <strong>in </strong>fab(5):</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp; print(n)</span></p>
<pre><code><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;</span></pre>
<h2><span style="font-family: 'courier new', courier; font-size: 16px;">例子2：读二进制方式取文件并生成文件副本</span></h2>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;"><em>#!/usr/bin/env python</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;"><em># -*- coding:utf-8 -*-</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;"><em>&nbsp;</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">__author__ = <strong>'shouke'</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;"><strong>&nbsp;</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;"><strong>&nbsp;</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;"><strong>def </strong>read_file(fpath):</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp; BLOCK_SIZE = 1024</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp; <strong>with </strong>open(fpath, <strong>'rb'</strong>) <strong>as </strong>f:</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>while True</strong>:</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; block = f.read(BLOCK_SIZE)</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>if </strong>block:</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>yield </strong>block</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>else</strong>:</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>return</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;"><strong>with </strong>open(<strong>'D:\Downloads</strong><strong>\\</strong><strong>channels-2.1.7-copy.tar.gz'</strong>, <strong>'wb'</strong>) <strong>as </strong>f:</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp; <strong>for </strong>data <strong>in </strong>read_file(<strong>'D:\Downloads</strong><strong>\\</strong><strong>channels-2.1.7.tar.gz'</strong>):</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; f.write(data)</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;</span></p>
<h1>&nbsp;</h1>
<p><span style="font-family: 'courier new', courier; font-size: 16px;">&nbsp;</span></p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>