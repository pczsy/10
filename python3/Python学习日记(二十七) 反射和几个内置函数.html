<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Python学习日记(二十七) 反射和几个内置函数' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Python学习日记(二十七) 反射和几个内置函数</center></div><div class='banquan'>原文出处:本文由博客园博主Fantac提供。<br/>
原文连接:https://www.cnblogs.com/Fantac/p/11495039.html</div><br>
    <p><span style="font-family: 宋体; font-size: 18pt;"><strong><span style="color: #ffffff; background-color: #ff0000;">isinstance()</span></strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">判断isinstance(obj,cls)中obj是否是cls类的对象</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> Person:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name):
        self.name </span>=<span style="color: #000000;"> name
p </span>= Person(<span style="color: #800000;">'</span><span style="color: #800000;">Jane</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(isinstance(p,Person))     　　<span style="color: #008000;">#</span><span style="color: #008000;">True</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18pt;"><strong><span style="color: #ffffff; background-color: #ff0000;">issubclass()</span></strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">判断issubclass(sub,super)中sub是否是super类的派生类</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> Person:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name):
        self.name </span>=<span style="color: #000000;"> name
</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Father(Person):
    </span><span style="color: #0000ff;">pass</span>
<span style="color: #0000ff;">print</span>(issubclass(Father,Person))    <span style="color: #008000;">#</span><span style="color: #008000;">True</span>
<span style="color: #0000ff;">print</span>(issubclass(Person,Father))    <span style="color: #008000;">#</span><span style="color: #008000;">False</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18pt;"><strong><span style="color: #ffffff; background-color: #ff0000;">反射</span></strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">反射就是用字符串类型的名字去操作变量,python中的一切事物皆为对象(都可以使用反射)</span></p>
<p><strong><span style="font-family: 宋体;"><span style="font-size: 18px;">1.hasattr()</span></span></strong></p>
<p><span style="font-family: 宋体;"><span style="font-size: 18px;">函数用于判断对象是否包含对应的属性,通常和getattr一起搭配使用,先用hasattr判断是否这个对象含有这个属性,如果有就通过getattr来拿值,如果没有就提示没有这个属性</span></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> Person:
    age </span>= 20
    <span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,height,weight):
        self.name </span>=<span style="color: #000000;"> name
        self.height </span>=<span style="color: #000000;"> height
        self.weight </span>=<span style="color: #000000;"> weight
    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> fuc(self):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">weight...height...</span><span style="color: #800000;">'</span><span style="color: #000000;">)
#1
</span><span style="color: #0000ff;">if</span> hasattr(Person,<span style="color: #800000;">'</span><span style="color: #800000;">age</span><span style="color: #800000;">'</span><span style="color: #000000;">):
    </span><span style="color: #0000ff;">print</span>(getattr(Person,<span style="color: #800000;">'</span><span style="color: #800000;">age</span><span style="color: #800000;">'</span>))          <span style="color: #008000;">#</span><span style="color: #008000;">20</span>
<span style="color: #0000ff;">else</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">没有这个类属性!</span><span style="color: #800000;">'</span><span style="color: #000000;">)
#2
p </span>= Person(<span style="color: #800000;">'</span><span style="color: #800000;">Adson</span><span style="color: #800000;">'</span>,1.6,75<span style="color: #000000;">)
</span><span style="color: #0000ff;">if</span> hasattr(p,<span style="color: #800000;">'</span><span style="color: #800000;">bmi</span><span style="color: #800000;">'</span><span style="color: #000000;">):
    </span><span style="color: #0000ff;">print</span>(getattr(p,<span style="color: #800000;">'</span><span style="color: #800000;">bmi</span><span style="color: #800000;">'</span><span style="color: #000000;">))
</span><span style="color: #0000ff;">else</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">没有这个属性!</span><span style="color: #800000;">'</span>)              　　<span style="color: #008000;">#</span><span style="color: #008000;">没有这个属性!</span>
#3
<span style="color: #0000ff;">if</span> hasattr(p,<span style="color: #800000;">'</span><span style="color: #800000;">fuc</span><span style="color: #800000;">'</span><span style="color: #000000;">):
    getattr(p,</span><span style="color: #800000;">'</span><span style="color: #800000;">fuc</span><span style="color: #800000;">'</span>)()                   <span style="color: #008000;">#</span><span style="color: #008000;">weight...height...</span>
<span style="color: #0000ff;">else</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">没有这个方法!</span><span style="color: #800000;">'</span>)</pre>
</div>
<p><strong><span style="font-family: 宋体;"><span style="font-size: 18px;">2.getattr()</span></span></strong></p>
<p><span style="font-family: 宋体;"><span style="font-size: 18px;">函数用于返回一个对象属性值</span></span></p>
<p><em><span style="font-family: 宋体;"><span style="font-size: 18px;">(1)反射对象的属性</span></span></em></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name):
        self.name </span>=<span style="color: #000000;"> name</span><span style="color: #000000;">
a </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">Adson</span><span style="color: #800000;">'</span><span style="color: #000000;">)
ret </span>= getattr(a,<span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(ret)                      <span style="color: #008000;">#</span><span style="color: #008000;">Adson</span></pre>
</div>
<p><em><span style="font-family: 宋体;"><span style="font-size: 18px;">(2)反射对象的方法</span></span></em></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> fuc(self):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">This is fuc!</span><span style="color: #800000;">'</span><span style="color: #000000;">)
a </span>=<span style="color: #000000;"> A()
ret </span>= getattr(a,<span style="color: #800000;">'</span><span style="color: #800000;">fuc</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(ret)                  <span style="color: #008000;">#</span><span style="color: #008000;">&lt;bound method A.fuc of &lt;__main__.A object at 0x00000000024E1C88&gt;&gt;　　获得一个绑定方法的地址</span>
ret()                       <span style="color: #008000;">#</span><span style="color: #008000;">This is fuc!　 　在ret后加上括号去调用方法</span></pre>
</div>
<p><em><span style="font-family: 宋体; font-size: 18px;">(3)反射类的属性</span></em></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    age </span>= 18<span style="color: #000000;">
ret </span>= getattr(A,<span style="color: #800000;">'</span><span style="color: #800000;">age</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(ret)              　　 <span style="color: #008000;">#</span><span style="color: #008000;">18</span></pre>
</div>
<p><em><span style="font-family: 宋体; font-size: 18px;">(4)反射类的方法(classmethod、staticmethod)</span></em></p>
<p><span style="font-family: 宋体; font-size: 18px;">一般的调用方式是类名.方法名</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    @classmethod
    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> fuc(cls):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">This is class fuc!</span><span style="color: #800000;">'</span><span style="color: #000000;">)
ret </span>= getattr(A,<span style="color: #800000;">'</span><span style="color: #800000;">fuc</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(ret)              <span style="color: #008000;">#</span><span style="color: #008000;">&lt;bound method A.fuc of &lt;class '__main__.A'&gt;&gt;  获得一个绑定方法</span>
ret()                   <span style="color: #008000;">#</span><span style="color: #008000;">This is class fuc!</span>
getattr(A,<span style="color: #800000;">'</span><span style="color: #800000;">fuc</span><span style="color: #800000;">'</span>)()      <span style="color: #008000;">#</span><span style="color: #008000;">This is class fuc! 简写</span></pre>
</div>
<p><em><span style="font-family: 宋体; font-size: 18px;">(5)反射模块的变量</span></em></p>
<p><span style="font-family: 宋体; font-size: 18px;">先建立一个模块,模块名pyfile.py,增加一个变量</span></p>
<div class="cnblogs_code">
<pre><code>dic = {<span style="color: #800000;">'</span><span style="color: #800000;">apple</span><span style="color: #800000;">'</span> : 18,<span style="color: #800000;">'</span><span style="color: #800000;">banana</span><span style="color: #800000;">'</span> : 20}</pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">然后通过我的模块反射pyfile模块的变量</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> pyfile
</span><span style="color: #0000ff;">print</span>(pyfile.dic)               　　　　　　　　　<span style="color: #008000;">#</span><span style="color: #008000;">{'apple': 18, 'banana': 20}</span>
ret = getattr(pyfile,<span style="color: #800000;">'</span><span style="color: #800000;">dic</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(ret)                      　　　　　　　　　<span style="color: #008000;">#</span><span style="color: #008000;">{'apple': 18, 'banana': 20}</span></pre>
</div>
<p><em><span style="font-family: 宋体; font-size: 18px;">(6)反射模块的方法</span></em></p>
<p><span style="font-family: 宋体; font-size: 18px;">先建立一个模块,模块名pyfile.py,增加一个方法</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">def</span><span style="color: #000000;"> fuc():
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">abc123aaa!!!</span><span style="color: #800000;">'</span>)</pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">然后通过我的模块反射pyfile模块方法</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> pyfile
ret </span>= getattr(pyfile,<span style="color: #800000;">'</span><span style="color: #800000;">fuc</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(ret)                  　　　　　　　　　　　<span style="color: #008000;">#</span><span style="color: #008000;">&lt;function fuc at 0x0000000002498D08&gt;</span>
ret()                       　　　　　　　　　　　<span style="color: #008000;">#</span><span style="color: #008000;">abc123aaa!!!</span>
getattr(pyfile,<span style="color: #800000;">'</span><span style="color: #800000;">fuc</span><span style="color: #800000;">'</span>)()     　　　　　　　　　　　<span style="color: #008000;">#</span><span style="color: #008000;">abc123aaa!!!</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><em>(7)反射模块的类</em></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">先建立一个模块,模块名pyfile.py,增加一个类</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> B:
    price </span>= 200
    <span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name):
        self.name </span>=<span style="color: #000000;"> name
    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> fuc(self):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">This classB fuc..</span><span style="color: #800000;">'</span> + self.name)</pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">然后通过我的模块反射pyfile模块方法</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> pyfile
b </span>= getattr(pyfile,<span style="color: #800000;">'</span><span style="color: #800000;">B</span><span style="color: #800000;">'</span>)(<span style="color: #800000;">'</span><span style="color: #800000;">Josn</span><span style="color: #800000;">'</span>)     　　　　　　　<span style="color: #008000;">#</span><span style="color: #008000;">getattr相当于拿到了这个模块的B类 并进行实例化了一个b对象</span>
<span style="color: #0000ff;">print</span>(b.<span style="color: #800080;">__dict__</span>)                   　　　　　　　<span style="color: #008000;">#</span><span style="color: #008000;">{'name': 'Josn'}</span>
<span style="color: #0000ff;">print</span>(b.price)                      　　　　　　　<span style="color: #008000;">#</span><span style="color: #008000;">200</span>
b.fuc()                             　　　　　　　<span style="color: #008000;">#</span><span style="color: #008000;">This classB fuc..Josn</span></pre>
</div>
<p><em><span style="font-family: 宋体; font-size: 18px;">(8)反射自身模块的变量</span></em></p>
<p><span style="font-family: 宋体; font-size: 18px;">通过sys.modules['__main__']找到当前的模块</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> time
</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> sys
t </span>=<span style="color: #000000;"> time.asctime(time.localtime(time.time()))
</span><span style="color: #0000ff;">print</span>(t)                                        <span style="color: #008000;">#</span><span style="color: #008000;">Mon Sep  9 22:36:40 2019</span>
<span style="color: #0000ff;">print</span>(sys.modules[<span style="color: #800000;">'</span><span style="color: #800000;">__main__</span><span style="color: #800000;">'</span>])                  <span style="color: #008000;">#</span><span style="color: #008000;">&lt;module '__main__' from 'C:/Users/Administrator/PycharmProjects/PYL/temp_file/temp_py.py'&gt;</span>
<span style="color: #0000ff;">print</span>(sys.modules[<span style="color: #800000;">'</span><span style="color: #800000;">__main__</span><span style="color: #800000;">'</span>].t)                <span style="color: #008000;">#</span><span style="color: #008000;">Mon Sep  9 22:38:01 2019</span>
ret = getattr(sys.modules[<span style="color: #800000;">'</span><span style="color: #800000;">__main__</span><span style="color: #800000;">'</span>],<span style="color: #800000;">'</span><span style="color: #800000;">t</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(ret)                                      <span style="color: #008000;">#</span><span style="color: #008000;">Mon Sep  9 22:39:05 2019</span></pre>
</div>
<p><em><span style="font-family: 宋体; font-size: 18px;">(9)反射自身模块的方法</span></em></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> sys
</span><span style="color: #0000ff;">def</span><span style="color: #000000;"> fuc():
    </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">abc123...</span><span style="color: #800000;">'</span><span style="color: #000000;">)
ret </span>= getattr(sys.modules[<span style="color: #800000;">'</span><span style="color: #800000;">__main__</span><span style="color: #800000;">'</span>],<span style="color: #800000;">'</span><span style="color: #800000;">fuc</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(ret)                                  　　<span style="color: #008000;">#</span><span style="color: #008000;">&lt;function fuc at 0x0000000002798730&gt;</span>
ret()                                       　　<span style="color: #008000;">#</span><span style="color: #008000;">abc123...</span>
getattr(sys.modules[<span style="color: #800000;">'</span><span style="color: #800000;">__main__</span><span style="color: #800000;">'</span>],<span style="color: #800000;">'</span><span style="color: #800000;">fuc</span><span style="color: #800000;">'</span>)()    　　<span style="color: #008000;">#</span><span style="color: #008000;">abc123...</span></pre>
</div>
<p><strong><span style="font-family: 宋体;"><span style="font-size: 18px;">3.setattr()</span></span></strong></p>
<p><span style="font-family: 宋体;"><span style="font-size: 18px;">用于设置属性值,该属性不一定是存在的</span></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> Person:
    age </span>= 20
    <span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,height,weight):
        self.name </span>=<span style="color: #000000;"> name
        self.height </span>=<span style="color: #000000;"> height
        self.weight </span>=<span style="color: #000000;"> weight
</span><span style="color: #008000;">#</span><span style="color: #008000;">对一个对象修改</span>
p = Person(<span style="color: #800000;">'</span><span style="color: #800000;">Adson</span><span style="color: #800000;">'</span>,1.6,75<span style="color: #000000;">)
setattr(p,</span><span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">Jane</span><span style="color: #800000;">'</span><span style="color: #000000;">)
setattr(p,</span><span style="color: #800000;">'</span><span style="color: #800000;">height</span><span style="color: #800000;">'</span>,1.7<span style="color: #000000;">)
setattr(p,</span><span style="color: #800000;">'</span><span style="color: #800000;">gender</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">male</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(p.<span style="color: #800080;">__dict__</span>)                   <span style="color: #008000;">#</span><span style="color: #008000;">{'name': 'Jane', 'height': 1.7, 'weight': 75, 'gender': 'male'}</span><span style="color: #008000;">
#</span><span style="color: #008000;">对一个类修改</span>
<span style="color: #0000ff;">print</span>(Person.<span style="color: #800080;">__dict__</span>)              <span style="color: #008000;">#</span><span style="color: #008000;">{'__module__': '__main__', 'age': 20, '__init__': &lt;function Person.__init__ at 0x0000000002548950&gt;,<br />　　　　　　　　　　　　　　　　　　　　　　 '__dict__': &lt;attribute '__dict__' of 'Person' objects&gt;, '__weakref__':<br />　　　　　　　　　　　　　　　　　　　　　　 &lt;attribute '__weakref__' of 'Person' objects&gt;, '__doc__': None}</span>
setattr(Person,<span style="color: #800000;">'</span><span style="color: #800000;">age</span><span style="color: #800000;">'</span>,21<span style="color: #000000;">)
setattr(Person,</span><span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">Jane</span><span style="color: #800000;">'</span><span style="color: #000000;">)
setattr(Person,</span><span style="color: #800000;">'</span><span style="color: #800000;">height</span><span style="color: #800000;">'</span>,1.7<span style="color: #000000;">)
setattr(Person,</span><span style="color: #800000;">'</span><span style="color: #800000;">gender</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">male</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(Person.<span style="color: #800080;">__dict__</span>)              <span style="color: #008000;">#</span><span style="color: #008000;">{'__module__': '__main__', 'age': 21, '__init__': &lt;function Person.__init__ at 0x0000000002548950&gt;,<br />　　　　　　　　　　　　　　　　　　　　　　 '__dict__': &lt;attribute '__dict__' of 'Person' objects&gt;, '__weakref__':<br />　　　　　　　　　　　　　　　　　　　　　　 &lt;attribute '__weakref__' of 'Person' objects&gt;, '__doc__': None,<br />　　　　　　　　　　　　　　　　　　　　　　 'name': 'Jane', 'height': 1.7, 'gender': 'male'}</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">这里的不同之处在于对象和类它们存放值的命名空间不同</span></p>
<p><strong><span style="font-family: 宋体;"><span style="font-size: 18px;">4.delattr()</span></span></strong></p>
<p><span style="font-family: 宋体;"><span style="font-size: 18px;">用于删除属性</span></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> Person:
    age </span>= 20
    <span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,height,weight):
        self.name </span>=<span style="color: #000000;"> name
        self.height </span>=<span style="color: #000000;"> height
        self.weight </span>=<span style="color: #000000;"> weight
p </span>= Person(<span style="color: #800000;">'</span><span style="color: #800000;">Adson</span><span style="color: #800000;">'</span>,1.6,75<span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(p.<span style="color: #800080;">__dict__</span>)                   <span style="color: #008000;">#</span><span style="color: #008000;">{'name': 'Adson', 'height': 1.6, 'weight': 75}</span>
delattr(p,<span style="color: #800000;">'</span><span style="color: #800000;">height</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(p.<span style="color: #800080;">__dict__</span>)                   <span style="color: #008000;">#</span><span style="color: #008000;">{'name': 'Adson', 'weight': 75}<br /></span>
<span style="color: #0000ff;">print</span>(Person.<span style="color: #800080;">__dict__</span>[<span style="color: #800000;">'</span><span style="color: #800000;">age</span><span style="color: #800000;">'</span>])       <span style="color: #008000;">#</span><span style="color: #008000;">20</span>
delattr(Person,<span style="color: #800000;">'</span><span style="color: #800000;">age</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(Person.<span style="color: #800080;">__dict__</span>[<span style="color: #800000;">'</span><span style="color: #800000;">age</span><span style="color: #800000;">'</span>])       <span style="color: #008000;">#</span><span style="color: #008000;">KeyError: 'age'</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="font-family: 宋体; font-size: 18pt;"><strong><span style="color: #ffffff; background-color: #ff0000;">内置类方法</span></strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">内置的类方法和内置函数之间有着千丝万缕的关系</span></p>
<p><strong><span style="font-family: 宋体; font-size: 18px;">1.__str__</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px;">当我们定义一个类,并实例化一个对象,再对这个对象去print</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,price,types):
        self.name </span>=<span style="color: #000000;"> name
        self.price </span>=<span style="color: #000000;"> price
        self.types </span>=<span style="color: #000000;"> types
a </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">AAA</span><span style="color: #800000;">'</span>,200,<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(str(a))                       <span style="color: #008000;">#</span><span style="color: #008000;">&lt;__main__.A object at 0x00000000020D7A58&gt;</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">这里返回了这个对象的内存地址,我们再在A类里面添加一个__str__方法,看一看结果是什么</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,price,types):
        self.name </span>=<span style="color: #000000;"> name
        self.price </span>=<span style="color: #000000;"> price
        self.types </span>=<span style="color: #000000;"> types
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__str__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span> <span style="color: #800000;">'</span><span style="color: #800000;">name = %s,price = %s,types = %s</span><span style="color: #800000;">'</span>%<span style="color: #000000;">(self.name,self.price,self.types)
a </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">AAA</span><span style="color: #800000;">'</span>,200,<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(a)                　　　　　　　　<span style="color: #008000;">#</span><span style="color: #008000;">name = AAA,price = 200,types = A   </span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">可以这么说我们在每次打印一个对象的时候就是在调用obj.__str__,且__str__方法需要返回一个字符串,当做这个类的描写;当我们使用print这个对象时会打印出__str__方法return出来的字符串</span></p>
<p><strong><span style="font-family: 宋体; font-size: 18px;">2.__repr__</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px;">先说一下repr()方法,它能让我们输入的数据原形毕露</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">print</span>(repr(1))                  <span style="color: #008000;">#</span><span style="color: #008000;">1</span>
<span style="color: #0000ff;">print</span>(repr(<span style="color: #800000;">'</span><span style="color: #800000;">1</span><span style="color: #800000;">'</span>))                <span style="color: #008000;">#</span><span style="color: #008000;">'1'</span>
<span style="color: #0000ff;">print</span>(repr(<span style="color: #800000;">'</span><span style="color: #800000;">aaa</span><span style="color: #800000;">'</span>))              <span style="color: #008000;">#</span><span style="color: #008000;">'aaa'</span>
<span style="color: #0000ff;">print</span>(repr({<span style="color: #800000;">'</span><span style="color: #800000;">a</span><span style="color: #800000;">'</span>:1,<span style="color: #800000;">'</span><span style="color: #800000;">b</span><span style="color: #800000;">'</span>:2}))      <span style="color: #008000;">#</span><span style="color: #008000;">{'a': 1, 'b': 2}</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">和__str__一样我们在定义一个类后去print它实例化的对象,会获得到一个对象的内存地址</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,price,types):
        self.name </span>=<span style="color: #000000;"> name
        self.price </span>=<span style="color: #000000;"> price
        self.types </span>=<span style="color: #000000;"> types</span>
a = A(<span style="color: #800000;">'</span><span style="color: #800000;">AAA</span><span style="color: #800000;">'</span>,200,<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(repr(a))              　　 <span style="color: #008000;">#</span><span style="color: #008000;">&lt;__main__.A object at 0x00000000024E7A58&gt;</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">然后我们再在A中添加__repr__方法看一下print的结果</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,price,types):
        self.name </span>=<span style="color: #000000;"> name
        self.price </span>=<span style="color: #000000;"> price
        self.types </span>=<span style="color: #000000;"> types</span>
    <span style="color: #0000ff;">def</span> <span style="color: #800080;">__repr__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span> <span style="color: #800000;">'</span><span style="color: #800000;">name = %s,price = %s,types = %s</span><span style="color: #800000;">'</span> %<span style="color: #000000;"> (self.name, self.price, self.types)
a </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">AAA</span><span style="color: #800000;">'</span>,200,<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(repr(a))                   <span style="color: #008000;">#</span><span style="color: #008000;">name = AAA,price = 200,types = A</span>
<span style="color: #0000ff;">print</span>(a)                         <span style="color: #008000;">#</span><span style="color: #008000;">name = AAA,price = 200,types = A</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">因为我们在类中定义了一个__repr__方法,这里我们print对象a的时候就相当于是调用了里面的__repr__方法即a.__repr__</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">如果一个类中的__str__和__repr__同时存在的话,那么最后的打印结果是什么呢?</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,price,types):
        self.name </span>=<span style="color: #000000;"> name
        self.price </span>=<span style="color: #000000;"> price
        self.types </span>=<span style="color: #000000;"> types
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__str__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span> <span style="color: #800000;">'</span><span style="color: #800000;">str(name = %s,price = %s,types = %s)</span><span style="color: #800000;">'</span>%<span style="color: #000000;">(self.name,self.price,self.types)
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__repr__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span> <span style="color: #800000;">'</span><span style="color: #800000;">repr(name = %s,price = %s,types = %s)</span><span style="color: #800000;">'</span> %<span style="color: #000000;"> (self.name, self.price, self.types)
a </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">AAA</span><span style="color: #800000;">'</span>,200,<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(repr(a))                            <span style="color: #008000;">#</span><span style="color: #008000;">repr(name = AAA,price = 200,types = A)   即a.__repr__</span>
<span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">%r</span><span style="color: #800000;">'</span>%a)                             <span style="color: #008000;">#</span><span style="color: #008000;">repr(name = AAA,price = 200,types = A)</span>
<span style="color: #0000ff;">print</span>(str(a))                             <span style="color: #008000;">#</span><span style="color: #008000;">str(name = AAA,price = 200,types = A)    即a.__str__</span>
<span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">%s</span><span style="color: #800000;">'</span>%a)                             <span style="color: #008000;">#</span><span style="color: #008000;">str(name = AAA,price = 200,types = A)</span>
<span style="color: #0000ff;">print</span>(a)                                  <span style="color: #008000;">#</span><span style="color: #008000;">str(name = AAA,price = 200,types = A)</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">如果一个类中<span style="color: #ff0000;">有</span>__str__方法,那么它就会先找__str__,<span style="color: #ff0000;">没有</span>的话就再找__repr__方法,再<span style="color: #ff0000;">没有</span>的话就会找它父类的__str__方法</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">__str__方法和__repr__方法能够返回该对象一个规范化的信息</span></p>
<p><strong><span style="font-family: 宋体; font-size: 18px;">3.__len__</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px;">我们将一个实例化的对象直接print它的len看一看会出现什么结果</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,price,types):
        self.name </span>=<span style="color: #000000;"> name
        self.price </span>=<span style="color: #000000;"> price
        self.types </span>=<span style="color: #000000;"> types</span>
a = A(<span style="color: #800000;">'</span><span style="color: #800000;">AAA</span><span style="color: #800000;">'</span>,200,<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(len(a))       　　　　<span style="color: #008000;">#</span><span style="color: #008000;">TypeError: object of type 'A' has no len()</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">结果报错说A少了一个len函数,也就是我们只有在A中加上一个__len__的方法才能去计算长度相关的东西</span></p>
<p><em><span style="font-family: 宋体; font-size: 18px;">计算属性的长度:</span></em></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,price,types):
        self.name </span>=<span style="color: #000000;"> name
        self.price </span>=<span style="color: #000000;"> price
        self.types </span>=<span style="color: #000000;"> types</span>
    <span style="color: #0000ff;">def</span> <span style="color: #800080;">__len__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> len(self.name)
a </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">AAA</span><span style="color: #800000;">'</span>,200,<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(len(a))                            <span style="color: #008000;">#</span><span style="color: #008000;">3</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><em>计算一个列表属性有几个元素:</em></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span>(self,goods =<span style="color: #000000;"> []):
        self.goods </span>=<span style="color: #000000;"> []
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__len__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> len(self.goods)
a </span>=<span style="color: #000000;"> A()
</span><span style="color: #0000ff;">print</span>(len(a))                            <span style="color: #008000;">#</span><span style="color: #008000;">0</span>
a.goods.append(<span style="color: #800000;">'</span><span style="color: #800000;">Banana</span><span style="color: #800000;">'</span><span style="color: #000000;">)
a.goods.append(</span><span style="color: #800000;">'</span><span style="color: #800000;">Apple</span><span style="color: #800000;">'</span><span style="color: #000000;">)
a.goods.append(</span><span style="color: #800000;">'</span><span style="color: #800000;">Orange</span><span style="color: #800000;">'</span><span style="color: #000000;">)
a.goods.append(</span><span style="color: #800000;">'</span><span style="color: #800000;">Pear</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(len(a))                            <span style="color: #008000;">#</span><span style="color: #008000;">4</span></pre>
</div>
<p><strong><span style="font-family: 宋体; font-size: 18px;">4.__call__</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px;">用于打印这个对象的属性</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    gender </span>= <span style="color: #800000;">'</span><span style="color: #800000;">male</span><span style="color: #800000;">'</span>
    <span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,price,types):
        self.name </span>=<span style="color: #000000;"> name
        self.price </span>=<span style="color: #000000;"> price
        self.types </span>=<span style="color: #000000;"> types
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__call__</span>(self, *args, **<span style="color: #000000;">kwargs):
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> self.name,self.price,self.types,self.gender
a </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">AAA</span><span style="color: #800000;">'</span>,200,<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(a())                      <span style="color: #008000;">#</span><span style="color: #008000;">('AAA', 200, 'A', 'male')</span>
<span style="color: #0000ff;">print</span>(A(<span style="color: #800000;">'</span><span style="color: #800000;">AAA</span><span style="color: #800000;">'</span>,200,<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span>)())       <span style="color: #008000;">#</span><span style="color: #008000;">('AAA', 200, 'A', 'male')</span></pre>
</div>
<p><strong><span style="font-family: 宋体; font-size: 18px;">5.__eq__</span></strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    </span><span style="color: #800080;">__instance</span> =<span style="color: #000000;"> False
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,age,height):
        self.name </span>=<span style="color: #000000;"> name
        self.age </span>=<span style="color: #000000;"> age
        self.height </span>=<span style="color: #000000;"> height
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__eq__</span><span style="color: #000000;">(self, other):
        </span><span style="color: #0000ff;">if</span> self.name == other.name <span style="color: #0000ff;">and</span> self.height ==<span style="color: #000000;"> other.height:
            </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> True
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">:
            </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> False
a1 </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">Jane</span><span style="color: #800000;">'</span>,20,55<span style="color: #000000;">)
a2 </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">Jane</span><span style="color: #800000;">'</span>,18,55<span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(a1 == a2)     <span style="color: #008000;">#</span><span style="color: #008000;">True</span></pre>
</div>
<p><strong><span style="font-family: 宋体; font-size: 18px;">6.__hash__</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px;">控制对象中的哈希值和另外一个对象的哈希值是否相等</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,age,height):
        self.name </span>=<span style="color: #000000;"> name
        self.age </span>=<span style="color: #000000;"> age
        self.height </span>=<span style="color: #000000;"> height
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__hash__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span> hash(self.age + self.height) +<span style="color: #000000;"> hash(self.name)
a1 </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">Jane</span><span style="color: #800000;">'</span>,20,55<span style="color: #000000;">)
a2 </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">Jane</span><span style="color: #800000;">'</span>,18,55<span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(hash(a1))         <span style="color: #008000;">#</span><span style="color: #008000;">-1393240518857837779</span>
<span style="color: #0000ff;">print</span>(hash(a2))         <span style="color: #008000;">#</span><span style="color: #008000;">-1393240518857837781</span></pre>
</div>
<p><strong><span style="font-family: 宋体; font-size: 18px;">7.__new__</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px;">创建一个对象</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    height </span>= 18
    <span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self):
        self.name </span>= <span style="color: #800000;">'</span><span style="color: #800000;">Aane</span><span style="color: #800000;">'</span><span style="color: #000000;">
        self.price </span>= 300<span style="color: #000000;">
        self.types </span>= <span style="color: #800000;">'</span><span style="color: #800000;">aaa</span><span style="color: #800000;">'</span>
    <span style="color: #0000ff;">def</span> <span style="color: #800080;">__new__</span>(cls, *args, **<span style="color: #000000;">kwargs):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">实例化一个对象...</span><span style="color: #800000;">'</span><span style="color: #000000;">)
        </span><span style="color: #0000ff;">return</span> object.<span style="color: #800080;">__new__</span>(cls, *args, **<span style="color: #000000;">kwargs)
a </span>= A()                 <span style="color: #008000;">#</span><span style="color: #008000;">实例化一个对象...</span>
<span style="color: #0000ff;">print</span>(a.<span style="color: #800080;">__dict__</span>)       <span style="color: #008000;">#</span><span style="color: #008000;">{'name': 'Aane', 'price': 300, 'types': 'aaa'}</span></pre>
</div>
<p><strong><em><span style="font-family: 宋体; font-size: 18px;">单例模式:限制一个类始终只有一个实例,因为一般来讲一个类可以产生无数个对象</span></em></strong></p>
<p><span style="font-family: 宋体; font-size: 18px;">在这里我们创建三个对象并打印它们的内存地址可以发现它们是不同的</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self):
        self.name </span>= <span style="color: #800000;">'</span><span style="color: #800000;">aaa</span><span style="color: #800000;">'</span><span style="color: #000000;">
a1 </span>=<span style="color: #000000;"> A()
a2 </span>=<span style="color: #000000;"> A()
a3 </span>=<span style="color: #000000;"> A()
</span><span style="color: #0000ff;">print</span>(a1)   <span style="color: #008000;">#</span><span style="color: #008000;">&lt;__main__.A object at 0x00000000025B1D68&gt;</span>
<span style="color: #0000ff;">print</span>(a2)   <span style="color: #008000;">#</span><span style="color: #008000;">&lt;__main__.A object at 0x00000000025CD0F0&gt;</span>
<span style="color: #0000ff;">print</span>(a3)   <span style="color: #008000;">#</span><span style="color: #008000;">&lt;__main__.A object at 0x00000000025CD128&gt;</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">所以在我们第一次实例化这个类的时候就创建一个实例化的对象,那么我们再一次实例化一个对象的话该如何再去使用之前的实例化对象呢？</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    </span><span style="color: #800080;">__instance</span> =<span style="color: #000000;"> False
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,age):
        self.name </span>=<span style="color: #000000;"> name
        self.age </span>=<span style="color: #000000;"> age
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__new__</span>(cls,*args,**<span style="color: #000000;">kwargs):
        </span><span style="color: #0000ff;">if</span> cls.<span style="color: #800080;">__instance</span><span style="color: #000000;">:
            </span><span style="color: #0000ff;">return</span> cls.<span style="color: #800080;">__instance</span><span style="color: #000000;">
        cls.</span><span style="color: #800080;">__instance</span> = object.<span style="color: #800080;">__new__</span><span style="color: #000000;">(A)
        </span><span style="color: #0000ff;">return</span> cls.<span style="color: #800080;">__instance</span><span style="color: #000000;">
a1 </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">Jogn</span><span style="color: #800000;">'</span>,33<span style="color: #000000;">)
a2 </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">Jane</span><span style="color: #800000;">'</span>,35<span style="color: #000000;">)
a3 </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">KKK</span><span style="color: #800000;">'</span>,55<span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(a1)                       <span style="color: #008000;">#</span><span style="color: #008000;">&lt;__main__.A object at 0x000000000217D198&gt;</span>
<span style="color: #0000ff;">print</span>(a1.<span style="color: #800080;">__dict__</span>)              <span style="color: #008000;">#</span><span style="color: #008000;">{'name': 'KKK', 'age': 55}</span>
<span style="color: #0000ff;">print</span>(a2)                       <span style="color: #008000;">#</span><span style="color: #008000;">&lt;__main__.A object at 0x000000000217D198&gt;</span>
<span style="color: #0000ff;">print</span>(a2.<span style="color: #800080;">__dict__</span>)              <span style="color: #008000;">#</span><span style="color: #008000;">{'name': 'KKK', 'age': 55}</span>
<span style="color: #0000ff;">print</span>(a3)                       <span style="color: #008000;">#</span><span style="color: #008000;">&lt;__main__.A object at 0x000000000217D198&gt;</span>
<span style="color: #0000ff;">print</span>(a3.<span style="color: #800080;">__dict__</span>)              <span style="color: #008000;">#</span><span style="color: #008000;">{'name': 'KKK', 'age': 55}</span>
<span style="color: #0000ff;">print</span>(id(a1),id(a2),id(a3))     <span style="color: #008000;">#</span><span style="color: #008000;">41734552 41734552 41734552</span></pre>
</div>
<p><strong><span style="font-family: 宋体; font-size: 18px;">8.__del__</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px;">析构函数:当对象结束其生命周期,如对象所在的函数已调用完毕时,系统自动执行析构函数,它往往用来做"清理善后"的工作。当我们直接删除一个实例化的对象再去打印它,就会报错告诉我们这个对象已经不存在了</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,price,types):
        self.name </span>=<span style="color: #000000;"> name
        self.price </span>=<span style="color: #000000;"> price
        self.types </span>=<span style="color: #000000;"> types
a </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">AAA</span><span style="color: #800000;">'</span>,200,<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">del</span><span style="color: #000000;"> a
</span><span style="color: #0000ff;">print</span>(a)    <span style="color: #008000;">#</span><span style="color: #008000;">NameError: name 'a' is not defined</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">我们再在A中添加一个__del__方法</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,price,types):
        self.name </span>=<span style="color: #000000;"> name
        self.price </span>=<span style="color: #000000;"> price
        self.types </span>=<span style="color: #000000;"> types
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__del__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">这个对象%s已被删除!</span><span style="color: #800000;">'</span> %<span style="color: #000000;"> self.name)
        </span><span style="color: #0000ff;">del</span><span style="color: #000000;"> self
a </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">AAA</span><span style="color: #800000;">'</span>,200,<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">del</span> a       <span style="color: #008000;">#</span><span style="color: #008000;">这个对象AAA已被删除!   这里相当于调用了a.__dict__</span>
<span style="color: #0000ff;">print</span>(a)    <span style="color: #008000;">#</span><span style="color: #008000;">NameError: name 'a' is not defined</span></pre>
</div>
<p><strong><span style="font-family: 宋体; font-size: 18px;">8.__getitem__</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px;">模拟字典的方式来拿值</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    gender </span>= <span style="color: #800000;">'</span><span style="color: #800000;">male</span><span style="color: #800000;">'</span>
    <span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,price,types):
        self.name </span>=<span style="color: #000000;"> name
        self.price </span>=<span style="color: #000000;"> price
        self.types </span>=<span style="color: #000000;"> types
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__getitem__</span><span style="color: #000000;">(self, item):
        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> hasattr(self,item):
            </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> getattr(self,item)
        </span><span style="color: #0000ff;">return</span> <span style="color: #800000;">'</span><span style="color: #800000;">没有找到这个值!</span><span style="color: #800000;">'</span><span style="color: #000000;">
a </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">AAA</span><span style="color: #800000;">'</span>,200,<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(a[<span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>])        <span style="color: #008000;">#</span><span style="color: #008000;">AAA</span>
<span style="color: #0000ff;">print</span>(a[<span style="color: #800000;">'</span><span style="color: #800000;">price</span><span style="color: #800000;">'</span>])       <span style="color: #008000;">#</span><span style="color: #008000;">200</span>
<span style="color: #0000ff;">print</span>(a[<span style="color: #800000;">'</span><span style="color: #800000;">types</span><span style="color: #800000;">'</span>])       <span style="color: #008000;">#</span><span style="color: #008000;">A</span>
<span style="color: #0000ff;">print</span>(a[<span style="color: #800000;">'</span><span style="color: #800000;">gender</span><span style="color: #800000;">'</span>])      <span style="color: #008000;">#</span><span style="color: #008000;">male</span>
<span style="color: #0000ff;">print</span>(a[<span style="color: #800000;">'</span><span style="color: #800000;">sex</span><span style="color: #800000;">'</span>])         <span style="color: #008000;">#</span><span style="color: #008000;">没有找到这个值!</span></pre>
</div>
<p><strong><span style="font-family: 宋体; font-size: 18px;">9.__setitem__</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px;">模拟字典的方式来设值</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,price,types):
        self.name </span>=<span style="color: #000000;"> name
        self.price </span>=<span style="color: #000000;"> price
        self.types </span>=<span style="color: #000000;"> types
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__setitem__</span>(self,key,value):        <span style="color: #008000;">#</span><span style="color: #008000;">重新设定一个新的值</span>
        self.<span style="color: #800080;">__dict__</span>[<span style="color: #800000;">'</span><span style="color: #800000;">key</span><span style="color: #800000;">'</span>] =<span style="color: #000000;"> value
a </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">AAA</span><span style="color: #800000;">'</span>,200,<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(a.<span style="color: #800080;">__dict__</span>)                           <span style="color: #008000;">#</span><span style="color: #008000;">{'name': 'AAA', 'price': 200, 'types': 'A'}</span>
a.<span style="color: #800080;">__dict__</span>[<span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>] = <span style="color: #800000;">'</span><span style="color: #800000;">BBB</span><span style="color: #800000;">'</span><span style="color: #000000;">
a.</span><span style="color: #800080;">__dict__</span>[<span style="color: #800000;">'</span><span style="color: #800000;">price</span><span style="color: #800000;">'</span>] = 300<span style="color: #000000;">
a.</span><span style="color: #800080;">__dict__</span>[<span style="color: #800000;">'</span><span style="color: #800000;">types</span><span style="color: #800000;">'</span>] = <span style="color: #800000;">'</span><span style="color: #800000;">C</span><span style="color: #800000;">'</span><span style="color: #000000;">
a.</span><span style="color: #800080;">__dict__</span>[<span style="color: #800000;">'</span><span style="color: #800000;">gender</span><span style="color: #800000;">'</span>] = <span style="color: #800000;">'</span><span style="color: #800000;">male</span><span style="color: #800000;">'</span>               <span style="color: #008000;">#</span><span style="color: #008000;">增加了一个新的属性gender</span>
<span style="color: #0000ff;">print</span>(a.<span style="color: #800080;">__dict__</span>)                           <span style="color: #008000;">#</span><span style="color: #008000;">{'name': 'BBB', 'price': 300, 'types': 'C', 'gender': 'male'}</span></pre>
</div>
<p><strong><span style="font-family: 宋体; font-size: 18px;">10.__delitem__</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px;">模拟字典的方式来删除</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    gender </span>= <span style="color: #800000;">'</span><span style="color: #800000;">male</span><span style="color: #800000;">'</span>
    <span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,price,types):
        self.name </span>=<span style="color: #000000;"> name
        self.price </span>=<span style="color: #000000;"> price
        self.types </span>=<span style="color: #000000;"> types
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__delitem__</span><span style="color: #000000;">(self, key):
        </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">%s已删除!</span><span style="color: #800000;">'</span>%<span style="color: #000000;">key)
        </span><span style="color: #0000ff;">del</span> self.<span style="color: #800080;">__dict__</span><span style="color: #000000;">[key]
a </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">AAA</span><span style="color: #800000;">'</span>,200,<span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">del</span> a[<span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>]       <span style="color: #008000;">#</span><span style="color: #008000;">name已删除!</span>
<span style="color: #0000ff;">del</span> a[<span style="color: #800000;">'</span><span style="color: #800000;">price</span><span style="color: #800000;">'</span>]      <span style="color: #008000;">#</span><span style="color: #008000;">price已删除!</span>
<span style="color: #0000ff;">print</span>(a.<span style="color: #800080;">__dict__</span>)   <span style="color: #008000;">#</span><span style="color: #008000;">{'types': 'A'}</span></pre>
</div>
<p>&nbsp;</p>
<p><strong><span style="background-color: #ff0000; color: #ffffff; font-family: 宋体; font-size: 18pt;">问题总结</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px;">1.有很多对象,它们的姓名和性别相同但是年龄不同,如何这种情况的对象去重?</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A:
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,name,sex,age):
        self.name </span>=<span style="color: #000000;"> name
        self.sex </span>=<span style="color: #000000;"> sex
        self.age </span>=<span style="color: #000000;"> age
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__eq__</span><span style="color: #000000;">(self, other):
        </span><span style="color: #0000ff;">if</span> self.name == other.name <span style="color: #0000ff;">and</span> self.sex ==<span style="color: #000000;"> other.sex:
            </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> True
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> False
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__hash__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span> hash(self.name+<span style="color: #000000;">self.sex)
a </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">Json</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">male</span><span style="color: #800000;">'</span>,26<span style="color: #000000;">)
b </span>= A(<span style="color: #800000;">'</span><span style="color: #800000;">Json</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">male</span><span style="color: #800000;">'</span>,30<span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(set((a,b)))   <span style="color: #008000;">#</span><span style="color: #008000;">set()依赖对象的 __eq__和__hash__ {&lt;__main__.A object at 0x0000000002761DD8&gt;}</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">2.扑克牌问题</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> json
</span><span style="color: #0000ff;">from</span> collections <span style="color: #0000ff;">import</span><span style="color: #000000;"> namedtuple
Card </span>= namedtuple(<span style="color: #800000;">'</span><span style="color: #800000;">Card</span><span style="color: #800000;">'</span>,[<span style="color: #800000;">'</span><span style="color: #800000;">rank</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">suit</span><span style="color: #800000;">'</span>])   <span style="color: #008000;">#</span><span style="color: #008000;">rank牌面的大小 suit牌面的花色</span>
<span style="color: #0000ff;">class</span><span style="color: #000000;"> FrenchDeck:
    ranks </span>= [str(n) <span style="color: #0000ff;">for</span> n <span style="color: #0000ff;">in</span> range(2,11)] + list(<span style="color: #800000;">'</span><span style="color: #800000;">JQKA</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    suits </span>= [<span style="color: #800000;">'</span><span style="color: #800000;">红心</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">方块</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">梅花</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">黑桃</span><span style="color: #800000;">'</span><span style="color: #000000;">]
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self):
        self._cards </span>= [Card(rank,suit) <span style="color: #0000ff;">for</span> rank <span style="color: #0000ff;">in</span> FrenchDeck.ranks <span style="color: #0000ff;">for</span> suit <span style="color: #0000ff;">in</span><span style="color: #000000;"> FrenchDeck.suits]

    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__len__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> len(self._cards)

    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__getitem__</span><span style="color: #000000;">(self, item):
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> self._cards[item]

    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__setitem__</span><span style="color: #000000;">(self,key,value):
        self._cards[key] </span>=<span style="color: #000000;"> value

    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__str__</span><span style="color: #000000;">(self):
        </span><span style="color: #0000ff;">return</span> json.dumps(self._cards,ensure_ascii=<span style="color: #000000;">False)

deck </span>=<span style="color: #000000;"> FrenchDeck()
</span><span style="color: #0000ff;">print</span>(deck[10])         <span style="color: #008000;">#</span><span style="color: #008000;">Card(rank='4', suit='梅花')</span>
<span style="color: #0000ff;">from</span> random <span style="color: #0000ff;">import</span><span style="color: #000000;"> choice
</span><span style="color: #0000ff;">print</span>(choice(deck))     <span style="color: #008000;">#</span><span style="color: #008000;">Card(rank='3', suit='方块')</span>
<span style="color: #0000ff;">print</span>(choice(deck))     <span style="color: #008000;">#</span><span style="color: #008000;">Card(rank='9', suit='方块')</span>
<span style="color: #0000ff;">from</span> random <span style="color: #0000ff;">import</span><span style="color: #000000;"> shuffle
shuffle(deck)
</span><span style="color: #0000ff;">print</span>(deck[10])         <span style="color: #008000;">#</span><span style="color: #008000;">Card(rank='2', suit='方块')</span>
<span style="color: #0000ff;">print</span>(deck)             <span style="color: #008000;">#</span><span style="color: #008000;">打印所有牌色</span>
<span style="color: #0000ff;">print</span>(deck[:5])         <span style="color: #008000;">#</span><span style="color: #008000;">[Card(rank='6', suit='梅花'), Card(rank='3', suit='方块'), Card(rank='10', suit='红心'),<br /> 　　　　　　　　　　　　　  #Card(rank='9', suit='红心'), Card(rank='4', suit='方块')]</span></pre>
</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>