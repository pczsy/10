<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修python使用MYSQL数据库' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>python使用MYSQL数据库</center></div><div class='banquan'>原文出处:本文由博客园博主测试-安静提供。<br/>
原文连接:https://www.cnblogs.com/qican/p/11240250.html</div><br>
    <p>　　在做测试的时候都会用到数据库，今天写一篇通过python连接MYSQL数据库</p>
<p>&nbsp;</p>
<h1>什么是MYSQL数据库</h1>
<p>MySQL是一个关系型数据库管理系统，由瑞典MySQL AB 公司开发，目前属于 Oracle 旗下产品。MySQL 是最流行的关系型数据库管理系统之一，在 WEB 应用方面，MySQL是最好的 RDBMS (Relational Database Management System，关系数据库管理系统) 应用软件之一。</p>
<h2>什么是PYMYSQL</h2>
<p>PyMySQL 是在 Python3.x 版本中用于连接 MySQL 服务器的一个库，Python2中则使用mysqldb。</p>
<p>PyMySQL 遵循 Python 数据库 API v2.0 规范，并包含了 pure-Python MySQL 客户端库。</p>
<p>&nbsp;</p>
<h3>PyMySQL安装</h3>
<div class="cnblogs_code">
<pre><code>pip install pymysql</pre>
</div>
<p>&nbsp;</p>
<h1>PyMySQL使用</h1>
<h3>连接数据库</h3>
<p>1、首先导入PyMySQL模块</p>
<p>2、连接数据库（通过connect()）</p>
<p>3、创建一个数据库对象 （通过cursor()）</p>
<p>4、进行对数据库做增删改查</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> coding:utf-8</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> pymysql
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 连接数据库</span>
count =<span style="color: #000000;"> pymysql.connect(
            host </span>= <span style="color: #800000;">'xx</span><span style="color: #800000;">.xxx.xxx.xx</span><span style="color: #800000;">'</span>, <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库地址</span>
            port = 3306,    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库端口号</span>
            user=<span style="color: #800000;">'</span><span style="color: #800000;">xxxx</span><span style="color: #800000;">'</span>,    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库账号</span>
            password=<span style="color: #800000;">'XXXX</span><span style="color: #800000;">'</span>,    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库密码</span>
            db = <span style="color: #800000;">'</span><span style="color: #800000;">test_sll</span><span style="color: #800000;">'</span>)    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库表名<br /></span><span style="color: #008000;"># 创建数据库对象</span>
db = count.cursor()</pre>
</div>
<h3>查找数据</h3>
<p>db.fetchone()获取一条数据</p>
<p>db.fetchall()获取全部数据</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> coding:utf-8</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> pymysql
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 连接数据库</span>
count =<span style="color: #000000;"> pymysql.connect(
            host </span>= <span style="color: #800000;">'xx</span><span style="color: #800000;">.xxx.xxx.xx</span><span style="color: #800000;">'</span>, <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库地址</span>
            port = 3306,    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库端口号</span>
            user=<span style="color: #800000;">'xxxx</span><span style="color: #800000;">'</span>,    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库账号</span>
            password=<span style="color: #800000;">'xxxx</span><span style="color: #800000;">'</span>,    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库密码</span>
            db = <span style="color: #800000;">'</span><span style="color: #800000;">test_sll</span><span style="color: #800000;">'</span>)    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库名称</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 创建数据库对象</span>
db =<span style="color: #000000;"> count.cursor()
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 写入SQL语句</span>
sql = <span style="color: #800000;">"</span><span style="color: #800000;">select * from students </span><span style="color: #800000;">"</span>
<span style="color: #008000;">#</span><span style="color: #008000;"> 执行sql命令</span>
<span style="color: #000000;">db.execute(sql)
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 获取一个查询</span><span style="color: #008000;">
#</span><span style="color: #008000;"> restul = db.fetchone()</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 获取全部的查询内容</span>
restul =<span style="color: #000000;"> db.fetchall()
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(restul)
db.close()</span></pre>
</div>
<h3>修改数据</h3>
<p>commit() 执行完SQL后需要提交保存内容</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> coding:utf-8</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> pymysql
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 连接数据库</span>
count =<span style="color: #000000;"> pymysql.connect(
            host </span>= <span style="color: #800000;">'xx</span><span style="color: #800000;">.xxx.xxx.xx</span><span style="color: #800000;">'</span>, <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库地址</span>
            port = 3306,    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库端口号</span>
            user=<span style="color: #800000;">'xxx</span><span style="color: #800000;">'</span>,    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库账号</span>
            password=<span style="color: #800000;">'xxx</span><span style="color: #800000;">'</span>,    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库密码</span>
            db = <span style="color: #800000;">'</span><span style="color: #800000;">test_sll</span><span style="color: #800000;">'</span>)    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库表名</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 创建数据库对象</span>
db =<span style="color: #000000;"> count.cursor()
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 写入SQL语句</span>
sql =  <span style="color: #800000;">"</span><span style="color: #800000;">update students set age = '12' WHERE id=1</span><span style="color: #800000;">"</span>
<span style="color: #008000;">#</span><span style="color: #008000;"> 执行sql命令</span>
<span style="color: #000000;">db.execute(sql)
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 保存操作</span>
<span style="color: #000000;">count.commit()
db.close()</span></pre>
</div>
<h3>删除数据</h3>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> coding:utf-8</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> pymysql
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 连接数据库</span>
count =<span style="color: #000000;"> pymysql.connect(
            host </span>= <span style="color: #800000;">'xx</span><span style="color: #800000;">.xxx.xxx.xx</span><span style="color: #800000;">'</span>, <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库地址</span>
            port = 3306,    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库端口号</span>
            user=<span style="color: #800000;">'xxxx</span><span style="color: #800000;">'</span>,    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库账号</span>
            password=<span style="color: #800000;">'xxx</span><span style="color: #800000;">'</span>,    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库密码</span>
            db = <span style="color: #800000;">'</span><span style="color: #800000;">test_sll</span><span style="color: #800000;">'</span>)    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库表名</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 创建数据库对象</span>
db =<span style="color: #000000;"> count.cursor()
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 写入SQL语句</span>
sql =  <span style="color: #800000;">"</span><span style="color: #800000;">delete from students where age = 12</span><span style="color: #800000;">"</span>
<span style="color: #008000;">#</span><span style="color: #008000;"> 执行sql命令</span>
<span style="color: #000000;">db.execute(sql)
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 保存提交</span>
<span style="color: #000000;">count.commit()
db.close()</span></pre>
</div>
<h3>新增数据</h3>
<p>新增数据这里涉及到一个事务问题，事物机制可以保证数据的一致性，比如插入一个数据，不会存在插入一半的情况，要么全部插入，要么都不插入</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> coding:utf-8</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> pymysql
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 连接数据库</span>
count =<span style="color: #000000;"> pymysql.connect(
            host </span>= <span style="color: #800000;">'xx</span><span style="color: #800000;">.xxx.xxx.xx</span><span style="color: #800000;">'</span>, <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库地址</span>
            port = 3306,    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库端口号</span>
            user=<span style="color: #800000;">'xxxx</span><span style="color: #800000;">'</span>,    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库账号</span>
            password=<span style="color: #800000;">'xxx</span><span style="color: #800000;">'</span>,    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库密码</span>
            db = <span style="color: #800000;">'</span><span style="color: #800000;">test_sll</span><span style="color: #800000;">'</span>)    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库表名</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 创建数据库对象</span>
db =<span style="color: #000000;"> count.cursor()
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 写入SQL语句</span>
sql = <span style="color: #800000;">"</span><span style="color: #800000;">insert INTO students(id,name,age)VALUES (2,'安静','26')</span><span style="color: #800000;">"</span>
<span style="color: #008000;">#</span><span style="color: #008000;"> 执行sql命令</span>
<span style="color: #000000;">db.execute(sql)
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 保存提交</span>
<span style="color: #000000;">count.commit()
db.close()</span></pre>
</div>
<p>到这可以发现除了查询不需要保存，其他操作都要提交保存，并且还会发现删除，修改，新增，只是修改了SQL，其他的没什么变化</p>
<p>&nbsp;</p>
<h3>创建表</h3>
<p>创建表首先我们先定义下表内容的字段</p>
<table style="height: 91px; width: 404px;" border="0" align="left">
<tbody>
<tr>
<td>字段名</td>
<td>含义</td>
<td>类型</td>
</tr>
<tr>
<td>id</td>
<td>id</td>
<td>varchar</td>
</tr>
<tr>
<td>name</td>
<td>姓名</td>
<td>varchar</td>
</tr>
<tr>
<td>age</td>
<td>年龄</td>
<td>int</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> coding:utf-8</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> pymysql
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 连接数据库</span>
count =<span style="color: #000000;"> pymysql.connect(
            host </span>= <span style="color: #800000;">'</span><span style="color: #800000;">xx.xxx.xxx.xx</span><span style="color: #800000;">'</span>, <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库地址</span>
            port = 3306,    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库端口号</span>
            user=<span style="color: #800000;">'</span><span style="color: #800000;">xxxx</span><span style="color: #800000;">'</span>,    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库账号</span>
            password=<span style="color: #800000;">'</span><span style="color: #800000;">xxx</span><span style="color: #800000;">'</span>,    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库密码</span>
            db = <span style="color: #800000;">'</span><span style="color: #800000;">test_sll</span><span style="color: #800000;">'</span>)    <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库表名</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 创建数据库对象</span>
db =<span style="color: #000000;"> count.cursor()
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 写入SQL语句</span>
sql = <span style="color: #800000;">'</span><span style="color: #800000;">CREATE TABLE students (id VARCHAR(255) ,name VARCHAR(255) ,age INT)</span><span style="color: #800000;">'</span>
<span style="color: #008000;">#</span><span style="color: #008000;"> 执行sql命令</span>
<span style="color: #000000;">db.execute(sql)
db.close()</span></pre>
</div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>